import{r as o,j as e,S as L,A as z,a as f}from"./app-DfHWa9Dj.js";import{A as R}from"./AuthenticatedLayout-D7uggTCh.js";import{D}from"./datatable.esm-By9qullS.js";import{C as l}from"./column.esm-rXnXnSXi.js";import{B as n}from"./button.esm-DX94dMwm.js";import{C as O,c as _}from"./confirmpopup.esm-B2jT6DFh.js";import{T as E}from"./toolbar.esm-sX01LIAI.js";import{T as H}from"./toast.esm-CoMKgODT.js";import U from"./Create-zekYkLTl.js";import F from"./Update-B-5VMBbm.js";import"./Dropdown-BIk6-XdJ.js";import"./tag.esm-zbDdFAbq.js";import"./ripple.esm-BgxbDumr.js";import"./motion-BG1YUUi8.js";import"./index.esm-CxUyxVcB.js";import"./paginator.esm-CImGPiRz.js";import"./inputnumber.esm-tDfve9wj.js";import"./inputtext.esm-CdzphA62.js";import"./tooltip.esm-BOVBVbrd.js";import"./index.esm-DsEs8f8S.js";import"./dropdown.esm-BY1Px5fx.js";import"./index.esm-t0ce8hpD.js";import"./index.esm-Bck5B7Mr.js";import"./overlayservice.esm-BeGvTcOU.js";import"./csstransition.esm-BhUmH3xQ.js";import"./index.esm-Cq2hl7JN.js";import"./index.esm-BhLCkf4C.js";import"./index.esm-DK2z9ksQ.js";import"./index.esm-eg1Y0jZ8.js";import"./index.esm-5brnS2bN.js";import"./index.esm-DfL7pt6i.js";import"./index.esm-Bxo1xCvC.js";import"./TransitionGroup-BYtBtipk.js";import"./dialog.esm-620gE8t_.js";import"./checkbox.esm-Df_cPP84.js";import"./fileupload.esm-CIdGGOdw.js";function Me({auth:j,brands:k}){const r=o.useRef(null),[x,v]=o.useState(null),[p,g]=o.useState([]),[w,y]=o.useState(!1),[M,h]=o.useState(!1),[c,d]=o.useState(!1),[B,u]=o.useState(k),b=async t=>{var i,a;if(!p.length){r.current.show({severity:"warn",summary:"Uyarı",detail:"Lütfen en az bir marka seçin",life:3e3});return}try{d(!0),await f.post(route("super.car.brands.bulk-status"),{ids:p.map(s=>s.id),status:t}),u(s=>s.map(m=>p.find(A=>A.id===m.id)?{...m,is_active:t}:m)),g([]),r.current.show({severity:"success",summary:"Başarılı",detail:"Markalar başarıyla güncellendi",life:3e3})}catch(s){r.current.show({severity:"error",summary:"Hata",detail:((a=(i=s.response)==null?void 0:i.data)==null?void 0:a.message)||"Bir hata oluştu",life:3e3})}finally{d(!1)}},P=async()=>{var t,i;try{d(!0);const a=await f.post(route("super.car.brands.import"));r.current.show({severity:"success",summary:"Başarılı",detail:a.data.message,life:3e3})}catch(a){r.current.show({severity:"error",summary:"Hata",detail:((i=(t=a.response)==null?void 0:t.data)==null?void 0:i.error)||"Bir hata oluştu",life:3e3})}finally{d(!1)}},S=t=>{_({target:event.currentTarget,message:"Bu markayı silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",accept:async()=>{var i,a;try{d(!0),await f.delete(route("super.car.brands.destroy",t.id)),u(s=>s.filter(m=>m.id!==t.id)),r.current.show({severity:"success",summary:"Başarılı",detail:"Marka başarıyla silindi",life:3e3})}catch(s){r.current.show({severity:"error",summary:"Hata",detail:((a=(i=s.response)==null?void 0:i.data)==null?void 0:a.error)||"Bir hata oluştu",life:3e3})}finally{d(!1)}}})},C=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Seçilenleri Aktif Et",size:"small",icon:"pi pi-check",onClick:()=>b(!0),loading:c}),e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Seçilenleri Deaktif Et",size:"small",icon:"pi pi-times",severity:"danger",onClick:()=>b(!1),loading:c})]})}),T=()=>e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Yeni Marka",size:"small",icon:"pi pi-plus",severity:"success",onClick:()=>y(!0)}),e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Toplu İçe Aktar",size:"small",icon:"pi pi-upload",onClick:P,loading:c})]}),N=t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{icon:"pi pi-pencil",rounded:!0,outlined:!0,severity:"success",onClick:()=>{v(t),h(!0)}}),e.jsx(n,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>S(t)})]});return e.jsxs(R,{user:j.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Araç Markaları"}),children:[e.jsx(L,{title:"Araç Markaları"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx(H,{ref:r}),e.jsx(O,{}),e.jsx(E,{className:"mb-4",left:C,right:T}),e.jsxs(D,{value:B,dataKey:"id",loading:c,removableSort:!0,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",filterDisplay:"row",selection:p,onSelectionChange:t=>g(t.value),filters:{name:{value:"",matchMode:"contains"}},emptyMessage:"Marka bulunamadı.",children:[e.jsx(l,{selectionMode:"multiple",exportable:!1,style:{width:"3rem"}}),e.jsx(l,{field:"id",header:"ID",sortable:!0}),e.jsx(l,{field:"logo",header:"Logo",body:t=>t.logo?e.jsx("img",{src:t.logo,alt:t.name,className:"w-16 h-16 object-contain rounded-lg bg-gray-100 dark:bg-gray-700 p-2"}):e.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"pi pi-image text-gray-500 text-xl"})})}),e.jsx(l,{field:"name",filter:!0,filterPlaceholder:"Markaya Göre",header:"Marka Adı",sortable:!0}),e.jsx(l,{field:"models_count",header:"Model Sayısı",sortable:!0,body:t=>e.jsxs(n,{link:!0,onClick:()=>z.visit(route("super.car.brands.models.index",t.id)),className:"p-0 underline font-normal",children:[t.models_count," Model"]})}),e.jsx(l,{field:"is_active",header:"Durum",sortable:!0,style:{width:"10%"},body:t=>t.is_active?"Aktif":"Pasif"}),e.jsx(l,{body:N,exportable:!1,style:{width:"20%"}})]}),e.jsx(U,{visible:w,setVisible:y,toast:r,setBrands:u}),x&&e.jsx(F,{visible:M,setVisible:h,toast:r,brand:x,setBrands:u})]})})})]})}export{Me as default};
