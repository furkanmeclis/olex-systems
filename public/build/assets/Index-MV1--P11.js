import{r as s,j as e,S as D,L as z,a as v}from"./app-2dEnFbol.js";import{A as R}from"./AuthenticatedLayout-B6eXOzRi.js";import{D as A}from"./datatable.esm-Ded6BT4Q.js";import{C as p}from"./column.esm-C5YmWcIJ.js";import{B as o}from"./button.esm-BxCmjYrH.js";import{C as E,c as O}from"./confirmpopup.esm-D2uVlXFP.js";import{T as U}from"./toolbar.esm-DdFyApMb.js";import{T as _}from"./toast.esm-CYUjmINi.js";import F from"./Create-C77YoxM8.js";import H from"./Update-Rco8u3j6.js";import"./Dropdown-Bz8_Grql.js";import"./tag.esm-1aFfu_aU.js";import"./ripple.esm-BzRUCNyJ.js";import"./motion-CT3WypUb.js";import"./index.esm-CJ0UbATh.js";import"./paginator.esm-D7V6fndz.js";import"./inputnumber.esm-2HOoghO7.js";import"./inputtext.esm-BElP5JEu.js";import"./tooltip.esm-B0SFQXmi.js";import"./index.esm-CfbMo687.js";import"./dropdown.esm-BVu1Wdrb.js";import"./index.esm-BvN2aFpx.js";import"./index.esm-DCNiD8Nv.js";import"./overlayservice.esm-hjHhmC6x.js";import"./csstransition.esm-CZRxnida.js";import"./index.esm-BaGNysXl.js";import"./index.esm-BCqelGsY.js";import"./index.esm-CTlmYQmh.js";import"./index.esm-BD_l9FnN.js";import"./index.esm-LbBjE-3k.js";import"./index.esm-DffjiFPL.js";import"./index.esm-GJ4SfU9q.js";import"./TransitionGroup-B7gto3Pv.js";import"./dialog.esm-D5LH6sar.js";import"./checkbox.esm-DePb2jBT.js";function we({auth:b,models:k,brand:a}){const r=s.useRef(null),[x,w]=s.useState(null),[l,h]=s.useState([]),[M,g]=s.useState(!1),[P,y]=s.useState(!1),[f,c]=s.useState(!1),[S,u]=s.useState(k),j=async t=>{var n,d;if(!l.length){r.current.show({severity:"warn",summary:"Uyarı",detail:"Lütfen en az bir model seçin",life:3e3});return}try{c(!0),await v.post(route("super.car.brands.models.bulk-status",a.id),{ids:l.map(i=>i.id),status:t}),u(i=>i.map(m=>l.find(B=>B.id===m.id)?{...m,is_active:t}:m)),h([]),r.current.show({severity:"success",summary:"Başarılı",detail:"Modeller başarıyla güncellendi",life:3e3})}catch(i){r.current.show({severity:"error",summary:"Hata",detail:((d=(n=i.response)==null?void 0:n.data)==null?void 0:d.message)||"Bir hata oluştu",life:3e3})}finally{c(!1)}},C=t=>{O({target:event.currentTarget,message:"Bu modeli silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",accept:async()=>{var n,d;try{c(!0),await v.delete(route("super.car.brands.models.destroy",{brand:a.id,model:t.id})),u(i=>i.filter(m=>m.id!==t.id)),r.current.show({severity:"success",summary:"Başarılı",detail:"Model başarıyla silindi",life:3e3})}catch(i){r.current.show({severity:"error",summary:"Hata",detail:((d=(n=i.response)==null?void 0:n.data)==null?void 0:d.error)||"Bir hata oluştu",life:3e3})}finally{c(!1)}}})},T=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(o,{size:"small",tooltipOptions:{position:"top"},tooltip:"Seçilenleri Aktif Et",icon:"pi pi-check",onClick:()=>j(!0),loading:f}),e.jsx(o,{size:"small",tooltipOptions:{position:"top"},tooltip:"Seçilenleri Deaktif Et",icon:"pi pi-times",severity:"danger",onClick:()=>j(!1),loading:f})]})}),N=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(o,{size:"small",tooltipOptions:{position:"top"},tooltip:"Yeni Model",icon:"pi pi-plus",severity:"success",onClick:()=>g(!0)})}),L=t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{icon:"pi pi-pencil",rounded:!0,outlined:!0,severity:"success",onClick:()=>{w(t),y(!0)}}),e.jsx(o,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>C(t)})]});return e.jsxs(R,{user:b.user,header:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:[a.name," Modelleri"]}),e.jsx(o,{link:!0,className:"!p-0 !min-w-0 underline font-normal",onClick:()=>D.visit(route("super.car.brands.index")),children:"(Markalara Dön)"})]}),children:[e.jsx(z,{title:`${a.name} Modelleri`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx(_,{ref:r}),e.jsx(E,{}),e.jsx(U,{className:"mb-4",left:T,right:N}),e.jsxs(A,{value:S,dataKey:"id",loading:f,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",filterDisplay:"row",selection:l,removableSort:!0,onSelectionChange:t=>h(t.value),filters:{name:{value:"",matchMode:"contains"}},emptyMessage:"Model bulunamadı.",children:[e.jsx(p,{selectionMode:"multiple",exportable:!1}),e.jsx(p,{field:"id",header:"ID",sortable:!0}),e.jsx(p,{field:"name",filter:!0,filterPlaceholder:"Modele Göre",header:"Model Adı",sortable:!0,style:{width:"45%"}}),e.jsx(p,{field:"is_active",header:"Durum",sortable:!0,style:{width:"10%"},body:t=>t.is_active?"Aktif":"Pasif"}),e.jsx(p,{body:L,exportable:!1,style:{width:"20%"}})]}),e.jsx(F,{visible:M,setVisible:g,toast:r,setModels:u,brand:a}),x&&e.jsx(H,{visible:P,setVisible:y,toast:r,model:x,setModels:u,brand:a})]})})})]})}export{we as default};
