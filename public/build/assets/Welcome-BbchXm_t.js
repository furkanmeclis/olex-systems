import{R as b,r as v,j as t,S as U,x as V,A as W}from"./app-Gu_WZQHt.js";import{A as J}from"./ApplicationLogo-Bj5kQCv_.js";import{B as T}from"./button.esm-DVrsQp04.js";import{I as Q}from"./inputmask.esm-B3Tz-BPS.js";import{T as Z}from"./toast.esm-C2SONjJv.js";import"./ripple.esm-BmgBAEku.js";import"./index.esm-ChVL6KfZ.js";import"./tooltip.esm-DqvN6xxZ.js";import"./inputtext.esm-xnWTAU7_.js";import"./csstransition.esm-BhYveBEp.js";import"./index.esm-Ddg6hf65.js";import"./index.esm-DBPgBsB6.js";import"./index.esm-DravIrTS.js";import"./index.esm-B4h2qdeE.js";const $="/build/assets/bg-D-KoXhPT.svg";var G=function(a){return typeof a=="object"&&a!==null},ee=function(a){var D=a.value,f=D===void 0?"":D,I=a.numInputs,o=I===void 0?4:I,C=a.onChange,O=a.onPaste,A=a.renderInput,g=a.shouldAutoFocus,p=g===void 0?!1:g,j=a.inputType,w=j===void 0?"text":j,x=a.renderSeparator,k=a.placeholder,m=a.containerStyle,N=a.inputStyle,S=a.skipDefaultStyles,E=S===void 0?!1:S,F=b.useState(0),i=F[0],l=F[1],n=b.useRef([]),y=function(){return f?f.toString().split(""):[]},c=w==="number"||w==="tel";b.useEffect(function(){n.current=n.current.slice(0,o)},[o]),b.useEffect(function(){var e;p&&((e=n.current[0])===null||e===void 0||e.focus())},[p]);var H=function(){if(typeof k=="string"){if(k.length===o)return k;k.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},L=function(e){var r=c?!isNaN(Number(e)):typeof e=="string";return r&&e.trim().length===1},K=function(e){var r=e.target.value;L(r)&&(P(r),h(i+1))},M=function(e){var r=e.nativeEvent,s=e.target.value;if(!L(s)){if(s.length===o){var u=s.split("").some(function(d){return!L(d)});u||(B(s.split("")),h(o-1))}r.data===null&&r.inputType==="deleteContentBackward"&&(e.preventDefault(),P(""),h(i-1)),e.target.value=""}},X=function(e){return function(r){l(r),e.target.select()}},Y=function(){l(i-1)},_=function(e){var r=y();[e.code,e.key].includes("Backspace")?(e.preventDefault(),P(""),h(i-1)):e.code==="Delete"?(e.preventDefault(),P("")):e.code==="ArrowLeft"?(e.preventDefault(),h(i-1)):e.code==="ArrowRight"||e.key===r[i]?(e.preventDefault(),h(i+1)):(e.code==="Spacebar"||e.code==="Space"||e.code==="ArrowUp"||e.code==="ArrowDown")&&e.preventDefault()},h=function(e){var r,s,u=Math.max(Math.min(o-1,e),0);n.current[u]&&((r=n.current[u])===null||r===void 0||r.focus(),(s=n.current[u])===null||s===void 0||s.select(),l(u))},P=function(e){var r=y();r[i]=e[0],B(r)},B=function(e){var r=e.join("");C(r)},z=function(e){var r;e.preventDefault();var s=y(),u=i,d=e.clipboardData.getData("text/plain").slice(0,o-i).split("");if(!(c&&d.some(function(q){return isNaN(Number(q))}))){for(var R=0;R<o;++R)R>=i&&d.length>0&&(s[R]=(r=d.shift())!==null&&r!==void 0?r:"",u++);h(u),B(s)}};return b.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},G(m)&&m),className:typeof m=="string"?m:void 0,onPaste:O},Array.from({length:o},function(e,r){return r}).map(function(e){var r,s,u;return b.createElement(b.Fragment,{key:e},A({value:(r=y()[e])!==null&&r!==void 0?r:"",placeholder:(u=(s=H())===null||s===void 0?void 0:s[e])!==null&&u!==void 0?u:void 0,ref:function(d){return n.current[e]=d},onChange:K,onFocus:function(d){return X(d)(e)},onBlur:Y,onKeyDown:_,onPaste:z,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(E?{}:{width:"1em",textAlign:"center"},G(N)?N:{}),className:typeof N=="string"?N:void 0,type:w,inputMode:c?"numeric":"text",onInput:M},e),e<o-1&&(typeof x=="function"?x(e):x))}))};function he({auth:a,csrf_token:D}){const f=v.useRef(null),[I,o]=v.useState(""),[C,O]=v.useState(!1),[A,g]=v.useState(!1),[p,j]=v.useState(!1),[w,x]=v.useState(""),[k,m]=v.useState(""),[N,S]=v.useState(!1),E=()=>{setTimeout(()=>{S(!0)},1e3*10),setTimeout(()=>{j(!1),x(""),m("")},1e3*60*5)},F=(l,n=!1)=>{S(!1),g(!0);let y=new FormData;y.append("phone",I),fetch(route("customer-otp-login"),{method:"POST",headers:{"X-CSRF-TOKEN":D},body:y}).then(c=>c.json()).then(c=>{c.status?(f.current.show({severity:"success",summary:"Başarılı",detail:c.message,life:3e3}),n||E(),m(c.customer_id),j(!0)):f.current.show({severity:"error",summary:"Hata",detail:c.message,life:3e3})}).catch(c=>{f.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{g(!1)})},i=()=>{g(!0);let l=new FormData;l.append("customer_id",k),l.append("otp",w),fetch(route("customer-otp-verify"),{method:"POST",headers:{"X-CSRF-TOKEN":D},body:l}).then(n=>n.json()).then(n=>{n.status?W.visit(route("customer.notify",n.hash)):f.current.show({severity:"error",summary:"Hata",detail:n.message,life:3e3})}).catch(n=>{f.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{g(!1)})};return t.jsxs(t.Fragment,{children:[t.jsx(U,{title:"OLEX Films"}),t.jsx(Z,{ref:f}),t.jsxs("div",{className:"bg-gray-50 text-black/50 dark:bg-black dark:text-white/50",children:[t.jsx("img",{id:"background",className:"absolute -left-20 top-0 max-w-[877px]",src:$}),t.jsx("div",{className:"relative min-h-screen flex flex-col items-center justify-center selection:bg-[#006400] selection:text-white",children:t.jsxs("div",{className:"relative w-full max-w-2xl px-6 lg:max-w-7xl",children:[!C&&t.jsxs("header",{className:"grid grid-cols-2 items-center gap-2 py-10 lg:grid-cols-3",children:[t.jsx("div",{className:"flex lg:justify-center lg:col-start-2",children:t.jsx(J,{className:"w-24 h-24"})}),t.jsx("nav",{className:"-mx-3 flex flex-1 justify-end",children:a.user?t.jsx(V,{href:route("dashboard"),className:"rounded-md px-3 py-2 text-black ring-1 ring-transparent transition hover:text-black/70 focus:outline-none focus-visible:ring-[#FF2D20] dark:text-white dark:hover:text-white/80 dark:focus-visible:ring-white",children:"Yönetim Paneli"}):t.jsx(t.Fragment,{children:t.jsx(V,{href:route("login"),className:"rounded-md px-3 py-2 text-black ring-1 ring-transparent transition hover:text-black/70 focus:outline-none focus-visible:ring-[#FF2D20] dark:text-white dark:hover:text-white/80 dark:focus-visible:ring-white",children:"Giriş Yap"})})})]}),!C&&t.jsx("header",{className:"w-full flex items-center justify-center gap-2 py-10",children:t.jsx("div",{className:"flex lg:justify-center lg:col-start-2",children:t.jsx(T,{label:"Müşteri Girişi",icon:"pi pi-user",text:!0,onClick:()=>{O(!0),S(!1),x(""),m(""),j(!1),o("")}})})}),C&&t.jsx("div",{className:"w-full flex items-center justify-center",children:t.jsxs("div",{className:"lg:w-[60%] w-[90%] bg-black rounded p-4 relative",children:[t.jsx("div",{className:"absolute top-[-55px] left-0",children:t.jsx(T,{icon:"pi pi-arrow-left",raised:!0,text:!0,rounded:!0,onClick:()=>O(!1)})}),t.jsx("div",{className:"flex justify-center",children:t.jsx("span",{className:`inline-block text-2xl font-bold
      bg-gradient-to-r from-[var(--primary-600)] via-[var(--primary-400)] to-[var(--primary-600)]
      bg-clip-text text-transparent mb-3`,children:p?"Doğrulama Kodunu Giriniz":" OLEX Films Müşteri Girişi"})}),t.jsx("div",{className:"flex justify-center my-3",children:N&&t.jsx(T,{label:"Tekrar Gönder",icon:"pi pi-refresh",className:"ml-2",text:!0,onClick:l=>F(l,!0)})}),!p&&t.jsx(Q,{className:"w-full mb-3",value:I,placeholder:"Telefon Numarası",onChange:l=>o(l.target.value),mask:"0(599) 999-9999"}),p&&t.jsx("div",{className:"w-full flex justify-center mb-3",children:t.jsx(ee,{value:w,onChange:x,numInputs:6,inputType:"tel",mode:"number",inputStyle:{width:"2em"},renderSeparator:t.jsx("span",{children:" "}),renderInput:l=>t.jsx("input",{...l,autoComplete:"one-time-code",className:"w-12 h-12 text-center text-lg font-medium border rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--primary-600)]"})})}),t.jsxs("div",{className:"flex justify-center",children:[!p&&t.jsx(T,{label:"Giriş Yap",loading:A,size:"small",icon:"pi pi-sign-in",onClick:F}),p&&t.jsx(T,{label:"Doğrula",loading:A,size:"small",icon:"pi pi-check",onClick:i})]})]})}),t.jsxs("footer",{className:"py-16 text-center text-sm text-black dark:text-white/70",children:["OLEX Films © ",new Date().getFullYear()," All Rights Reserved."]})]})})]})]})}export{he as default};
