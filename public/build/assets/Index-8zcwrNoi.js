import{r as s,F as V,j as e,a as J,y as X,c as $}from"./app-ByJu4dNU.js";import{A as q}from"./AuthenticatedLayout-BUm5pRRv.js";import{D as Q}from"./datatable.esm-oEDKHZEm.js";import{C as c}from"./column.esm-zi55Ootl.js";import{I as W}from"./inputtext.esm-B7bQ2xES.js";import{B as m}from"./button.esm-NdAN6Zra.js";import{T as Z}from"./tooltip.esm-Qbmp7RO6.js";import{C as ee,c as F}from"./confirmpopup.esm-D1qz3Tmh.js";import{T as te}from"./toolbar.esm-7VVT_FTd.js";import{D as N}from"./dialog.esm-73asXoq6.js";import{T as ae}from"./toast.esm-B3eWfIZr.js";import{O as ie,C as se}from"./checkbox.esm-CTWFO_OP.js";import le from"./Create-CNOwvWyV.js";import re from"./Update-DGJqjAbo.js";import{A as oe}from"./avatar.esm-oBLFKFif.js";import"./ApplicationLogo-CH63_8P2.js";import"./Dropdown-C8_4X2gx.js";import"./transition-ChVoFVC_.js";import"./tag.esm-C8Bd4_E3.js";import"./ripple.esm-DVOzkR0Z.js";import"./index.esm-B4IXFwYI.js";import"./paginator.esm-BgYLmhtY.js";import"./inputnumber.esm-CQmfIYN9.js";import"./index.esm-Y4mq6vV8.js";import"./dropdown.esm-DYKLOoBX.js";import"./index.esm-Bf7BvPu-.js";import"./index.esm-DJgHaFZm.js";import"./overlayservice.esm-61u2ope0.js";import"./csstransition.esm-YXMguxKw.js";import"./index.esm-BZ__EFKP.js";import"./index.esm-DVkhJMLF.js";import"./index.esm-Cbc1Zeel.js";import"./index.esm-Bx9LTo6Y.js";import"./index.esm-_S9D5RbG.js";import"./index.esm-DK5sDiZt.js";import"./index.esm-Y-i7tGI1.js";import"./formik.esm-CiEZ6rRD.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-NliSS8l_.js";import"./inputswitch.esm-scIHd_d6.js";import"./password.esm-B7nvfAcM.js";import"./index.esm-DTpJTif_.js";function qe({auth:z,dealersAll:B,csrf_token:u}){const o=s.useRef(null),x=s.useRef(null),[v,D]=s.useState({global:{value:null,matchMode:V.CONTAINS}});s.useState(!1);const[b,O]=s.useState(""),[d,h]=s.useState([]),[P,A]=s.useState({}),[g,f]=s.useState(B),S=["id","name","email","phone","avatar","active","updated_at","created_at","actions"],E={id:"ID",name:"Bayi Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rol",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[l,H]=s.useState(localStorage.getItem("selectedColumnsForUsersTable")?JSON.parse(localStorage.getItem("selectedColumnsForUsersTable")):S),[C,y]=s.useState(!1),[T,j]=s.useState(!1);s.useEffect(()=>{localStorage.setItem("selectedColumnsForUsersTable",JSON.stringify(l))},[l]);const k=(t,n=!1)=>{const a=n?t:t.target.value;let r={...v};r.global.value=a,D(r),O(a)},L=()=>e.jsx(e.Fragment,{children:e.jsx(te,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Bayi Ekle",tooltipOptions:{position:"top"},onClick:()=>{y(!0)},className:"mr-2"}),e.jsx(m,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{x.current.toggle(t)},className:"mr-2"}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>h([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(m,{size:"small",onClick:t=>{F({target:t.currentTarget,message:`Seçilen ${d.length} bayileri silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let n=route("super.dealers.multipleDestroy");fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},body:JSON.stringify({dealerIds:d.map(a=>a.id)})}).then(async a=>{let r=await a.json();a.status===404?o.current.show({severity:"error",summary:"Hata",detail:r.message}):a.status===500?o.current.show({severity:"warning",summary:"Hata",detail:r.message}):a.status===200&&(o.current.show({severity:"success",summary:"Başarılı",detail:r.message}),f(g.map(i=>d.map(p=>p.id).includes(i.id)?null:i).filter(Boolean)))}).catch(a=>{console.log(a),o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{h([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${d.length} Bayiyi Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:d.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[d.length," bayi seçildi."]})})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(W,{size:"small",value:b,onChange:k,placeholder:"Bayilerde Arama Yapın"})]}),b!==""&&e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>k("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),M=t=>e.jsx(m,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:$("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),R=L(),_=(t,n,a="dealer")=>{const r=()=>{fetch(route("super.dealers.destroy",n),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}).then(async i=>{let p=await i.json();i.status===404?o.current.show({severity:"error",summary:"Hata",detail:p.message}):i.status===500?o.current.show({severity:"warning",summary:"Hata",detail:p.message}):i.status===200&&(o.current.show({severity:"success",summary:"Başarılı",detail:p.message}),f(g.map(w=>w.id!==n?w:null).filter(Boolean)))}).catch(i=>{console.log(i),o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{h(d.filter(i=>i.id!==n?i:null).filter(Boolean))})};F({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:r,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[I,U]=s.useState(e.jsx(e.Fragment,{})),[Y,K]=s.useState(e.jsx(e.Fragment,{})),G=t=>{A(t),j(!0)};return e.jsxs(q,{user:z.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Bayiler"}),children:[e.jsx(J,{title:"Bayiler"}),e.jsx(Z,{target:".custom-target-icon"}),e.jsx(ee,{}),e.jsx(ae,{ref:o}),e.jsx(ie,{ref:x,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[S.map((t,n)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(se,{inputId:t,checked:l.includes(t),onChange:a=>{let r=[...l];a.checked?r.push(t):r=r.filter(i=>i!==t),H(r)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:E[t]})]},n)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(m,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{x.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(Q,{dragSelection:!0,value:g,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:v,loading:!1,selectionMode:null,selection:d,onSelectionChange:t=>h(t.value),globalFilterFields:["name","email","phone"],header:R,emptyMessage:"Bayi bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(c,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),l.includes("id")&&e.jsx(c,{field:"id",sortable:!0,header:"#"}),l.includes("name")&&e.jsx(c,{field:"name",sortable:!0,header:"Bayi Adı"}),l.includes("email")&&e.jsx(c,{field:"email",sortable:!0,header:"Email"}),l.includes("phone")&&e.jsx(c,{field:"phone",sortable:!0,header:"Telefon No"}),l.includes("avatar")&&e.jsx(c,{field:"image",header:"Avatar",body:t=>e.jsx(oe,{image:t.avatar,shape:"circle",size:"large"})}),l.includes("active")&&e.jsx(c,{field:"active",header:"Durumu",dataType:"boolean",body:M}),l.includes("created_at")&&e.jsx(c,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),l.includes("updated_at")&&e.jsx(c,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),l.includes("actions")&&e.jsx(c,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(m,{icon:"pi pi-eye",size:"small",tooltip:"Bayiyi Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{X.visit(route("super.dealers.show",t.id))}}),e.jsx(m,{icon:"pi pi-pencil",size:"small",tooltip:"Hızlı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{G(t)}}),e.jsx(m,{icon:"pi pi-times",tooltip:"Bayiyi Sil",tooltipOptions:{position:"top"},size:"small",onClick:n=>{_(n,t.id)},severity:"danger"})]})})]}),e.jsx(N,{header:"Yeni Bayi Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>y(!1),maximizable:!0,visible:C,footer:I,children:e.jsx(le,{addModal:C,csrf_token:u,toast:o,onHide:()=>y(!1),setDealers:f,setAddModalFooter:U})}),e.jsx(N,{header:"Bayiyi Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>j(!1),maximizable:!0,visible:T,footer:Y,children:e.jsx(re,{updateModal:T,dealer:P,csrf_token:u,toast:o,onHide:()=>j(!1),setDealers:f,setUpdateModalFooter:K})})]})})})]})}export{qe as default};
