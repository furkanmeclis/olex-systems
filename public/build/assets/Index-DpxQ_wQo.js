import{r as s,F as xe,j as e,S as he,A as fe,c as je}from"./app-Baq8ApHb.js";import{A as ye}from"./AuthenticatedLayout-oRvzpbZ5.js";import{D as ge}from"./datatable.esm-DI-tZLSL.js";import{C as m}from"./column.esm-DyKR1z4l.js";import{I as be}from"./inputtext.esm-DNF8AOou.js";import{B as l}from"./button.esm-DgT6WZGM.js";import{T as ve}from"./tooltip.esm-BXBM_jrJ.js";import{C as we,c as U}from"./confirmpopup.esm-Cjl4H0Pr.js";import{T as ke}from"./toolbar.esm-8WQHbKcv.js";import{D as k}from"./dialog.esm-BzlEms0M.js";import{T as Ne}from"./toast.esm-BuJ7Yd3m.js";import{O as Se}from"./overlaypanel.esm-b9xYc2QB.js";import{C as Te}from"./checkbox.esm-BmTNB8Vy.js";import{A as Ce}from"./avatar.esm-C-4JND52.js";import{u as ze}from"./ripple.esm-Bvf-Pmh3.js";import Fe from"./Create-CUl3jarj.js";import Be from"./Update-CVRU3oAM.js";import{B as Ae}from"./buttongroup.esm-DweaYPcn.js";/* empty css            */import"./ApplicationLogo-Dr5NYUs-.js";import"./Dropdown-B7NH1tGe.js";import"./transition-CVQR47I-.js";import"./tag.esm-CXHE5cdY.js";import"./index.esm-EdZmLmH6.js";import"./paginator.esm-B0xHBJYv.js";import"./inputnumber.esm-maPPc7jk.js";import"./index.esm-B03aOKBu.js";import"./dropdown.esm-CGY_epL-.js";import"./index.esm-jh-zEQr6.js";import"./index.esm-DTMfxF1B.js";import"./overlayservice.esm-CHJbKesI.js";import"./csstransition.esm-Rb2Ld5o-.js";import"./index.esm-ByBSXWYu.js";import"./index.esm-DF7wB7Of.js";import"./index.esm-743QIRfW.js";import"./index.esm-DCJv3887.js";import"./index.esm-DI_E49JB.js";import"./index.esm-BMbE-3LP.js";import"./index.esm-DgQDTGs2.js";import"./formik.esm-CxAZJmph.js";import"./cloneDeep-DJN0yfLA.js";import"./index.esm-BjHMF_mu.js";import"./blockui.esm-DF9E-dL0.js";import"./message.esm-9hL-0n4-.js";import"./inputswitch.esm-9mj-sH2g.js";import"./password.esm-BCZjHBmD.js";import"./index.esm-D75JJD8k.js";function Tt({auth:X,workersAll:$,csrf_token:u,dealer:J}){var L,O,P,_,H,M,R,Y,G,K,I,V;const o=s.useRef(null),g=s.useRef(null),[N,q]=s.useState({global:{value:null,matchMode:xe.CONTAINS}}),[b,f]=s.useState($),[S,Q]=s.useState([]),[De,T]=s.useState(!1),[C,Z]=s.useState(""),[p,j]=s.useState([]),[ee,te]=s.useState({}),ae=()=>{T(!0),fetch(route("central.dealers.listAll"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}).then(t=>t.json()).then(t=>{Q(t.dealers)}).catch(t=>{console.log(t),o.current.show({severity:"error",summary:"Hata",detail:"Bayiler getirilirken bir hata oluştu."})}).finally(()=>{T(!1)})};s.useEffect(()=>{ae()},[]);const z=["id","name","dealer_name","email","phone","avatar","active","updated_at","created_at","actions"],se={id:"ID",name:"Çalışan Adı",avatar:"Avatar Resmi",dealer_name:"Bayi Adı",active:"Üyelik Durumu",phone:"Telefon",role:"Rol",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[c,ie]=ze(z,"super-workers-table-columns"),[F,v]=s.useState(!1),[B,w]=s.useState(!1),[le,x]=s.useState(!1),[a,y]=s.useState({}),A=(t,d=!1)=>{const i=d?t:t.target.value;let n={...N};n.global.value=i,q(n),Z(i)},re=()=>e.jsx(e.Fragment,{children:e.jsx(ke,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Çalışan Ekle",tooltipOptions:{position:"top"},onClick:()=>{v(!0)},className:"mr-2"}),e.jsx(l,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{g.current.toggle(t)},className:"mr-2"}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>j([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(l,{size:"small",onClick:t=>{U({target:t.currentTarget,message:`Seçilen ${p.length} çalışanı silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let d=route("central.workers.multipleDestroy");fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},body:JSON.stringify({workerIds:p.map(i=>i.id),dealerId:J.id})}).then(async i=>{let n=await i.json();i.status===404?o.current.show({severity:"error",summary:"Hata",detail:n.message}):i.status===500?o.current.show({severity:"warning",summary:"Hata",detail:n.message}):i.status===200&&(o.current.show({severity:"success",summary:"Başarılı",detail:n.message}),f(b.map(r=>p.map(h=>h.id).includes(r.id)?null:r).filter(Boolean)))}).catch(i=>{console.log(i),o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${p.length} çalışanı Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col items-center justify-center",children:p.length>0&&e.jsxs("span",{children:[p.length," çalışan seçildi."]})})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(be,{size:"small",value:C,onChange:A,placeholder:"Çalışanlarda Arama Yapın"})]}),C!==""&&e.jsx(l,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>A("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),ne=t=>e.jsx(l,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:je("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),oe=re(),D=(t,d,i=()=>{})=>{const n=()=>{fetch(route("central.workers.destroy",d),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}).then(async r=>{let h=await r.json();r.status===404?o.current.show({severity:"error",summary:"Hata",detail:h.message}):r.status===500?o.current.show({severity:"warning",summary:"Hata",detail:h.message}):r.status===200&&(i(),o.current.show({severity:"success",summary:"Başarılı",detail:h.message}),f(b.map(W=>W.id!==d?W:null).filter(Boolean)))}).catch(r=>{console.log(r),o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j(p.filter(r=>r.id!==d?r:null).filter(Boolean))})};U({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:n,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[ce,de]=s.useState(e.jsx(e.Fragment,{})),[me,pe]=s.useState(e.jsx(e.Fragment,{})),E=t=>{te(t),w(!0)},ue=t=>{y(t),x(!0)};return e.jsxs(ye,{user:X.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Çalışanlar"}),children:[e.jsx(he,{title:"Çalışanlar"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(e.Fragment,{children:[e.jsx(ve,{target:".custom-target-icon"}),e.jsx(we,{}),e.jsx(Ne,{ref:o}),e.jsx(Se,{ref:g,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[z.map((t,d)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(Te,{inputId:t,checked:c.includes(t),onChange:i=>{let n=[...c];i.checked?n.push(t):n=n.filter(r=>r!==t),ie(n)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:se[t]})]},d)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(l,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{g.current.hide()}})})]})]})}),e.jsxs(ge,{dragSelection:!0,value:b,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:N,loading:!1,selectionMode:null,selection:p,onSelectionChange:t=>j(t.value),globalFilterFields:["name","email","phone"],header:oe,emptyMessage:"Çalışan bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(m,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),c.includes("id")&&e.jsx(m,{field:"id",sortable:!0,header:"#"}),c.includes("name")&&e.jsx(m,{field:"name",sortable:!0,header:"Çalışan Adı"}),c.includes("dealer_name")&&e.jsx(m,{field:"dealer.company.company_name",sortable:!0,header:"Bayi Adı",body:t=>e.jsx(l,{label:t.dealer.name,link:!0,size:"small",onClick:()=>{fe.visit(route("central.dealers.show",t.dealer.id))}})}),c.includes("email")&&e.jsx(m,{field:"email",sortable:!0,header:"Email"}),c.includes("phone")&&e.jsx(m,{field:"phone",sortable:!0,header:"Telefon No"}),c.includes("avatar")&&e.jsx(m,{field:"image",header:"Avatar",body:t=>e.jsx(Ce,{image:t.avatar,shape:"circle",size:"large"})}),c.includes("active")&&e.jsx(m,{field:"active",header:"Durumu",dataType:"boolean",body:ne}),c.includes("created_at")&&e.jsx(m,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),c.includes("updated_at")&&e.jsx(m,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),c.includes("actions")&&e.jsx(m,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(l,{icon:"pi pi-eye",size:"small",tooltip:"Çalışanı Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{ue(t)}}),e.jsx(l,{icon:"pi pi-pencil",size:"small",tooltip:"Çalışanı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{E(t)}}),e.jsx(l,{icon:"pi pi-times",tooltip:"Çalışanı Sil",tooltipOptions:{position:"top"},size:"small",onClick:d=>{D(d,t.id)},severity:"danger"})]})})]}),e.jsx(k,{header:"Yeni Çalışan Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>v(!1),maximizable:!0,visible:F,footer:ce,children:e.jsx(Fe,{dealerId:1,dealers:S,onHide:()=>v(!1),csrf_token:u,toast:o,setWorkers:f,addModal:F,setAddModalFooter:de})}),e.jsx(k,{header:"Çalışanı Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>w(!1),maximizable:!0,visible:B,footer:me,children:e.jsx(Be,{updateModal:B,dealers:S,worker:ee,csrf_token:u,toast:o,onHide:()=>w(!1),setWorkers:f,setUpdateModalFooter:pe})}),e.jsx(k,{header:"Çalışanı Görüntüle",style:{width:"40vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>x(!1),maximizable:!0,visible:le,children:a&&e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-lg text-white font-semibold border-b pb-2",children:"Çalışan Bilgileri"})}),e.jsx("div",{className:"flex flex-col gap-y-2 mb-3",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Çalışan Adı:"}),e.jsx("span",{children:a.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:a.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Telefon:"}),e.jsx("span",{children:a.phone})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Üyelik Durumu:"}),e.jsx("span",{children:a.active?"Aktif":"DeAktif"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Eklenme Tarihi:"}),e.jsx("span",{children:new Date(a.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Güncellenme Tarihi:"}),e.jsx("span",{children:new Date(a.updated_at).toLocaleString()})]})]})}),e.jsx("hr",{}),e.jsx("div",{className:"flex justify-between items-center mt-1",children:e.jsx("h3",{className:"text-lg text-white font-semibold border-b pb-2",children:"Bayi Bilgileri"})}),e.jsx("div",{className:"flex flex-col gap-y-2 mb-3",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Adı:"}),e.jsx("span",{children:(O=(L=a.dealer)==null?void 0:L.company)==null?void 0:O.company_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Email:"}),e.jsx("span",{children:(_=(P=a.dealer)==null?void 0:P.company)==null?void 0:_.company_email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Telefon:"}),e.jsx("span",{children:(M=(H=a.dealer)==null?void 0:H.company)==null?void 0:M.company_phone})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Adı:"}),e.jsx("span",{children:(R=a.dealer)==null?void 0:R.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Email:"}),e.jsx("span",{children:(Y=a.dealer)==null?void 0:Y.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Telefon:"}),e.jsx("span",{children:(G=a.dealer)==null?void 0:G.phone})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Üyelik Durumu:"}),e.jsx("span",{children:(K=a.dealer)!=null&&K.active?"Aktif":"DeAktif"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Eklenme Tarihi:"}),e.jsx("span",{children:new Date((I=a==null?void 0:a.dealer)==null?void 0:I.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Güncellenme Tarihi:"}),e.jsx("span",{children:new Date((V=a==null?void 0:a.dealer)==null?void 0:V.updated_at).toLocaleString()})]})]})}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs(Ae,{children:[e.jsx(l,{label:"Kapat",icon:"pi pi-times",severity:"info",size:"small",onClick:()=>{x(!1),y({})}}),e.jsx(l,{label:"Hizmet Kayıtları",icon:"pi pi-file",size:"small",severity:"help",onClick:()=>{}}),e.jsx(l,{label:"Düzenle",icon:"pi pi-pencil",size:"small",severity:"warning",onClick:t=>{x(!1),y({}),E(a)}}),e.jsx(l,{label:"Sil",icon:"pi pi-trash",size:"small",severity:"danger",onClick:t=>{D(t,a.id,()=>{x(!1),y({})})}})]})})]})})})]})})})})]})}export{Tt as default};
