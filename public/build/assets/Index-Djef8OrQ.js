import{r,F as V,j as e,a as W,c as X}from"./app-CVJZ1rcI.js";import{A as $}from"./AuthenticatedLayout-CmarQ65Q.js";import{D as J}from"./datatable.esm-CxOv3DFb.js";import{C as n}from"./column.esm-D98CmKFf.js";import{I as q}from"./inputtext.esm-DXx6Pg6G.js";import{B as m}from"./button.esm-BIF7ZDR2.js";import{T as Q}from"./tooltip.esm-Cw7wRsUZ.js";import{C as Z,c as C}from"./confirmpopup.esm-JCzDjJIv.js";import{T as ee}from"./toolbar.esm-tMpu_sjq.js";import{D as N}from"./dialog.esm-Bf1kqaaU.js";import{T as te}from"./toast.esm-YLMMF5NU.js";import{O as ae,C as ie}from"./checkbox.esm-DlswQ5en.js";import se from"./Create-D9siNRxN.js";import re from"./Update-CNQK-gHr.js";import{A as le}from"./avatar.esm-CMszEL8i.js";import{u as oe}from"./ripple.esm-CUuqICLC.js";import"./ApplicationLogo-mSCRKlpW.js";import"./Dropdown-vLFBetRL.js";import"./transition-Bpse3GWM.js";import"./tag.esm-R7lHiOpe.js";import"./index.esm-2g_KHasO.js";import"./paginator.esm-DoER6ROs.js";import"./inputnumber.esm-Bh6skRq8.js";import"./index.esm-CHclCTdr.js";import"./dropdown.esm-B4P2N7CK.js";import"./index.esm-dx_Y6iUq.js";import"./index.esm-B-7qKS2t.js";import"./overlayservice.esm-CGLbCpdx.js";import"./csstransition.esm-Cypi1K43.js";import"./index.esm-G63tnVm_.js";import"./index.esm-ESICfo25.js";import"./index.esm-DDPajCZ5.js";import"./index.esm-BTVc7HnG.js";import"./index.esm-DBtDcsoH.js";import"./index.esm-DNURKevS.js";import"./index.esm-BSKfnI9x.js";import"./formik.esm-CmjCSlnE.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-CSVmwxZT.js";import"./inputswitch.esm-B0L_hKym.js";import"./password.esm-C48G1zXw.js";import"./index.esm-DqONC-tH.js";function Je({auth:F,usersAll:M,csrf_token:p,roles:v}){const l=r.useRef(null),x=r.useRef(null),[b,P]=r.useState({global:{value:null,matchMode:V.CONTAINS}});r.useState(!1);const[k,O]=r.useState(""),[c,u]=r.useState([]),[L,A]=r.useState({}),[g,h]=r.useState(M),z=["id","name","email","phone","role","avatar","active","updated_at","created_at","actions"],D={id:"ID",name:"Üye Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rolü",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[s,H]=oe(z,"super-central-users-table-columns"),[S,y]=r.useState(!1),[w,j]=r.useState(!1),T=(t,o=!1)=>{const i=o?t:t.target.value;let a={...b};a.global.value=i,P(a),O(i)},R=()=>e.jsx(e.Fragment,{children:e.jsx(ee,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Merkez Üyesi Ekle",tooltipOptions:{position:"top"},onClick:()=>{y(!0)},className:"mr-2"}),e.jsx(m,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{x.current.toggle(t)},className:"mr-2"}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>u([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(m,{size:"small",onClick:t=>{C({target:t.currentTarget,message:`Seçilen ${c.length} Merkez Üyelerini silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let o=route("super.central.multipleDestroy");fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({workerIds:c.map(i=>i.id)})}).then(async i=>{let a=await i.json();i.status===404?l.current.show({severity:"error",summary:"Hata",detail:a.message}):i.status===500?l.current.show({severity:"warning",summary:"Hata",detail:a.message}):i.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:a.message}),h(g.map(d=>c.map(f=>f.id).includes(d.id)?null:d).filter(Boolean)))}).catch(i=>{console.log(i),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${c.length} Merkez Üyesini Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:c.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[c.length," merkez üyesi seçildi."]})})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(q,{size:"small",value:k,onChange:T,placeholder:"Merkez Üyelerinde Arama Yapın"})]}),k!==""&&e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>T("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),E=t=>e.jsx(m,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:X("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),B=R(),_=(t,o)=>{const i=()=>{fetch(route("super.central.destroy",o),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async a=>{let d=await a.json();a.status===404?l.current.show({severity:"error",summary:"Hata",detail:d.message}):a.status===500?l.current.show({severity:"warning",summary:"Hata",detail:d.message}):a.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:d.message}),h(g.map(f=>f.id!==o?f:null).filter(Boolean)))}).catch(a=>{console.log(a),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u(c.filter(a=>a.id!==o?a:null).filter(Boolean))})};C({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:i,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[U,Y]=r.useState(e.jsx(e.Fragment,{})),[K,I]=r.useState(e.jsx(e.Fragment,{})),G=t=>{A(t),j(!0)};return e.jsxs($,{user:F.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Merkez Üyeleri"}),children:[e.jsx(W,{title:"Merkez Üyeleri"}),e.jsx(Q,{target:".custom-target-icon"}),e.jsx(Z,{}),e.jsx(te,{ref:l}),e.jsx(ae,{ref:x,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[z.map((t,o)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(ie,{inputId:t,checked:s.includes(t),onChange:i=>{let a=[...s];i.checked?a.push(t):a=a.filter(d=>d!==t),H(a)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:D[t]})]},o)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(m,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{x.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(J,{dragSelection:!0,value:g,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:b,loading:!1,selectionMode:null,selection:c,onSelectionChange:t=>u(t.value),globalFilterFields:["name","email","phone"],header:B,emptyMessage:"Merkez Üyesi bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(n,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),s.includes("id")&&e.jsx(n,{field:"id",sortable:!0,header:"#"}),s.includes("name")&&e.jsx(n,{field:"name",sortable:!0,header:"Üye Adı"}),s.includes("email")&&e.jsx(n,{field:"email",sortable:!0,header:"Email"}),s.includes("phone")&&e.jsx(n,{field:"phone",sortable:!0,header:"Telefon No"}),s.includes("role")&&e.jsx(n,{field:"role_label",sortable:!0,header:"Rolü"}),s.includes("avatar")&&e.jsx(n,{field:"image",header:"Avatar",body:t=>e.jsx(le,{image:t.avatar,shape:"circle",size:"large"})}),s.includes("active")&&e.jsx(n,{field:"active",header:"Durumu",dataType:"boolean",body:E}),s.includes("created_at")&&e.jsx(n,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),s.includes("updated_at")&&e.jsx(n,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),s.includes("actions")&&e.jsx(n,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(m,{icon:"pi pi-pencil",size:"small",tooltip:"Hızlı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{G(t)}}),e.jsx(m,{icon:"pi pi-times",tooltip:"Merkez Üyesini Sil",tooltipOptions:{position:"top"},size:"small",onClick:o=>{_(o,t.id)},severity:"danger"})]})})]}),e.jsx(N,{header:"Yeni Merkez Üyesi Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>y(!1),maximizable:!0,visible:S,footer:U,children:e.jsx(se,{addModal:S,csrf_token:p,toast:l,onHide:()=>y(!1),roles:v,setUsers:h,setAddModalFooter:Y})}),e.jsx(N,{header:"Merkez Üyesini Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>j(!1),maximizable:!0,visible:w,footer:K,children:e.jsx(re,{updateModal:w,user:L,csrf_token:p,toast:l,roles:v,onHide:()=>j(!1),setUsers:h,setUpdateModalFooter:I})})]})})})]})}export{Je as default};
