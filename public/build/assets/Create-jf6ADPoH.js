import{r as i,j as e,a as N}from"./app-CNmB9voF.js";import{D as F}from"./dialog.esm-C9W_rPd8.js";import{I as C}from"./inputtext.esm-DOGDmqqq.js";import{B as d}from"./button.esm-Cei5GouS.js";import{C as D}from"./checkbox.esm-ClkqPuo5.js";import{F as S}from"./fileupload.esm-wst6Dfr7.js";import"./ripple.esm-C6bXUlua.js";import"./csstransition.esm-DVzi674-.js";import"./index.esm-YMtMTvE1.js";import"./tooltip.esm-CMhdymmX.js";import"./index.esm-D_CX7I1j.js";import"./index.esm-7vfuE4lV.js";import"./index.esm-z3o8FVsU.js";import"./index.esm-P7rvMCdl.js";import"./index.esm-DlDFsK4R.js";import"./TransitionGroup-BloAMQDg.js";function G({visible:x,setVisible:n,toast:p,setBrands:g}){const[h,u]=i.useState(!1),[r,o]=i.useState({name:"",is_active:!0,logo:null}),[f,c]=i.useState(null),m=i.useRef(null),v=async t=>{var a,l;t.preventDefault();try{u(!0);const s=new FormData;s.append("name",r.name),s.append("is_active",r.is_active?"1":"0"),r.logo&&s.append("logo",r.logo);const k=await N.post(route("super.car.brands.store"),s,{headers:{"Content-Type":"multipart/form-data"}});g(w=>[...w,k.data.brand]),p.current.show({severity:"success",summary:"Başarılı",detail:"Marka başarıyla eklendi",life:3e3}),n(!1),o({name:"",is_active:!0,logo:null}),c(null)}catch(s){p.current.show({severity:"error",summary:"Hata",detail:((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Bir hata oluştu",life:3e3})}finally{u(!1)}},j=t=>{const a=t.files[0];if(a){o(s=>({...s,logo:a}));const l=new FileReader;l.onloadend=()=>{c(l.result)},l.readAsDataURL(a)}},b=()=>{o(t=>({...t,logo:null})),c(null),m.current&&m.current.clear()},y=e.jsxs("div",{children:[e.jsx(d,{label:"İptal",icon:"pi pi-times",onClick:()=>n(!1),className:"p-button-text"}),e.jsx(d,{label:"Kaydet",icon:"pi pi-check",onClick:v,loading:h})]});return e.jsx(F,{header:"Yeni Marka Ekle",visible:x,style:{width:"50vw"},onHide:()=>n(!1),footer:y,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"logo",children:"Logo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[f?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:f,alt:"Preview",className:"w-24 h-24 object-contain border rounded"}),e.jsx(d,{icon:"pi pi-times",className:"p-button-rounded p-button-danger p-button-sm absolute -top-2 -right-2",onClick:b})]}):e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"pi pi-image text-gray-500 text-xl"})}),e.jsx(S,{ref:m,mode:"basic",accept:"image/*",maxFileSize:2e6,customUpload:!0,uploadHandler:j,auto:!0,chooseLabel:"Logo Seç",className:"flex-1"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"name",children:"Marka Adı"}),e.jsx(C,{id:"name",value:r.name,onChange:t=>o(a=>({...a,name:t.target.value}))})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(D,{inputId:"is_active",checked:r.is_active,onChange:t=>o(a=>({...a,is_active:t.checked}))}),e.jsx("label",{htmlFor:"is_active",children:"Aktif"})]})]})})}export{G as default};
