import{r as s,j as e,A as L,S as A,a as v}from"./app-NbOgzo0a.js";import{A as z}from"./AuthenticatedLayout-eqiXu1kV.js";import{D as R}from"./datatable.esm-DAXCPIUP.js";import{C as p}from"./column.esm-Crg2TVml.js";import{B as o}from"./button.esm-C_21beZQ.js";import{C as E,c as O}from"./confirmpopup.esm-B4ZRTNo8.js";import{T as U}from"./toolbar.esm-C8ehNc9M.js";import{T as _}from"./toast.esm-B-h3ei72.js";import F from"./Create-jEi_5ZkY.js";import H from"./Update-Dj49OcpL.js";import"./Dropdown-BrOQ2evR.js";import"./tag.esm-DyNsyPhU.js";import"./ripple.esm-iszc8HuC.js";import"./motion-D7F-e4S9.js";import"./index.esm-DojWKbcB.js";import"./paginator.esm-C4gZutTC.js";import"./inputnumber.esm-D8wKIGNi.js";import"./inputtext.esm-DUPnnwIp.js";import"./tooltip.esm-CaSq0yzV.js";import"./index.esm-CWrvyTEZ.js";import"./dropdown.esm-BqatRzVZ.js";import"./index.esm-DX4RB7kF.js";import"./index.esm-Bt0BBOx6.js";import"./overlayservice.esm-C0iVZ48H.js";import"./csstransition.esm-CexleeVb.js";import"./index.esm-B7ssj7dR.js";import"./index.esm-DgBw5XKU.js";import"./index.esm-BNpuDrTa.js";import"./index.esm-8vfgULLR.js";import"./index.esm-knzJo3E8.js";import"./index.esm-DMwfTKGR.js";import"./index.esm-BtoT_sCL.js";import"./TransitionGroup-oiU1ns6w.js";import"./dialog.esm-BXQ35al4.js";import"./checkbox.esm-CmgKJs6p.js";function we({auth:b,models:k,brand:a}){const r=s.useRef(null),[x,w]=s.useState(null),[l,h]=s.useState([]),[M,g]=s.useState(!1),[P,y]=s.useState(!1),[f,c]=s.useState(!1),[S,u]=s.useState(k),j=async t=>{var n,d;if(!l.length){r.current.show({severity:"warn",summary:"Uyarı",detail:"Lütfen en az bir model seçin",life:3e3});return}try{c(!0),await v.post(route("super.car.brands.models.bulk-status",a.id),{ids:l.map(i=>i.id),status:t}),u(i=>i.map(m=>l.find(D=>D.id===m.id)?{...m,is_active:t}:m)),h([]),r.current.show({severity:"success",summary:"Başarılı",detail:"Modeller başarıyla güncellendi",life:3e3})}catch(i){r.current.show({severity:"error",summary:"Hata",detail:((d=(n=i.response)==null?void 0:n.data)==null?void 0:d.message)||"Bir hata oluştu",life:3e3})}finally{c(!1)}},C=t=>{O({target:event.currentTarget,message:"Bu modeli silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",accept:async()=>{var n,d;try{c(!0),await v.delete(route("super.car.brands.models.destroy",{brand:a.id,model:t.id})),u(i=>i.filter(m=>m.id!==t.id)),r.current.show({severity:"success",summary:"Başarılı",detail:"Model başarıyla silindi",life:3e3})}catch(i){r.current.show({severity:"error",summary:"Hata",detail:((d=(n=i.response)==null?void 0:n.data)==null?void 0:d.error)||"Bir hata oluştu",life:3e3})}finally{c(!1)}}})},T=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(o,{size:"small",tooltipOptions:{position:"top"},tooltip:"Seçilenleri Aktif Et",icon:"pi pi-check",onClick:()=>j(!0),loading:f}),e.jsx(o,{size:"small",tooltipOptions:{position:"top"},tooltip:"Seçilenleri Deaktif Et",icon:"pi pi-times",severity:"danger",onClick:()=>j(!1),loading:f})]})}),N=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx(o,{size:"small",tooltipOptions:{position:"top"},tooltip:"Yeni Model",icon:"pi pi-plus",severity:"success",onClick:()=>g(!0)})}),B=t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{icon:"pi pi-pencil",rounded:!0,outlined:!0,severity:"success",onClick:()=>{w(t),y(!0)}}),e.jsx(o,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>C(t)})]});return e.jsxs(z,{user:b.user,header:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:[a.name," Modelleri"]}),e.jsx(o,{link:!0,className:"!p-0 !min-w-0 underline font-normal",onClick:()=>L.visit(route("super.car.brands.index")),children:"(Markalara Dön)"})]}),children:[e.jsx(A,{title:`${a.name} Modelleri`}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx(_,{ref:r}),e.jsx(E,{}),e.jsx(U,{className:"mb-4",left:T,right:N}),e.jsxs(R,{value:S,dataKey:"id",loading:f,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",filterDisplay:"row",selection:l,removableSort:!0,onSelectionChange:t=>h(t.value),filters:{name:{value:"",matchMode:"contains"}},emptyMessage:"Model bulunamadı.",children:[e.jsx(p,{selectionMode:"multiple",exportable:!1}),e.jsx(p,{field:"id",header:"ID",sortable:!0}),e.jsx(p,{field:"name",filter:!0,filterPlaceholder:"Modele Göre",header:"Model Adı",sortable:!0,style:{width:"45%"}}),e.jsx(p,{field:"is_active",header:"Durum",sortable:!0,style:{width:"10%"},body:t=>t.is_active?"Aktif":"Pasif"}),e.jsx(p,{body:B,exportable:!1,style:{width:"20%"}})]}),e.jsx(F,{visible:M,setVisible:g,toast:r,setModels:u,brand:a}),x&&e.jsx(H,{visible:P,setVisible:y,toast:r,model:x,setModels:u,brand:a})]})})})]})}export{we as default};
