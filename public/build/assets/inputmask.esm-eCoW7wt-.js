import{r as o,P as ie,D as x,O as oe,c as $}from"./app-CbKgTnfw.js";import{C as se,e as fe,f as _}from"./ripple.esm-Bz0HPTmf.js";import{I as ve}from"./inputtext.esm-BCUyyFJJ.js";function N(){return N=Object.assign?Object.assign.bind():function(P){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var r in p)({}).hasOwnProperty.call(p,r)&&(P[r]=p[r])}return P},N.apply(null,arguments)}var de={root:function(m){var p=m.props,r=m.context;return $("p-inputmask",{"p-filled":p.filled,"p-invalid":p.invalid,"p-variant-filled":p.variant?p.variant==="filled":r&&r.inputStyle==="filled"})}},A=se.extend({defaultProps:{__TYPE:"InputMask",autoClear:!0,autoFocus:!1,className:null,disabled:!1,id:null,mask:null,maxLength:null,invalid:!1,variant:null,name:null,onBlur:null,onChange:null,onComplete:null,onFocus:null,placeholder:null,readOnly:!1,required:!1,size:null,slotChar:"_",style:null,tabIndex:null,tooltip:null,tooltipOptions:null,type:"text",unmask:!1,value:null,children:void 0},css:{classes:de}}),pe=o.memo(o.forwardRef(function(P,m){var p=o.useContext(ie),r=A.getProps(P,p),a=o.useRef(null),C=o.useRef(null),w=o.useRef(0),s=o.useRef([]),f=o.useRef([]),v=o.useRef(0),B=o.useRef(null),j=o.useRef(!1),E=o.useRef(null),G=o.useRef(null),R=o.useRef(null),I=o.useRef(null),K=o.useRef(null),T=o.useRef(!1),L={props:r},J=A.setMetaData(L),Q=J.cx,d=function(e,t){var n,u,l,i=a.current;return!i||!i.offsetParent||i!==document.activeElement?null:(typeof e=="number"?(u=e,l=typeof t=="number"?t:u,i.setSelectionRange?i.setSelectionRange(u,l):i.createTextRange&&(n=i.createTextRange(),n.collapse(!0),n.moveEnd("character",l),n.moveStart("character",u),n.select())):i.setSelectionRange?(u=i.selectionStart,l=i.selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),u=0-n.duplicate().moveStart("character",-1e5),l=u+n.text.length),{begin:u,end:l})},D=function(){for(var e=C.current;e<=w.current;e++)if(s.current[e]&&f.current[e]===g(e))return!1;return!0},g=o.useCallback(function(c){return c<r.slotChar.length?r.slotChar.charAt(c):r.slotChar.charAt(0)},[r.slotChar]),F=function(){return r.unmask?M():a.current&&a.current.value},k=function(e){for(;++e<v.current&&!s.current[e];);return e},W=function(e){for(;--e>=0&&!s.current[e];);return e},z=function(e,t){var n,u;if(!(e<0)){for(n=e,u=k(t);n<v.current;n++)if(s.current[n]){if(u<v.current&&s.current[n].test(f.current[u]))f.current[n]=f.current[u],f.current[u]=g(u);else break;u=k(u)}y(),d(Math.max(C.current,e))}},X=function(e){var t,n,u,l;for(t=e,n=g(e);t<v.current;t++)if(s.current[t])if(u=k(t),l=f.current[t],f.current[t]=n,u<v.current&&s.current[u].test(l))n=l;else break},ee=function(e){var t=a.current.value,n=d();if(n){if(B.current.length&&B.current.length>t.length){for(h(!0);n.begin>0&&!s.current[n.begin-1];)n.begin--;if(n.begin===0)for(;n.begin<C.current&&!s.current[n.begin];)n.begin++;d(n.begin,n.begin)}else{for(h(!0);n.begin<v.current&&!s.current[n.begin];)n.begin++;d(n.begin,n.begin)}r.onComplete&&D()&&r.onComplete({originalEvent:e,value:F()}),b(e)}},q=function(e){if(j.current=!1,h(),b(e),S(),r.onBlur&&r.onBlur(e),a.current.value!==E.current){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),a.current.dispatchEvent(t)}},re=function(e){if(!r.readOnly){var t=e.which||e.keyCode,n,u,l;if(B.current=a.current.value,t===8||t===46||x.isIOS()&&t===127){if(n=d(),!n)return;u=n.begin,l=n.end,l-u===0&&(u=t!==46?W(u):l=k(u-1),l=t===46?k(l):l),O(u,l),z(u,l-1),b(e),e.preventDefault()}else t===13?(q(e),b(e)):t===27&&(a.current.value=E.current,d(0,h()),b(e),e.preventDefault())}},ne=function(e){if(!r.readOnly){var t=d();if(t){var n=e.which||e.keyCode,u,l,i,Y;if(!(e.ctrlKey||e.altKey||e.metaKey||n<32)){if(n&&n!==13){if(t.end-t.begin!==0&&(O(t.begin,t.end),z(t.begin,t.end-1)),u=k(t.begin-1),u<v.current&&(l=String.fromCharCode(n),s.current[u].test(l))){if(X(u),f.current[u]=l,y(),i=k(u),x.isAndroid()){var ce=function(){d(i)};setTimeout(ce,0)}else d(i);t.begin<=w.current&&(Y=D())}e.preventDefault()}b(e),r.onComplete&&Y&&r.onComplete({originalEvent:e,value:F()})}}}},O=function(e,t){var n;for(n=e;n<t&&n<v.current;n++)s.current[n]&&(f.current[n]=g(n))},y=function(){a.current&&(a.current.value=f.current.join(""))},h=function(e){G.current=!0;var t=a.current&&a.current.value,n=-1,u,l,i;for(u=0,i=0;u<v.current;u++)if(s.current[u]){for(f.current[u]=g(u);i++<t.length;)if(l=t.charAt(i-1),s.current[u].test(l)){f.current[u]=l,n=u;break}if(i>t.length){O(u+1,v.current);break}}else f.current[u]===t.charAt(i)&&i++,u<R.current&&(n=u);return e?y():n+1<R.current?r.autoClear||f.current.join("")===I.current?(a.current&&a.current.value&&(a.current.value=""),O(0,v.current)):y():(y(),a.current&&(a.current.value=a.current.value.substring(0,n+1))),R.current?u:C.current},te=function(e){if(!r.readOnly){j.current=!0,clearTimeout(K.current);var t;a.current?E.current=a.current.value:E.current="",t=h()||0,K.current=setTimeout(function(){a.current===document.activeElement&&(y(),t===r.mask.replace("?","").length?d(0,t):d(t),S())},100),r.onFocus&&r.onFocus(e)}},ue=function(e){T.current?ee(e):U(e)},U=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.readOnly){if(!t){var n=h(!0);d(n)}b(e),r.onComplete&&D()&&r.onComplete({originalEvent:e,value:F()})}},M=o.useCallback(function(){for(var c=[],e=0;e<f.current.length;e++){var t=f.current[e];s.current[e]&&t!==g(e)&&c.push(t)}return c.join("")},[g]),b=function(e){if(r.onChange){var t=r.unmask?M():e&&e.target.value;r.onChange({originalEvent:e,value:I.current!==t?t:"",stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:r.name,id:r.id,value:I.current!==t?t:""}})}},S=function(){a.current&&a.current.value&&a.current.value.length>0?x.addClass(a.current,"p-filled"):x.removeClass(a.current,"p-filled")},V=function(e){var t;return a.current&&(r.value==null?a.current.value="":(a.current.value=r.value,t=h(e),setTimeout(function(){if(a.current)return y(),h(e)},10)),E.current=a.current.value),S(),t},H=o.useCallback(function(){return r.unmask?r.value!==M():I.current!==a.current.value&&a.current.value!==r.value},[r.unmask,r.value,M]),Z=function(){if(r.mask){s.current=[],R.current=r.mask.length,v.current=r.mask.length,C.current=null;var e={9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"};T.current=x.isChrome()&&x.isAndroid();for(var t=r.mask.split(""),n=0;n<t.length;n++){var u=t[n];u==="?"?(v.current--,R.current=n):e[u]?(s.current.push(new RegExp(e[u])),C.current===null&&(C.current=s.current.length-1),n<R.current&&(w.current=s.current.length-1)):s.current.push(null)}f.current=[];for(var l=0;l<t.length;l++){var i=t[l];i!=="?"&&(e[i]?f.current.push(g(l)):f.current.push(i))}I.current=f.current.join("")}};o.useImperativeHandle(m,function(){return{props:r,focus:function(){return x.focus(a.current)},getElement:function(){return a.current}}}),o.useEffect(function(){oe.combinedRefs(a,m)},[a,m]),fe(function(){Z(),V()}),_(function(){Z(),d(V(!0)),r.unmask&&b()},[r.mask]),_(function(){H()&&V()},[H]);var ae=A.getOtherProps(r),le=$(r.className,Q("root",{context:p}));return o.createElement(ve,N({ref:a,autoFocus:r.autoFocus,id:r.id,type:r.type,name:r.name,style:r.style,className:le,value:r.value},ae,{placeholder:r.placeholder,size:r.size,maxLength:r.maxLength,tabIndex:r.tabIndex,disabled:r.disabled,invalid:r.invalid,readOnly:r.readOnly,onFocus:te,onBlur:q,onKeyDown:re,onKeyPress:ne,onInput:ue,onPaste:function(e){return U(e,!0)},required:r.required,tooltip:r.tooltip,tooltipOptions:r.tooltipOptions,pt:r.pt,unstyled:r.unstyled,__parentMetadata:{parent:L}}))}));pe.displayName="InputMask";export{pe as I};
