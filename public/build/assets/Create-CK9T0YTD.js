import{r as d,j as e}from"./app-WLP3cXft.js";import{I as n}from"./inputtext.esm-CrkmcUWy.js";import{B as M}from"./blockui.esm-utmi7dYN.js";import{u as T}from"./formik.esm-DOI0pjwr.js";import{c as B,a as c}from"./index.esm-CzrRTExq.js";import{M as k}from"./message.esm-C4zFCvPj.js";import{S as j,B as w}from"./badge.esm-Bvp8qR_e.js";import{B as v}from"./button.esm-C52saQkX.js";import{D as O}from"./dialog.esm-B7pz06kh.js";import{T as z}from"./toast.esm-BU9ZsN_w.js";import"./ripple.esm-DWOq6mFk.js";import"./tooltip.esm-CtJT3BAN.js";import"./cloneDeep-DJN0yfLA.js";import"./index.esm-CyNtLCQQ.js";import"./index.esm-B1eYaDBH.js";import"./index.esm-mWrnzJuU.js";import"./index.esm-CtPvhxZw.js";import"./csstransition.esm-Biv3ph5I.js";import"./index.esm-CDUpk2l7.js";function se({csrf_token:b,setUsers:N,visible:g,setVisible:o,workerHome:y=!1,ü:A}){const p=d.useRef(null),[u,h]=d.useState(!1),m=(s,i,l)=>{p.current.show({severity:s,summary:i,detail:l})},{values:a,handleSubmit:F,submitForm:C,submitCount:S,handleChange:r,dirty:E,setFieldValue:x,errors:f,setErrors:D}=T({initialValues:{name:"",email:"",phone:"",image:"",gender:"",player_id:"",address:"",contact:[],type:"individual",vatName:"",vatNumber:"",vatOffice:""},validationSchema:B().shape({name:c().required("Müşteri Adı Zorunludur."),email:c().email("Geçerli Bir E-Posta Adresi Giriniz.").required("E-Posta Adresi Zorunludur."),phone:c().required("Telefon Numarası Zorunludur.")}),onSubmit:s=>{h(!0);let i=new FormData;i.append("name",s.name),i.append("email",s.email),i.append("phone",s.phone),i.append("notification_settings",JSON.stringify(s.contact)),i.append("address",s.address),fetch(route("worker.customers.store"),{method:"POST",headers:{"X-CSRF-TOKEN":b},body:i}).then(l=>l.json()).then(l=>{l.status?y?(m("success","Başarılı",l.message),setTimeout(()=>{o(!1)},1e3)):(m("success","Başarılı Veriler Yenileniyor 1sn..",l.message),setTimeout(()=>{o(!1),N(l.customers)},1e3)):m("error","Hata",l.message)}).catch(l=>{m("error","Hata","Bir Hata Oluştu")}).finally(()=>{h(!1)})}}),t=d.useMemo(()=>a.type==="individual",[a.type]);return e.jsxs(e.Fragment,{children:[e.jsx(z,{ref:p}),e.jsx(O,{header:"Müşteri Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>o(!1),onCl:!0,maximizable:!0,visible:g,footer:e.jsxs(e.Fragment,{children:[e.jsx(v,{label:"Vazgeç",icon:"pi pi-times",size:"small",link:!0,onClick:()=>o(!1),loading:u}),e.jsx(v,{label:"Kaydet",icon:"pi pi-save",size:"small",className:"p-button-success",loading:u,onClick:()=>{C().then(s=>{})}})]}),children:e.jsx(M,{template:e.jsx("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"3rem"}}),children:e.jsxs("form",{className:"p-fluid",onSubmit:F,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 mb-3",children:[e.jsx("div",{className:"col-span-2 grid gap-y-2",children:S>0&&Object.keys(f).length>0&&e.jsx(e.Fragment,{children:Object.entries(f).map(([s,i])=>e.jsx(k,{severity:"warn",text:i},s))})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"address",className:"font-bold",children:["Müşteri Tipi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(j,{value:a.type,onChange:s=>x("type",s.value),itemTemplate:s=>e.jsxs("div",{className:"w-full text-center",children:[e.jsx("i",{className:s.icon+" p-overlay-badge",style:{fontSize:"1.5rem"}})," ",s.label]}),optionLabel:"value",options:[{icon:"pi pi-user",value:"individual",label:"Bireysel"},{icon:"pi pi-home",value:"company",label:"Kurumsal"}]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:[t?"Müşteri":"Firma"," Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"name",name:"name",onChange:r,value:a.name||"",autoFocus:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"email",className:"font-bold",children:[t?"Müşteri":"Firma"," E-Posta Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"email",type:"email",name:"email",onChange:r,value:a.email||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"phone",className:"font-bold",children:[t?"Müşteri":"Firma"," Telefon No ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"phone",type:"tel",name:"phone",onChange:r,value:a.phone||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"address",className:"font-bold",children:[t?"Müşteri":"Firma"," Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"address",type:"text",name:"address",onChange:r,value:a.address||""})]}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"vatName",className:"font-bold",children:[t?"Müşteri":"Firma"," Vergi Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"vatName",type:"text",name:"vatName",onChange:r,value:a.vatName||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"vatNumber",className:"font-bold",children:[t?"Müşteri":"Firma"," Vergi Numarası ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"vatName",type:"text",name:"vatNumber",onChange:r,value:a.vatNumber||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"vatOffice",className:"font-bold",children:[t?"Müşteri":"Firma"," Vergi Dairesi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"vatName",type:"text",name:"vatOffice",onChange:r,value:a.vatOffice||""})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"font-bold",children:"İletişim Tercihleri"}),e.jsx(j,{multiple:!0,value:a.contact,onChange:s=>x("contact",s.value),itemTemplate:s=>{let i=a.contact&&a.contact.includes(s.value);return e.jsx("div",{className:"w-full text-center",children:e.jsx("i",{className:s.icon+" p-overlay-badge",style:{fontSize:"1.5rem"},children:i&&e.jsx(w,{severity:"success",value:e.jsx("i",{className:"pi pi-check"}),style:{fontSize:"1px"}})})})},optionLabel:"value",options:[{icon:"pi pi-envelope",value:"email"},{icon:"pi pi-send",value:"sms"},{icon:"pi pi-bell",value:"push"}]})]})]})})})]})}export{se as default};
