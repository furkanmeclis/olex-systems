import{r as p,j as e,c as j}from"./app-DxDaNuwc.js";import{I as o}from"./inputtext.esm-D8gDRWlw.js";import{I as b}from"./inputmask.esm-BrjuaU2R.js";import{B as v}from"./button.esm-Bxu_xj3y.js";import{T,a as N}from"./tabview.esm-DU4BKkLm.js";import{d as B}from"./ripple.esm-CN3IMNQy.js";import"./tooltip.esm-GXVv6zQ0.js";import"./index.esm-CTODs3I_.js";import"./index.esm-B5XbtszB.js";import"./index.esm-DMrmqchS.js";import"./index.esm-DcoxjD9O.js";const G=({dealer:u,detail:n,csrf_token:y,toast:i,setLoading:c,loading:h,setDetail:f})=>{const x=p.useRef(null),[l,g]=p.useState(!1),[w,C]=B(0,"central-profile-tab-index"),[s,_]=p.useState({name:n.company_name||"",email:n.company_email||"",phone:n.company_phone||"",country:n.company_country||"",city:n.company_city||"",district:n.company_district||"",zip:n.company_zip||"",address:n.company_address||"",image:n.company_logo||""}),m=t=>{_(a=>({...a,[t.target.name]:t.target.value}))},F=t=>{if(t.target.files.length===0)return g(!1),!1;const a=t.target.files[0];if(a.size>1024*1024*32)return i.current.show({severity:"error",summary:"Hata",detail:"Dosya Boyut 32MB'dan büyük olamaz."}),!1;if(!["image/jpeg","image/png","image/jpg"].includes(a.type))return i.current.show({severity:"error",summary:"Hata",detail:"Dosya Tipi Sadece JPG, JPEG, PNG olabilir."}),!1;g(a)},S=t=>{t.preventDefault();let a=new FormData;a.append("company_name",s.name),a.append("company_email",s.email),a.append("company_phone",s.phone),a.append("company_country",s.country),a.append("company_city",s.city),a.append("company_district",s.district),a.append("company_zip",s.zip),a.append("company_address",s.address),a.append("_method","PUT"),c(!0),fetch(route("central.dealers.updateDetails",u.id),{method:"POST",headers:{"X-CSRF-TOKEN":y},body:a}).then(r=>r.json()).then(r=>{if(r.status){c(!1),i.current.show({severity:"success",summary:"İşlem Başarılı",detail:r.message});let d=r.details;f(d)}else i.current.show({severity:"error",summary:"Hata",detail:r.message})}).catch(r=>{i.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{c(!1)})},z=t=>{if(t.preventDefault(),l===!1)return i.current.show({severity:"error",summary:"Hata",detail:"Lütfen Dosya Seçiniz."}),!1;let a=new FormData;a.append("logo",l),a.append("action","logo"),a.append("_method","PUT"),c(!0),fetch(route("central.dealers.updateDetails",u.id),{method:"POST",headers:{"X-CSRF-TOKEN":y},body:a}).then(r=>r.json()).then(r=>{if(r.status){let d=r.details;f(d),i.current.show({severity:"success",summary:"İşlem Başarılı",detail:r.message})}else i.current.show({severity:"error",summary:"Hata",detail:r.message})}).catch(r=>{i.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{c(!1)})};return e.jsxs(T,{activeIndex:w,onTabChange:t=>C(t.index),children:[e.jsx(N,{header:"Bayi Bilgileri",children:e.jsxs("form",{onSubmit:S,className:"m-0",children:[e.jsx("label",{htmlFor:"name",children:"Bayi Adı"}),e.jsx(o,{className:"w-full mb-2",value:s.name,id:"name",name:"name",type:"text",onChange:m}),e.jsx("label",{htmlFor:"email",children:"Bayi Mail Adresi"}),e.jsx(o,{className:"w-full",id:"email",value:s.email,type:"email",onChange:m,name:"email",keyfilter:"email"}),e.jsx("label",{htmlFor:"phone",children:"Bayi Telefon Numarası"}),e.jsx(b,{id:"phone",mask:"0(999) 999 99 99",placeholder:"0(999) 999 99 99",value:s.phone,onChange:m,name:"phone",className:"w-full"}),e.jsx("label",{htmlFor:"country",children:"Ülke"}),e.jsx(o,{className:"w-full",id:"country",value:s.country,type:"text",onChange:m,name:"country",autoComplete:"country"}),e.jsx("label",{htmlFor:"city",children:"Şehir"}),e.jsx(o,{className:"w-full",id:"city",value:s.city,onChange:m,name:"city",type:"text"}),e.jsx("label",{htmlFor:"district",children:"İlçe"}),e.jsx(o,{className:"w-full",id:"district",value:s.district,onChange:m,name:"district",type:"text"}),e.jsx("label",{htmlFor:"zip",children:"Posta Kodu"}),e.jsx(b,{className:"w-full",id:"zip",value:s.zip,onChange:m,name:"zip",placeholder:"99999",mask:"99999"}),e.jsx("label",{htmlFor:"address",children:"Adres"}),e.jsx(o,{className:"w-full",id:"address",onChange:m,name:"address",value:s.address,type:"text",autoComplete:"address"}),e.jsx(v,{type:"submit",label:"Kaydet",loading:h,severity:"success",size:"small",className:"mt-2"})]})}),e.jsx(N,{header:"Bayi Logo",children:e.jsxs("div",{className:"m-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-x-3 my-3",children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsx("input",{id:"image",ref:x,type:"file",className:"hidden",accept:"image/*",onChange:F}),e.jsxs("div",{className:j("w-44 border-dashed border  h-44 cursor-pointer bg-gray-600/30 rounded-full flex justify-center items-center",{"border-orange-400":l===!1,"border-green-400":l!==!1}),onClick:()=>{x.current.click()},children:[l===!1&&e.jsx("i",{className:"pi pi-camera text-2xl text-orange-400"}),l!==!1&&e.jsx("i",{className:"pi pi-check text-2xl text-green-400"})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("img",{src:l!==!1?URL.createObjectURL(l):s.image,alt:l==null?void 0:l.name,className:j("w-full h-full max-h-44 bg-gray-300/10 border border-dashed object-contain rounded-lg",{"border-orange-400":l===!1,"border-green-400":l!==!1})})})]}),e.jsx(v,{label:"Kaydet",loading:h,onClick:z,severity:"success",size:"small",className:"mt-2"})]})})]})};export{G as default};
