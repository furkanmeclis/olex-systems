import{r as s,F as G,j as e,a as H,y as V}from"./app-CVJZ1rcI.js";import{A as W}from"./AuthenticatedLayout-CmarQ65Q.js";import{D as Y}from"./datatable.esm-CxOv3DFb.js";import{C as r}from"./column.esm-D98CmKFf.js";import{I as X}from"./inputtext.esm-DXx6Pg6G.js";import{B as l}from"./button.esm-BIF7ZDR2.js";import{T as q}from"./tooltip.esm-Cw7wRsUZ.js";import{C as J}from"./confirmpopup.esm-JCzDjJIv.js";import{T as Q}from"./toolbar.esm-tMpu_sjq.js";import{D as Z}from"./dialog.esm-Bf1kqaaU.js";import{T as $}from"./toast.esm-YLMMF5NU.js";import{O as ee,C as te}from"./checkbox.esm-DlswQ5en.js";import ae from"./Update-CtBKl7SX.js";import{u as se}from"./ripple.esm-CUuqICLC.js";import"./ApplicationLogo-mSCRKlpW.js";import"./Dropdown-vLFBetRL.js";import"./transition-Bpse3GWM.js";import"./tag.esm-R7lHiOpe.js";import"./index.esm-2g_KHasO.js";import"./paginator.esm-DoER6ROs.js";import"./inputnumber.esm-Bh6skRq8.js";import"./index.esm-CHclCTdr.js";import"./dropdown.esm-B4P2N7CK.js";import"./index.esm-dx_Y6iUq.js";import"./index.esm-B-7qKS2t.js";import"./overlayservice.esm-CGLbCpdx.js";import"./csstransition.esm-Cypi1K43.js";import"./index.esm-G63tnVm_.js";import"./index.esm-ESICfo25.js";import"./index.esm-DDPajCZ5.js";import"./index.esm-BTVc7HnG.js";import"./index.esm-DBtDcsoH.js";import"./index.esm-DNURKevS.js";import"./index.esm-BSKfnI9x.js";import"./formik.esm-CmjCSlnE.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-CSVmwxZT.js";import"./badge.esm-Czj703A9.js";function Ge({auth:v,customersAll:_,csrf_token:C,page:d=!0,superPage:w=!0}){const x=s.useRef(null),m=s.useRef(null),[h,N]=s.useState({global:{value:null,matchMode:G.CONTAINS}});s.useState(!1);const[c,T]=s.useState(!1),[f,S]=s.useState(""),[F,M]=s.useState([]),[z,P]=s.useState({}),j=s.useRef(),[A,L]=s.useState(_),D=["id","name","email","phone","company_name","worker_name","company_address","address","updated_at","created_at","actions"],R={id:"ID",name:"Müşteri Adı",phone:"Telefon",email:"Email",address:"Müşteri Adresi",company_name:"Bayi Adı",worker_name:"Ekleyen Çalışan",company_address:"Bayi Adres",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},E=d===!0?"super-customers-table-columns":"super-customers-table-columns-2",[a,O]=se(["id","name","email","phone","company_name","worker_name","updated_at","actions"],E),[o,g]=s.useState(!1),y=(t,u=!1)=>{const n=u?t:t.target.value;let i={...h};i.global.value=n,N(i),S(n)},p=()=>{o&&g(!1)},B=e.jsx(e.Fragment,{children:e.jsx(Q,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{m.current.toggle(t)},className:"mr-2"}),F.length>0&&e.jsx(e.Fragment,{children:e.jsx(l,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>M([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}})})]}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(X,{size:"small",value:f,onChange:y,placeholder:"Müşterilerde Arama Yapın"})]}),f!==""&&e.jsx(l,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>y("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),[I,b]=s.useState(!1),U=t=>{o||(P(t),g(!0))},k=()=>e.jsxs(e.Fragment,{children:[e.jsx(q,{target:".custom-target-icon"}),e.jsx(J,{}),e.jsx($,{ref:x}),e.jsx(ee,{ref:m,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[D.map((t,u)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(te,{inputId:t,checked:a.includes(t),onChange:n=>{let i=[...a];n.checked?i.push(t):i=i.filter(K=>K!==t),O(i)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:R[t]})]},u)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(l,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{m.current.hide()}})})]})]})}),e.jsxs(Y,{value:A,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:h,loading:!1,globalFilterFields:["name","email","phone","dealer.company.company_name","dealer.name","dealer.company.company_address"],header:B,emptyMessage:"Müşteri bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[a.includes("id")&&e.jsx(r,{field:"id",sortable:!0,header:"#"}),a.includes("name")&&e.jsx(r,{field:"name",sortable:!0,header:"Müşteri Adı"}),a.includes("email")&&e.jsx(r,{field:"email",sortable:!0,header:"Email"}),a.includes("phone")&&e.jsx(r,{field:"phone",sortable:!0,header:"Telefon No"}),a.includes("company_name")&&e.jsx(r,{field:"dealer.company.company_name",sortable:!0,header:"Bayi Adı",body:t=>e.jsx(l,{label:t.dealer.name,link:!0,size:"small",onClick:()=>{V.visit(route("central.dealers.show",t.dealer.id))}})}),a.includes("worker_name")&&e.jsx(r,{field:"worker.name",sortable:!0,header:"Ekleyen Çalışan",body:t=>e.jsx(l,{label:t.worker.name,link:!0,size:"small",onClick:()=>{}})}),a.includes("company_address")&&e.jsx(r,{field:"dealer.company.company_address",sortable:!0,header:"Bayi Adres"}),a.includes("address")&&e.jsx(r,{field:"address",sortable:!0,header:"Müşteri Adresi"}),a.includes("created_at")&&e.jsx(r,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),a.includes("updated_at")&&e.jsx(r,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),a.includes("actions")&&e.jsx(r,{header:"İşlemler",body:t=>e.jsx("div",{className:"flex justify-center gap-x-2",children:e.jsx(l,{icon:"pi pi-pencil",size:"small",tooltip:"Müşteriyi Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{U(t)}})})})]}),e.jsx(Z,{header:"Müşteriyi Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:p,maximizable:!0,visible:o,footer:e.jsxs(e.Fragment,{children:[e.jsx(l,{label:"Vazgeç",icon:"pi pi-times",size:"small",link:!0,onClick:p,loading:c}),e.jsx(l,{label:"Kaydet",icon:"pi pi-save",size:"small",className:"p-button-success",loading:c,onClick:()=>{b(!0),j.current.click()}})]}),children:e.jsx(ae,{updateModal:o,superPage:w,user:z,csrf_token:C,toast:x,onHide:p,setUsers:L,formRef:j,setFormSubmitted:b,formSubmitted:I,loading:c,setLoading:T,page:d})})]});return d===!0?e.jsxs(W,{user:v.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Müşteriler"}),children:[e.jsx(H,{title:"Müşteriler"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx(k,{})})})})]}):e.jsx(k,{})}export{Ge as default};
