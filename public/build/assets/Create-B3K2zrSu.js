import{r as d,j as a}from"./app-B_icCNQj.js";import{I as t}from"./inputtext.esm-BzqXZJbY.js";import{B as y}from"./blockui.esm-CtpdU3d7.js";import{u as C}from"./formik.esm-y9Y127Q5.js";import{c as k,a as r}from"./index.esm-rYiTVown.js";import{S as f}from"./selectbutton.esm-DuE9UCh_.js";import{B as v}from"./button.esm-Dg6JVqnn.js";import{D as T}from"./dialog.esm-B2T7qrJv.js";import{T as F}from"./toast.esm-CE6M_gso.js";import{I as O}from"./inputmask.esm-DnwrINDR.js";import{m as u}from"./motion-E-ZLBjnC.js";import"./ripple.esm-Jrj8rts1.js";import"./tooltip.esm-BO0-1Nfv.js";import"./_baseClone-BgPU1wOP.js";import"./index.esm-BwdVtBbu.js";import"./csstransition.esm-Dr1Aoso_.js";import"./index.esm-qQPkExep.js";import"./index.esm-DtlqN8Hl.js";import"./index.esm-HWua3moX.js";import"./index.esm-CaHVjw0k.js";import"./TransitionGroup-BKO6pDPb.js";const S=k().shape({type:r().required("Müşteri tipi seçimi zorunludur"),name:r().required("Müşteri/Firma Adı zorunludur"),email:r().email("Geçerli bir e-posta adresi giriniz").required("E-posta adresi zorunludur"),phone:r().required("Telefon numarası zorunludur"),address:r().required("Adres zorunludur"),vatName:r().when("type",{is:"company",then:()=>r().required("Vergi adı zorunludur"),otherwise:()=>r()}),vatNumber:r().when("type",{is:"company",then:()=>r().required("Vergi numarası zorunludur"),otherwise:()=>r()}),vatOffice:r().when("type",{is:"company",then:()=>r().required("Vergi dairesi zorunludur"),otherwise:()=>r()})});function W({csrf_token:x,setUsers:N,visible:b,setVisible:o,workerHome:j=!1}){const h=d.useRef(null),[c,p]=d.useState(!1),n=(l,i,s)=>{h.current.show({severity:l,summary:i,detail:s})},e=C({initialValues:{type:"individual",name:"",email:"",phone:"",address:"",contact:[],vatName:"",vatNumber:"",vatOffice:""},validationSchema:S,onSubmit:l=>{p(!0);let i=new FormData;Object.keys(l).forEach(s=>{s==="contact"?i.append("notification_settings",JSON.stringify(l[s])):i.append(s,l[s])}),fetch(route("worker.customers.store"),{method:"POST",headers:{"X-CSRF-TOKEN":x},body:i}).then(s=>s.json()).then(s=>{s.status?j?(n("success","Başarılı",s.message),setTimeout(()=>{o(!1)},1e3)):(n("success","Başarılı",s.message),setTimeout(()=>{o(!1),N(s.customers)},1e3)):n("error","Hata",s.message)}).catch(()=>{n("error","Hata","Bir hata oluştu")}).finally(()=>{p(!1)})}}),m=d.useMemo(()=>e.values.type==="company",[e.values.type]),g=[{icon:"pi pi-user",value:"individual",label:"Bireysel"},{icon:"pi pi-building",value:"company",label:"Kurumsal"}],w=[{icon:"pi pi-envelope",value:"email",label:"E-posta"},{icon:"pi pi-send",value:"sms",label:"SMS"},{icon:"pi pi-bell",value:"push",label:"Bildirim"}];return a.jsxs(a.Fragment,{children:[a.jsx(F,{ref:h}),a.jsx(T,{header:`${m?"Kurumsal":"Bireysel"} Müşteri Ekle`,visible:b,style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>o(!1),maximizable:!0,footer:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(v,{label:"Vazgeç",icon:"pi pi-times",onClick:()=>o(!1),className:"p-button-text",disabled:c}),a.jsx(v,{label:"Kaydet",icon:"pi pi-check",onClick:e.handleSubmit,loading:c})]}),children:a.jsx(y,{blocked:c,children:a.jsx("form",{onSubmit:e.handleSubmit,className:"flex flex-col gap-4",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"field",children:[a.jsx("label",{className:"font-bold mb-2 block",children:"Müşteri Tipi"}),a.jsx(f,{value:e.values.type,onChange:l=>e.setFieldValue("type",l.value),options:g,itemTemplate:l=>a.jsxs(u.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-4 py-2",children:[a.jsx("i",{className:l.icon}),a.jsx("span",{children:l.label})]}),className:"w-full"})]}),a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"name",className:"font-bold block mb-2",children:[m?"Firma Adı":"Müşteri Adı",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"name",value:e.values.name,onChange:e.handleChange,className:e.errors.name&&e.touched.name?"p-invalid w-full":"w-full"}),e.errors.name&&e.touched.name&&a.jsx("small",{className:"p-error",children:e.errors.name})]}),a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"email",className:"font-bold block mb-2",children:["E-posta Adresi",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"email",value:e.values.email,onChange:e.handleChange,className:e.errors.email&&e.touched.email?"p-invalid w-full":"w-full"}),e.errors.email&&e.touched.email&&a.jsx("small",{className:"p-error",children:e.errors.email})]}),a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"phone",className:"font-bold block mb-2",children:["Telefon Numarası",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(O,{id:"phone",value:e.values.phone,onChange:e.handleChange,mask:"(999) 999-9999",placeholder:"(5XX) XXX-XXXX",className:e.errors.phone&&e.touched.phone?"p-invalid w-full":"w-full"}),e.errors.phone&&e.touched.phone&&a.jsx("small",{className:"p-error",children:e.errors.phone})]}),a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"address",className:"font-bold block mb-2",children:["Adres",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"address",value:e.values.address,onChange:e.handleChange,className:e.errors.address&&e.touched.address?"p-invalid w-full":"w-full"}),e.errors.address&&e.touched.address&&a.jsx("small",{className:"p-error",children:e.errors.address})]}),m&&a.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"vatName",className:"font-bold block mb-2",children:["Vergi Adı",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"vatName",value:e.values.vatName,onChange:e.handleChange,className:e.errors.vatName&&e.touched.vatName?"p-invalid w-full":"w-full"}),e.errors.vatName&&e.touched.vatName&&a.jsx("small",{className:"p-error",children:e.errors.vatName})]}),a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"vatNumber",className:"font-bold block mb-2",children:["Vergi Numarası",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"vatNumber",value:e.values.vatNumber,onChange:e.handleChange,className:e.errors.vatNumber&&e.touched.vatNumber?"p-invalid w-full":"w-full"}),e.errors.vatNumber&&e.touched.vatNumber&&a.jsx("small",{className:"p-error",children:e.errors.vatNumber})]}),a.jsxs("div",{className:"field",children:[a.jsxs("label",{htmlFor:"vatOffice",className:"font-bold block mb-2",children:["Vergi Dairesi",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(t,{id:"vatOffice",value:e.values.vatOffice,onChange:e.handleChange,className:e.errors.vatOffice&&e.touched.vatOffice?"p-invalid w-full":"w-full"}),e.errors.vatOffice&&e.touched.vatOffice&&a.jsx("small",{className:"p-error",children:e.errors.vatOffice})]})]}),a.jsxs("div",{className:"field",children:[a.jsx("label",{className:"font-bold block mb-2",children:"İletişim Tercihleri"}),a.jsx(f,{multiple:!0,value:e.values.contact,onChange:l=>e.setFieldValue("contact",l.value),options:w,itemTemplate:l=>{var s;const i=(s=e.values.contact)==null?void 0:s.includes(l.value);return a.jsxs(u.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex items-center gap-2 px-4 py-2",children:[a.jsx("i",{className:`${l.icon} ${i?"text-primary":""}`}),a.jsx("span",{children:l.label})]})},className:"w-full"})]})]})})})})]})}export{W as default};
