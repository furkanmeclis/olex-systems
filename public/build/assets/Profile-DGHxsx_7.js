import{r as u,j as e,c as b}from"./app-avhlPhiM.js";import{I as o}from"./inputtext.esm-CXUGpXfk.js";import{I as v}from"./inputmask.esm-gXtrQ0Ir.js";import{B as N}from"./button.esm-COrztKzg.js";import{T as B,a as w}from"./tabview.esm-BPrGOx7l.js";import{d as k}from"./ripple.esm-BqSoC-Lb.js";import"./tooltip.esm-DhBWKiHa.js";import"./index.esm-CtV9PM-y.js";import"./index.esm-DpvTIFHU.js";import"./index.esm-DLi-8pBF.js";import"./index.esm-DwzZvLdg.js";const M=({dealer:y,detail:n,csrf_token:h,toast:i,setLoading:c,loading:f,setDetail:x,superPage:d=!0})=>{const g=u.useRef(null),[l,j]=u.useState(!1),[C,_]=k(0,`${d===!0?"super":"dealer"}-profile-tab-index`),[s,F]=u.useState({name:n.company_name||"",email:n.company_email||"",phone:n.company_phone||"",country:n.company_country||"",city:n.company_city||"",district:n.company_district||"",zip:n.company_zip||"",address:n.company_address||"",image:n.company_logo||""}),m=t=>{F(a=>({...a,[t.target.name]:t.target.value}))},S=t=>{if(t.target.files.length===0)return j(!1),!1;const a=t.target.files[0];if(a.size>1024*1024*32)return i.current.show({severity:"error",summary:"Hata",detail:"Dosya Boyut 32MB'dan büyük olamaz."}),!1;if(!["image/jpeg","image/png","image/jpg"].includes(a.type))return i.current.show({severity:"error",summary:"Hata",detail:"Dosya Tipi Sadece JPG, JPEG, PNG olabilir."}),!1;j(a)},z=t=>{t.preventDefault();let a=new FormData;a.append("company_name",s.name),a.append("company_email",s.email),a.append("company_phone",s.phone),a.append("company_country",s.country),a.append("company_city",s.city),a.append("company_district",s.district),a.append("company_zip",s.zip),a.append("company_address",s.address),a.append("_method","PUT"),c(!0),fetch(route(`${d===!0?"super":"dealer"}.dealers.updateDetails`,y.id),{method:"POST",headers:{"X-CSRF-TOKEN":h},body:a}).then(r=>r.json()).then(r=>{if(r.status){c(!1),i.current.show({severity:"success",summary:"İşlem Başarılı",detail:r.message});let p=r.details;x(p)}else i.current.show({severity:"error",summary:"Hata",detail:r.message})}).catch(r=>{i.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{c(!1)})},T=t=>{if(t.preventDefault(),l===!1)return i.current.show({severity:"error",summary:"Hata",detail:"Lütfen Dosya Seçiniz."}),!1;let a=new FormData;a.append("logo",l),a.append("action","logo"),a.append("_method","PUT"),c(!0),fetch(route(`${d===!0?"super":"dealer"}.dealers.updateDetails`,y.id),{method:"POST",headers:{"X-CSRF-TOKEN":h},body:a}).then(r=>r.json()).then(r=>{if(r.status){let p=r.details;x(p),i.current.show({severity:"success",summary:"İşlem Başarılı",detail:r.message})}else i.current.show({severity:"error",summary:"Hata",detail:r.message})}).catch(r=>{i.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{c(!1)})};return e.jsxs(B,{activeIndex:C,onTabChange:t=>_(t.index),children:[e.jsx(w,{header:"Bayi Bilgileri",children:e.jsxs("form",{onSubmit:z,className:"m-0",children:[e.jsx("label",{htmlFor:"name",children:"Bayi Adı"}),e.jsx(o,{className:"w-full mb-2",value:s.name,id:"name",name:"name",type:"text",onChange:m}),e.jsx("label",{htmlFor:"email",children:"Bayi Mail Adresi"}),e.jsx(o,{className:"w-full",id:"email",value:s.email,type:"email",onChange:m,name:"email",keyfilter:"email"}),e.jsx("label",{htmlFor:"phone",children:"Bayi Telefon Numarası"}),e.jsx(v,{id:"phone",mask:"0(999) 999 99 99",placeholder:"0(999) 999 99 99",value:s.phone,onChange:m,name:"phone",className:"w-full"}),e.jsx("label",{htmlFor:"country",children:"Ülke"}),e.jsx(o,{className:"w-full",id:"country",value:s.country,type:"text",onChange:m,name:"country",autoComplete:"country"}),e.jsx("label",{htmlFor:"city",children:"Şehir"}),e.jsx(o,{className:"w-full",id:"city",value:s.city,onChange:m,name:"city",type:"text"}),e.jsx("label",{htmlFor:"district",children:"İlçe"}),e.jsx(o,{className:"w-full",id:"district",value:s.district,onChange:m,name:"district",type:"text"}),e.jsx("label",{htmlFor:"zip",children:"Posta Kodu"}),e.jsx(v,{className:"w-full",id:"zip",value:s.zip,onChange:m,name:"zip",placeholder:"99999",mask:"99999"}),e.jsx("label",{htmlFor:"address",children:"Adres"}),e.jsx(o,{className:"w-full",id:"address",onChange:m,name:"address",value:s.address,type:"text",autoComplete:"address"}),e.jsx(N,{type:"submit",label:"Kaydet",loading:f,severity:"success",size:"small",className:"mt-2"})]})}),e.jsx(w,{header:"Bayi Logo",children:e.jsxs("div",{className:"m-0",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-x-3 my-3",children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsx("input",{id:"image",ref:g,type:"file",className:"hidden",accept:"image/*",onChange:S}),e.jsxs("div",{className:b("w-44 border-dashed border  h-44 cursor-pointer bg-gray-600/30 rounded-full flex justify-center items-center",{"border-orange-400":l===!1,"border-green-400":l!==!1}),onClick:()=>{g.current.click()},children:[l===!1&&e.jsx("i",{className:"pi pi-camera text-2xl text-orange-400"}),l!==!1&&e.jsx("i",{className:"pi pi-check text-2xl text-green-400"})]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("img",{src:l!==!1?URL.createObjectURL(l):s.image,alt:l==null?void 0:l.name,className:b("w-full h-full max-h-44 bg-gray-300/10 border border-dashed object-contain rounded-lg",{"border-orange-400":l===!1,"border-green-400":l!==!1})})})]}),e.jsx(N,{label:"Kaydet",loading:f,onClick:T,severity:"success",size:"small",className:"mt-2"})]})})]})};export{M as default};
