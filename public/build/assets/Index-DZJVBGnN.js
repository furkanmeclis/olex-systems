import{r as s,F as U,j as e,L as G,c as K}from"./app-B0Xag5vm.js";import{A as Y}from"./AuthenticatedLayout-C2IvI0N6.js";import{D as I}from"./datatable.esm-C3ZFJQqr.js";import{C as o}from"./column.esm-BZ0rbR1D.js";import{B as m}from"./button.esm-CdtlnTz5.js";import{T as W}from"./tooltip.esm-C99wVij7.js";import{C as V,c as w}from"./confirmpopup.esm-DRQ-Z74u.js";import{T as X}from"./toolbar.esm-Cxyo1ghU.js";import{D as z}from"./dialog.esm-BbSjJRMo.js";import{T as $}from"./toast.esm-BX0M7asb.js";import{O as J}from"./overlaypanel.esm-CD-DXNBd.js";import{C as q}from"./checkbox.esm-93BEDwXV.js";import Q from"./Create-NEnjJWQS.js";import Z from"./Update-VQlyNhwJ.js";import{A as ee}from"./avatar.esm-BI8qAQMX.js";import{c as te}from"./ripple.esm-CDYa-oWb.js";import"./Dropdown-CyoYC6vp.js";import"./tag.esm-DnkJ9buF.js";import"./motion-snAqrzac.js";import"./index.esm-C_1UxxSh.js";import"./paginator.esm-BgUKXpH4.js";import"./inputnumber.esm-BMnqchoX.js";import"./inputtext.esm-CU5mHEyi.js";import"./index.esm-CNb1qswM.js";import"./dropdown.esm-B2y4tOjl.js";import"./index.esm-CWphjh0p.js";import"./index.esm-DRr3eaqO.js";import"./overlayservice.esm-C0zaFI8v.js";import"./csstransition.esm-DoZjE4GP.js";import"./index.esm-CftuEaaM.js";import"./index.esm-Djr8Bcws.js";import"./index.esm-DxCYw3OJ.js";import"./index.esm-Dep4HqQy.js";import"./index.esm-Ka8oV4Qk.js";import"./index.esm-CE--N7yQ.js";import"./index.esm-DwEsdbYO.js";import"./TransitionGroup-RixLciqm.js";import"./blockui.esm-q7ED-0w1.js";import"./formik.esm-CHhk4_q1.js";import"./_baseClone-BgPU1wOP.js";import"./index.esm-Bwr88f_f.js";import"./message.esm-CS_rcC_j.js";import"./inputswitch.esm-Cp1sUYF9.js";import"./password.esm-Dxu8oJd5.js";import"./index.esm-CIKBBgKi.js";function Ve({auth:T,usersAll:C,csrf_token:p,roles:v}){const l=s.useRef(null),x=s.useRef(null);s.useState({global:{value:null,matchMode:U.CONTAINS}}),s.useState(!1),s.useState("");const[n,u]=s.useState([]),[F,N]=s.useState({}),[y,h]=s.useState(C),b=["id","name","email","phone","role","avatar","active","updated_at","created_at","actions"],M={id:"ID",name:"Üye Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rolü",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[i,P]=te(b,"super-central-users-table-columns"),[k,g]=s.useState(!1),[S,j]=s.useState(!1),L=()=>e.jsx(e.Fragment,{children:e.jsx(X,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Merkez Üyesi Ekle",tooltipOptions:{position:"top"},onClick:()=>{g(!0)},className:"mr-2"}),e.jsx(m,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{x.current.toggle(t)},className:"mr-2"}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>u([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(m,{size:"small",onClick:t=>{w({target:t.currentTarget,message:`Seçilen ${n.length} Merkez Üyelerini silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let c=route("super.central.multipleDestroy");fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({workerIds:n.map(r=>r.id)})}).then(async r=>{let a=await r.json();r.status===404?l.current.show({severity:"error",summary:"Hata",detail:a.message}):r.status===500?l.current.show({severity:"warning",summary:"Hata",detail:a.message}):r.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:a.message}),h(y.map(d=>n.map(f=>f.id).includes(d.id)?null:d).filter(Boolean)))}).catch(r=>{console.log(r),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${n.length} Merkez Üyesini Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:n.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[n.length," merkez üyesi seçildi."]})})})})}),D=t=>e.jsx(m,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:K("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),O=L(),R=(t,c)=>{const r=()=>{fetch(route("super.central.destroy",c),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async a=>{let d=await a.json();a.status===404?l.current.show({severity:"error",summary:"Hata",detail:d.message}):a.status===500?l.current.show({severity:"warning",summary:"Hata",detail:d.message}):a.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:d.message}),h(y.map(f=>f.id!==c?f:null).filter(Boolean)))}).catch(a=>{console.log(a),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u(n.filter(a=>a.id!==c?a:null).filter(Boolean))})};w({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:r,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[A,E]=s.useState(e.jsx(e.Fragment,{})),[H,B]=s.useState(e.jsx(e.Fragment,{})),_=t=>{N(t),j(!0)};return e.jsxs(Y,{user:T.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Merkez Üyeleri"}),children:[e.jsx(G,{title:"Merkez Üyeleri"}),e.jsx(W,{target:".custom-target-icon"}),e.jsx(V,{}),e.jsx($,{ref:l}),e.jsx(J,{ref:x,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[b.map((t,c)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(q,{inputId:t,checked:i.includes(t),onChange:r=>{let a=[...i];r.checked?a.push(t):a=a.filter(d=>d!==t),P(a)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:M[t]})]},c)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(m,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{x.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(I,{dragSelection:!0,value:y,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:{name:{value:"",matchMode:"contains"},email:{value:"",matchMode:"contains"},phone:{value:"",matchMode:"contains"},role_label:{value:"",matchMode:"contains"}},loading:!1,selectionMode:null,selection:n,onSelectionChange:t=>u(t.value),globalFilterFields:["name","email","phone"],header:O,filterDisplay:"row",emptyMessage:"Merkez Üyesi bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(o,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),i.includes("id")&&e.jsx(o,{field:"id",sortable:!0,header:"#"}),i.includes("name")&&e.jsx(o,{field:"name",filter:!0,filterPlaceholder:"Üye Adına Göre Filtre",sortable:!0,header:"Üye Adı"}),i.includes("email")&&e.jsx(o,{field:"email",filter:!0,filterPlaceholder:"Emaile Göre Filtre",sortable:!0,header:"Email"}),i.includes("phone")&&e.jsx(o,{field:"phone",filter:!0,filterPlaceholder:"Telefona Göre Filtre",sortable:!0,header:"Telefon No"}),i.includes("role")&&e.jsx(o,{field:"role_label",filter:!0,filterPlaceholder:"Role Göre Filtre",sortable:!0,header:"Rolü"}),i.includes("avatar")&&e.jsx(o,{field:"image",header:"Avatar",body:t=>e.jsx(ee,{image:t.avatar,shape:"circle",size:"large"})}),i.includes("active")&&e.jsx(o,{field:"active",header:"Durumu",dataType:"boolean",body:D}),i.includes("created_at")&&e.jsx(o,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),i.includes("updated_at")&&e.jsx(o,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),i.includes("actions")&&e.jsx(o,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(m,{icon:"pi pi-pencil",size:"small",tooltip:"Hızlı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{_(t)}}),e.jsx(m,{icon:"pi pi-times",tooltip:"Merkez Üyesini Sil",tooltipOptions:{position:"top"},size:"small",onClick:c=>{R(c,t.id)},severity:"danger"})]})})]}),e.jsx(z,{header:"Yeni Merkez Üyesi Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>g(!1),maximizable:!0,visible:k,footer:A,children:e.jsx(Q,{addModal:k,csrf_token:p,toast:l,onHide:()=>g(!1),roles:v,setUsers:h,setAddModalFooter:E})}),e.jsx(z,{header:"Merkez Üyesini Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>j(!1),maximizable:!0,visible:S,footer:H,children:e.jsx(Z,{updateModal:S,user:F,csrf_token:p,toast:l,roles:v,onHide:()=>j(!1),setUsers:h,setUpdateModalFooter:B})})]})})})]})}export{Ve as default};
