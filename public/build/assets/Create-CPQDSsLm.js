import{j as e}from"./app-ByJu4dNU.js";import{I as n}from"./inputtext.esm-B7bQ2xES.js";import{c as b,a as o,B as v}from"./index.esm-Y-i7tGI1.js";import{u as N}from"./formik.esm-CiEZ6rRD.js";import{M as g}from"./message.esm-NliSS8l_.js";import{S,B as F}from"./badge.esm-DNyPdmSz.js";import"./ripple.esm-DVOzkR0Z.js";import"./tooltip.esm-Qbmp7RO6.js";import"./_baseClone-BgPU1wOP.js";import"./index.esm-BZ__EFKP.js";import"./index.esm-_S9D5RbG.js";import"./index.esm-DK5sDiZt.js";function V({csrf_token:p,toast:t,onHide:m,setUsers:u,formRef:h,formSubmitted:x,workerHome:f=!1,setLoading:d}){const{values:i,handleSubmit:j,handleChange:l,dirty:T,setFieldValue:y,errors:c,setErrors:C}=N({initialValues:{name:"",email:"",phone:"",image:"",gender:"",player_id:"",address:"",contact:[]},validationSchema:b().shape({name:o().required("Müşteri Adı Zorunludur."),email:o().email("Geçerli Bir E-Posta Adresi Giriniz.").required("E-Posta Adresi Zorunludur."),phone:o().required("Telefon Numarası Zorunludur.")}),onSubmit:s=>{d(!0);let a=new FormData;a.append("name",s.name),a.append("email",s.email),a.append("phone",s.phone),a.append("notification_settings",JSON.stringify(s.contact)),a.append("address",s.address),fetch(route("worker.customers.store"),{method:"POST",headers:{"X-CSRF-TOKEN":p},body:a}).then(r=>r.json()).then(r=>{r.status?f?(t.current.show({severity:"success",summary:"Başarılı",detail:r.message}),setTimeout(()=>{m()},1e3)):(t.current.show({severity:"success",summary:"Başarılı Veriler Yenileniyor 1sn..",detail:r.message}),setTimeout(()=>{m(),u(r.customers)},1e3)):t.current.show({severity:"error",summary:"Hata",detail:r.message})}).catch(r=>{t.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{d(!1)})}});return e.jsx(v,{template:e.jsx("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"3rem"}}),children:e.jsxs("form",{className:"p-fluid",onSubmit:j,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 mb-3",children:[e.jsx("div",{className:"col-span-2 grid gap-y-2",children:x&&Object.keys(c).length>0&&e.jsx(e.Fragment,{children:Object.entries(c).map(([s,a])=>e.jsx(g,{severity:"warn",text:a},s))})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Müşteri Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"name",name:"name",onChange:l,value:i.name||"",autoFocus:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"email",className:"font-bold",children:["Müşteri E-Posta Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"email",type:"email",name:"email",onChange:l,value:i.email||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"phone",className:"font-bold",children:["Müşteri Telefon No ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"phone",type:"tel",name:"phone",onChange:l,value:i.phone||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"address",className:"font-bold",children:["Müşteri Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"address",type:"text",name:"address",onChange:l,value:i.address||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"font-bold",children:"İletişim Tercihleri"}),e.jsx(S,{multiple:!0,value:i.contact,onChange:s=>y("contact",s.value),itemTemplate:s=>{let a=i.contact&&i.contact.includes(s.value);return e.jsx("div",{className:"w-full text-center",children:e.jsx("i",{className:s.icon+" p-overlay-badge",style:{fontSize:"1.5rem"},children:a&&e.jsx(F,{severity:"success",value:e.jsx("i",{className:"pi pi-check"}),style:{fontSize:"1px"}})})})},optionLabel:"value",options:[{icon:"pi pi-envelope",value:"email"},{icon:"pi pi-send",value:"sms"},{icon:"pi pi-bell",value:"push"}]})]}),e.jsx("button",{type:"submit",style:{display:"none"},ref:h})]})})}export{V as default};
