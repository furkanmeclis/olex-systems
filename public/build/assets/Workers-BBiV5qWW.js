import{r as i,F as U,j as e,c as V}from"./app-B_icCNQj.js";import"./Dropdown-Bet1ItTZ.js";import{T as X}from"./toast.esm-CE6M_gso.js";import{D as $}from"./datatable.esm-CP0JrEQg.js";import{C as c}from"./column.esm-BzoNoIEq.js";import{B as s}from"./button.esm-Dg6JVqnn.js";import{T as J}from"./tooltip.esm-BO0-1Nfv.js";import{C as q,c as P}from"./confirmpopup.esm-Ca16Hzwi.js";import{T as Q}from"./toolbar.esm-C1ZhY9Jo.js";import{D as k}from"./dialog.esm-B2T7qrJv.js";import{O as Z}from"./overlaypanel.esm-Dtj6EcyG.js";import{C as ee}from"./checkbox.esm-CzcfItnP.js";import{A as te}from"./avatar.esm-DClfZmi2.js";import{c as ae}from"./ripple.esm-Jrj8rts1.js";import ie from"./WorkerCreate-BISxxQ-1.js";import se from"./WorkerUpdate-Djvc7o-E.js";import{B as le}from"./buttongroup.esm-DHYduXB2.js";import"./csstransition.esm-Dr1Aoso_.js";import"./index.esm-DtlqN8Hl.js";import"./index.esm-HWua3moX.js";import"./index.esm-qQPkExep.js";import"./index.esm-CaHVjw0k.js";import"./TransitionGroup-BKO6pDPb.js";import"./index.esm-BwdVtBbu.js";import"./paginator.esm-DlUVi0bu.js";import"./inputnumber.esm-Cihv1JP7.js";import"./inputtext.esm-BzqXZJbY.js";import"./index.esm-DfreRFl9.js";import"./dropdown.esm-Cm_FCi_0.js";import"./index.esm-sNZDHEZX.js";import"./overlayservice.esm-Cswwlqs3.js";import"./index.esm-RWYLnKy3.js";import"./index.esm-Bwka6BHb.js";import"./index.esm-Dxx06Ltb.js";import"./index.esm-wUXTzMVg.js";import"./formik.esm-y9Y127Q5.js";import"./_baseClone-BgPU1wOP.js";import"./index.esm-rYiTVown.js";import"./blockui.esm-CtpdU3d7.js";import"./message.esm-Dviv-tjb.js";import"./inputswitch.esm-DwZwJThI.js";import"./password.esm-vyNQk7kZ.js";import"./index.esm-0In0fCd_.js";function Je({auth:re,workersAll:M,csrf_token:x,dealer:S}){const r=i.useRef(null),g=i.useRef(null);i.useState({global:{value:null,matchMode:U.CONTAINS}});const[v,h]=i.useState(M);i.useState(!1),i.useState("");const[d,j]=i.useState([]),[L,B]=i.useState({}),N=["id","name","email","phone","avatar","active","updated_at","created_at","actions"],E={id:"ID",name:"Çalışan Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rol",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[o,O]=ae(N,"super-dealer-workers-tab"),[T,b]=i.useState(!1),[C,w]=i.useState(!1),[A,u]=i.useState(!1),[m,y]=i.useState({}),H=()=>e.jsx(e.Fragment,{children:e.jsx(Q,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Çalışan Ekle",tooltipOptions:{position:"top"},onClick:()=>{b(!0)},className:"mr-2"}),e.jsx(s,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{g.current.toggle(t)},className:"mr-2"}),d.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(s,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>j([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(s,{size:"small",onClick:t=>{P({target:t.currentTarget,message:`Seçilen ${d.length} çalışanı silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let p=route("super.workers.multipleDestroy");fetch(p,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":x},body:JSON.stringify({workerIds:d.map(l=>l.id),dealerId:S.id})}).then(async l=>{let n=await l.json();l.status===404?r.current.show({severity:"error",summary:"Hata",detail:n.message}):l.status===500?r.current.show({severity:"warning",summary:"Hata",detail:n.message}):l.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:n.message}),h(v.map(a=>d.map(f=>f.id).includes(a.id)?null:a).filter(Boolean)))}).catch(l=>{console.log(l),r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${d.length} çalışanı Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg"}),d.length>0&&e.jsxs("span",{children:[d.length," çalışan seçildi."]})]})})})}),R=t=>e.jsx(s,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:V("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),W=H(),F=(t,p,l=()=>{})=>{const n=()=>{fetch(route("super.workers.destroy",p),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":x}}).then(async a=>{let f=await a.json();a.status===404?r.current.show({severity:"error",summary:"Hata",detail:f.message}):a.status===500?r.current.show({severity:"warning",summary:"Hata",detail:f.message}):a.status===200&&(l(),r.current.show({severity:"success",summary:"Başarılı",detail:f.message}),h(v.map(D=>D.id!==p?D:null).filter(Boolean)))}).catch(a=>{console.log(a),r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j(d.filter(a=>a.id!==p?a:null).filter(Boolean))})};P({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:n,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[_,G]=i.useState(e.jsx(e.Fragment,{})),[K,Y]=i.useState(e.jsx(e.Fragment,{})),z=t=>{B(t),w(!0)},I=t=>{y(t),u(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(J,{target:".custom-target-icon"}),e.jsx(q,{}),e.jsx(X,{ref:r}),e.jsx(Z,{ref:g,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[N.map((t,p)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(ee,{inputId:t,checked:o.includes(t),onChange:l=>{let n=[...o];l.checked?n.push(t):n=n.filter(a=>a!==t),O(n)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:E[t]})]},p)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(s,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{g.current.hide()}})})]})]})}),e.jsxs($,{dragSelection:!0,value:v,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:{name:{value:"",matchMode:"contains"},email:{value:"",matchMode:"contains"},phone:{value:"",matchMode:"contains"}},filterDisplay:"row",loading:!1,selectionMode:null,selection:d,onSelectionChange:t=>j(t.value),globalFilterFields:["name","email","phone"],header:W,emptyMessage:"Çalışan bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(c,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),o.includes("id")&&e.jsx(c,{field:"id",sortable:!0,header:"#"}),o.includes("name")&&e.jsx(c,{field:"name",filter:!0,filterPlaceholder:"Ada Göre Filtreleyin",sortable:!0,header:"Çalışan Adı"}),o.includes("email")&&e.jsx(c,{field:"email",filter:!0,filterPlaceholder:"Emaile Göre Filtreleyin",sortable:!0,header:"Email"}),o.includes("phone")&&e.jsx(c,{field:"phone",filter:!0,filterPlaceholder:"Telefona Göre Filtreleyin",sortable:!0,header:"Telefon No"}),o.includes("avatar")&&e.jsx(c,{field:"image",header:"Avatar",body:t=>e.jsx(te,{image:t.avatar,shape:"circle",size:"large"})}),o.includes("active")&&e.jsx(c,{field:"active",header:"Durumu",dataType:"boolean",body:R}),o.includes("created_at")&&e.jsx(c,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),o.includes("updated_at")&&e.jsx(c,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),o.includes("actions")&&e.jsx(c,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(s,{icon:"pi pi-eye",size:"small",tooltip:"Çalışanı Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{I(t)}}),e.jsx(s,{icon:"pi pi-pencil",size:"small",tooltip:"Çalışanı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{z(t)}}),e.jsx(s,{icon:"pi pi-times",tooltip:"Çalışanı Sil",tooltipOptions:{position:"top"},size:"small",onClick:p=>{F(p,t.id)},severity:"danger"})]})})]}),e.jsx(k,{header:"Yeni Çalışan Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>b(!1),maximizable:!0,visible:T,footer:_,children:e.jsx(ie,{dealerId:S.id,onHide:()=>b(!1),csrf_token:x,toast:r,setWorkers:h,addModal:T,setAddModalFooter:G})}),e.jsx(k,{header:"Çalışanı Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>w(!1),maximizable:!0,visible:C,footer:K,children:e.jsx(se,{updateModal:C,worker:L,csrf_token:x,toast:r,onHide:()=>w(!1),setWorkers:h,setUpdateModalFooter:Y})}),e.jsx(k,{header:"Çalışanı Görüntüle",style:{width:"40vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>u(!1),maximizable:!0,visible:A,children:m&&e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-lg text-white font-semibold border-b pb-2",children:"Çalışan Bilgileri"})}),e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Çalışan Adı:"}),e.jsx("span",{children:m.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:m.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Telefon:"}),e.jsx("span",{children:m.phone})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Üyelik Durumu:"}),e.jsx("span",{children:m.active?"Aktif":"DeAktif"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Eklenme Tarihi:"}),e.jsx("span",{children:new Date(m.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Güncellenme Tarihi:"}),e.jsx("span",{children:new Date(m.updated_at).toLocaleString()})]})]})}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs(le,{children:[e.jsx(s,{label:"Kapat",icon:"pi pi-times",severity:"info",onClick:()=>{u(!1),y({})}}),e.jsx(s,{label:"Hizmet Kayıtları",icon:"pi pi-file",severity:"help",onClick:()=>{}}),e.jsx(s,{label:"Düzenle",icon:"pi pi-pencil",severity:"warning",onClick:t=>{u(!1),y({}),z(m)}}),e.jsx(s,{label:"Sil",icon:"pi pi-trash",severity:"danger",onClick:t=>{F(t,m.id,()=>{u(!1),y({})})}})]})})]})})})]})}export{Je as default};
