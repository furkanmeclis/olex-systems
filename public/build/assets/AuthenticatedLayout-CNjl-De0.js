import{r,K as F,j as e,$ as j}from"./app-DYHyNKN7.js";import"./Dropdown-BZb4VFCC.js";import{T as k}from"./tag.esm-PGLHleUL.js";import{T as O}from"./toast.esm-U05f0Ars.js";import{u as z,f as B,a as K,P as H,L,m as E}from"./motion-LjQvIddk.js";function $(){const t=r.useRef(!1);return z(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function T(){const t=$(),[a,s]=r.useState(0),n=r.useCallback(()=>{t.current&&s(a+1)},[a]);return[r.useCallback(()=>B.postRender(n),[n]),a]}class U extends r.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function W({children:t,isPresent:a}){const s=r.useId(),n=r.useRef(null),m=r.useRef({width:0,height:0,top:0,left:0});return r.useInsertionEffect(()=>{const{width:f,height:c,top:u,left:h}=m.current;if(a||!n.current||!f||!c)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[a]),r.createElement(U,{isPresent:a,childRef:n,sizeRef:m},r.cloneElement(t,{ref:n}))}const _=({children:t,initial:a,isPresent:s,onExitComplete:n,custom:m,presenceAffectsLayout:f,mode:c})=>{const u=K(Y),h=r.useId(),d=r.useMemo(()=>({id:h,initial:a,isPresent:s,custom:m,onExitComplete:i=>{u.set(i,!0);for(const o of u.values())if(!o)return;n&&n()},register:i=>(u.set(i,!1),()=>u.delete(i))}),f?void 0:[s]);return r.useMemo(()=>{u.forEach((i,o)=>u.set(o,!1))},[s]),r.useEffect(()=>{!s&&!u.size&&n&&n()},[s]),c==="popLayout"&&(t=r.createElement(W,{isPresent:s},t)),r.createElement(H.Provider,{value:d},t)};function Y(){return new Map}function V(t){return r.useEffect(()=>()=>t(),[])}const v=t=>t.key||"";function D(t,a){t.forEach(s=>{const n=v(s);a.set(n,s)})}function G(t){const a=[];return r.Children.forEach(t,s=>{r.isValidElement(s)&&a.push(s)}),a}const q=({children:t,custom:a,initial:s=!0,onExitComplete:n,exitBeforeEnter:m,presenceAffectsLayout:f=!0,mode:c="sync"})=>{const u=r.useContext(L).forceRender||T()[0],h=$(),d=G(t);let i=d;const o=r.useRef(new Map).current,g=r.useRef(i),x=r.useRef(new Map).current,y=r.useRef(!0);if(z(()=>{y.current=!1,D(d,x),g.current=i}),V(()=>{y.current=!0,x.clear(),o.clear()}),y.current)return r.createElement(r.Fragment,null,i.map(l=>r.createElement(_,{key:v(l),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:f,mode:c},l)));i=[...i];const N=g.current.map(v),C=d.map(v),I=N.length;for(let l=0;l<I;l++){const p=N[l];C.indexOf(p)===-1&&!o.has(p)&&o.set(p,void 0)}return c==="wait"&&o.size&&(i=[]),o.forEach((l,p)=>{if(C.indexOf(p)!==-1)return;const R=x.get(p);if(!R)return;const P=N.indexOf(p);let w=l;if(!w){const A=()=>{o.delete(p);const M=Array.from(x.keys()).filter(b=>!C.includes(b));if(M.forEach(b=>x.delete(b)),g.current=d.filter(b=>{const S=v(b);return S===p||M.includes(S)}),!o.size){if(h.current===!1)return;u(),n&&n()}};w=r.createElement(_,{key:v(R),isPresent:!1,onExitComplete:A,custom:a,presenceAffectsLayout:f,mode:c},R),o.set(p,w)}i.splice(P,0,w)}),i=i.map(l=>{const p=l.key;return o.has(p)?l:r.createElement(_,{key:v(l),isPresent:!0,presenceAffectsLayout:f,mode:c},l)}),r.createElement(r.Fragment,null,o.size?i:i.map(l=>r.cloneElement(l)))};function re({user:t,header:a,children:s}){const n=r.useRef(null);r.useState(!1);const[m,f]=r.useState(!1),{flash:c}=F().props;r.useEffect(()=>{c.success!==null&&n.current.show({severity:"success",summary:"İşlem Başarılı",detail:c.success}),c.error!==null&&n.current.show({severity:"error",summary:"Hata",detail:c.error})},[c]);const u=()=>{switch(t.role){case"super":return e.jsx(k,{severity:"danger",value:"Super"});case"admin":return e.jsx(k,{severity:"warning",value:"Admin"});case"worker":return e.jsx(k,{severity:"success",value:"Worker"});default:return e.jsx(k,{severity:"help",value:"Central"})}},h=[{name:"Anasayfa",href:route("dashboard"),active:route().current("dashboard"),roles:["super","central","central_salesman","central_contact","central_worker","admin"],icon:"pi pi-home"},{name:"Merkez Çalışanları",href:route("super.central.index"),active:route().current("super.central*"),roles:["super"],icon:"pi pi-users"},{name:"Bayiler",href:route("super.dealers.index"),active:route().current("super.dealers*"),roles:["super"],icon:"pi pi-building"},{name:"Çalışanlar",href:route("super.workers.index"),active:route().current("super.workers*"),roles:["super"],icon:"pi pi-user"},{name:"Ürünler",href:route("super.products.index"),active:route().current("super.products*"),roles:["super"],icon:"pi pi-box"},{name:"Siparişler",href:route("super.orders.index"),active:route().current("super.orders*"),roles:["super"],icon:"pi pi-shopping-cart"},{name:"Hizmetler",href:route("super.services"),active:route().current("super.services"),roles:["super"],icon:"pi pi-wrench"},{name:"Stok Yönetimi",href:route("super.stock-management.index"),active:route().current("super.stock-management*"),roles:["super"],icon:"pi pi-database"},{name:"Müşteriler",href:route("super.customers.index"),active:route().current("super.customers*"),roles:["super"],icon:"pi pi-users"},{name:"Bildirim & SMS",href:route("super.notifySms.index"),active:route().current("super.notifySms*"),roles:["super"],icon:"pi pi-bell"},{name:"Araç Verileri",href:route("super.car.brands.index"),active:route().current("super.car.brands*"),roles:["super"],icon:"pi pi-car"},{name:"Bayiler",href:route("central.dealers.index"),active:route().current("central.dealers*"),roles:["central","central_salesman","central_contact"],icon:"pi pi-building"},{name:"Çalışanlar",href:route("central.workers.index"),active:route().current("central.workers*"),roles:["central","central_salesman","central_contact"],icon:"pi pi-users"},{name:"Ürünler",href:route("central.products.index"),active:route().current("central.products*"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-box"},{name:"Siparişler",href:route("central.orders.index"),active:route().current("central.orders*"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-shopping-cart"},{name:"Hizmetler",href:route("central.services"),active:route().current("central.services"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-wrench"},{name:"Stok Yönetimi",href:route("central.stock-management.index"),active:route().current("central.stock-management*"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-database"},{name:"Müşteriler",href:route("central.customers.index"),active:route().current("central.customers*"),roles:["central","central_salesman","central_contact"],icon:"pi pi-users"},{name:"Siparişler",href:route("dealer.orders"),active:route().current("dealer.orders"),roles:["admin"],icon:"pi pi-shopping-cart"},{name:"Hizmetler",href:route("dealer.services"),active:route().current("dealer.services"),roles:["admin"],icon:"pi pi-wrench"},{name:"Müşteriler",href:route("dealer.customers"),active:route().current("dealer.customers"),roles:["admin"],icon:"pi pi-users"},{name:"Çalışanlar",href:route("dealer.workers.index"),active:route().current("dealer.workers*"),roles:["admin"],icon:"pi pi-user"},{name:"Stok Kayıtları",href:route("dealer.stockRecords"),active:route().current("dealer.stockRecords"),roles:["admin"],icon:"pi pi-database"},{name:"Bayi Ayarları",href:route("dealer.settings"),active:route().current("dealer.settings"),roles:["admin"],icon:"pi pi-cog"},{name:"Anasayfa",href:route("worker.index"),active:route().current("worker.index"),roles:["worker"],icon:"pi pi-home"},{name:"Müşteriler",href:route("worker.customers.index"),active:route().current("worker.customers*"),roles:["worker"],icon:"pi pi-users"},{name:"Hizmetler",href:route("worker.services.index"),active:route().current("worker.services*"),roles:["worker"],icon:"pi pi-wrench"}];return e.jsxs("div",{className:"min-h-screen bg-[#1a1f2c]",children:[e.jsx(O,{ref:n}),e.jsxs("div",{className:"lg:hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-40 bg-[#1e2533]/95 backdrop-blur-xl border-b border-slate-700/50",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:()=>f(!m),className:"p-2 rounded-lg text-[var(--primary-500)] hover:text-white transition-colors flex items-center gap-2",children:e.jsx("i",{className:`pi ${m?"pi-times":"pi-bars"} text-xl`})}),e.jsx("img",{src:"/uploads/olex-logo-yatay.svg",alt:"Olex Films Logo",className:"h-8 w-auto"}),e.jsx("div",{className:"w-10"})]})}),e.jsx("div",{className:"h-14"})]}),e.jsx(q,{children:(m||window.innerWidth>=1024)&&e.jsx(E.div,{initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{type:"spring",stiffness:260,damping:20},className:"fixed top-0 left-0 h-full w-72 bg-[#1e2533]/95 backdrop-blur-xl border-r border-slate-700/50 z-40 overflow-y-auto lg:translate-x-0",children:e.jsxs("div",{className:"p-6",children:[e.jsx(j,{href:route("dashboard"),className:"block mb-8",children:e.jsx("img",{src:"/uploads/olex-logo-yatay.svg",alt:"Olex Films Logo",className:"h-12 w-auto mx-auto"})}),e.jsxs("div",{className:"mb-8 p-4 rounded-xl bg-[#252d3d] border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500 flex items-center justify-center text-white font-medium",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:t.name}),e.jsx("div",{className:"text-gray-400 text-sm",children:t.email})]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"inline-flex items-center gap-1.5",children:[u(),e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"})]})})]}),e.jsx("nav",{className:"space-y-1",children:h.map(({name:d,href:i,active:o,roles:g,icon:x},y)=>g.includes(t.role)||g.includes("*")?e.jsxs(j,{href:i,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${o?"bg-gradient-to-r from-[var(--primary-700)] to-[var(--primary-500)] text-white":"text-gray-400 hover:bg-[#252d3d] hover:text-white"}`,children:[e.jsx("i",{className:`${x} text-lg`}),e.jsx("span",{children:d}),o&&e.jsx(E.div,{layoutId:"activeIndicator",className:"w-1.5 h-1.5 rounded-full bg-white ml-auto"})]},y):null)}),e.jsxs("div",{className:"mt-8 space-y-2",children:[e.jsxs(j,{href:route("profile.edit"),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${route().current("profile.edit")?"bg-gradient-to-r from-[var(--primary-700)] to-[var(--primary-500)] text-white":"text-gray-400 hover:bg-[#252d3d] hover:text-white"}`,children:[e.jsx("i",{className:"pi pi-user text-lg"}),e.jsx("span",{children:"Profil"})]}),e.jsxs(j,{href:route("logout"),method:"post",as:"button",className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-red-500 hover:text-white transition-all duration-200",children:[e.jsx("i",{className:"pi pi-sign-out text-lg"}),e.jsx("span",{children:"Çıkış Yap"})]})]})]})})}),e.jsxs("main",{className:"lg:pl-72 min-h-screen",children:[a&&e.jsx("header",{className:"bg-[#1e2533]/80 backdrop-blur-sm border-b border-slate-700/50 shadow-lg",children:e.jsx("div",{className:" mx-auto py-6 px-4",children:a})}),e.jsx("div",{className:" mx-auto py-6",children:s})]}),m&&e.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 lg:hidden"})]})}export{re as A};
