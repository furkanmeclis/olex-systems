import{r as i,F as ce,j as e,S as de,A as me,c as pe}from"./app-Baq8ApHb.js";import{A as ue}from"./AuthenticatedLayout-oRvzpbZ5.js";import{D as xe}from"./datatable.esm-DI-tZLSL.js";import{C as c}from"./column.esm-DyKR1z4l.js";import{B as s}from"./button.esm-DgT6WZGM.js";import{T as he}from"./tooltip.esm-BXBM_jrJ.js";import{C as fe,c as W}from"./confirmpopup.esm-Cjl4H0Pr.js";import{T as je}from"./toolbar.esm-8WQHbKcv.js";import{D as k}from"./dialog.esm-BzlEms0M.js";import{T as ye}from"./toast.esm-BuJ7Yd3m.js";import{O as ge}from"./overlaypanel.esm-b9xYc2QB.js";import{C as be}from"./checkbox.esm-BmTNB8Vy.js";import{A as ve}from"./avatar.esm-C-4JND52.js";import{u as we}from"./ripple.esm-Bvf-Pmh3.js";import ke from"./Create-42d9w_K0.js";import Ne from"./Update-CAzaVDiP.js";import{B as Se}from"./buttongroup.esm-DweaYPcn.js";/* empty css            */import"./ApplicationLogo-Dr5NYUs-.js";import"./Dropdown-B7NH1tGe.js";import"./transition-CVQR47I-.js";import"./tag.esm-CXHE5cdY.js";import"./index.esm-EdZmLmH6.js";import"./paginator.esm-B0xHBJYv.js";import"./inputnumber.esm-maPPc7jk.js";import"./inputtext.esm-DNF8AOou.js";import"./index.esm-B03aOKBu.js";import"./dropdown.esm-CGY_epL-.js";import"./index.esm-jh-zEQr6.js";import"./index.esm-DTMfxF1B.js";import"./overlayservice.esm-CHJbKesI.js";import"./csstransition.esm-Rb2Ld5o-.js";import"./index.esm-ByBSXWYu.js";import"./index.esm-DF7wB7Of.js";import"./index.esm-743QIRfW.js";import"./index.esm-DCJv3887.js";import"./index.esm-DI_E49JB.js";import"./index.esm-BMbE-3LP.js";import"./index.esm-DgQDTGs2.js";import"./formik.esm-CxAZJmph.js";import"./cloneDeep-DJN0yfLA.js";import"./index.esm-BjHMF_mu.js";import"./blockui.esm-DF9E-dL0.js";import"./message.esm-9hL-0n4-.js";import"./inputswitch.esm-9mj-sH2g.js";import"./password.esm-BCZjHBmD.js";import"./index.esm-D75JJD8k.js";function bt({auth:I,workersAll:U,csrf_token:u,dealer:V}){var A,D,P,E,L,M,_,O,H,R,G,Y;const r=i.useRef(null),g=i.useRef(null);i.useState({global:{value:null,matchMode:ce.CONTAINS}});const[b,f]=i.useState(U),[N,X]=i.useState([]),[Te,S]=i.useState(!1);i.useState("");const[m,j]=i.useState([]),[$,J]=i.useState({}),q=()=>{S(!0),fetch(route("super.dealers.listAll"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}).then(t=>t.json()).then(t=>{X(t.dealers)}).catch(t=>{console.log(t),r.current.show({severity:"error",summary:"Hata",detail:"Bayiler getirilirken bir hata oluştu."})}).finally(()=>{S(!1)})};i.useEffect(()=>{q()},[]);const T=["id","name","dealer_name","email","phone","avatar","active","updated_at","created_at","actions"],Q={id:"ID",name:"Çalışan Adı",avatar:"Avatar Resmi",dealer_name:"Bayi Adı",active:"Üyelik Durumu",phone:"Telefon",role:"Rol",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[n,Z]=we(T,"super-workers-table-columns"),[C,v]=i.useState(!1),[z,w]=i.useState(!1),[ee,x]=i.useState(!1),[a,y]=i.useState({}),te=()=>e.jsx(e.Fragment,{children:e.jsx(je,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(s,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Çalışan Ekle",tooltipOptions:{position:"top"},onClick:()=>{v(!0)},className:"mr-2"}),e.jsx(s,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{g.current.toggle(t)},className:"mr-2"}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(s,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>j([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(s,{size:"small",onClick:t=>{W({target:t.currentTarget,message:`Seçilen ${m.length} çalışanı silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let p=route("super.workers.multipleDestroy");fetch(p,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},body:JSON.stringify({workerIds:m.map(o=>o.id),dealerId:V.id})}).then(async o=>{let d=await o.json();o.status===404?r.current.show({severity:"error",summary:"Hata",detail:d.message}):o.status===500?r.current.show({severity:"warning",summary:"Hata",detail:d.message}):o.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:d.message}),f(b.map(l=>m.map(h=>h.id).includes(l.id)?null:l).filter(Boolean)))}).catch(o=>{console.log(o),r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${m.length} çalışanı Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col items-center justify-center",children:m.length>0&&e.jsxs("span",{children:[m.length," çalışan seçildi."]})})})})}),ae=t=>e.jsx(s,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:pe("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),ie=te(),B=(t,p,o=()=>{})=>{const d=()=>{fetch(route("super.workers.destroy",p),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}).then(async l=>{let h=await l.json();l.status===404?r.current.show({severity:"error",summary:"Hata",detail:h.message}):l.status===500?r.current.show({severity:"warning",summary:"Hata",detail:h.message}):l.status===200&&(o(),r.current.show({severity:"success",summary:"Başarılı",detail:h.message}),f(b.map(K=>K.id!==p?K:null).filter(Boolean)))}).catch(l=>{console.log(l),r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j(m.filter(l=>l.id!==p?l:null).filter(Boolean))})};W({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:d,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[le,se]=i.useState(e.jsx(e.Fragment,{})),[re,ne]=i.useState(e.jsx(e.Fragment,{})),F=t=>{J(t),w(!0)},oe=t=>{y(t),x(!0)};return e.jsxs(ue,{user:I.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Çalışanlar"}),children:[e.jsx(de,{title:"Çalışanlar"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(e.Fragment,{children:[e.jsx(he,{target:".custom-target-icon"}),e.jsx(fe,{}),e.jsx(ye,{ref:r}),e.jsx(ge,{ref:g,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[T.map((t,p)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(be,{inputId:t,checked:n.includes(t),onChange:o=>{let d=[...n];o.checked?d.push(t):d=d.filter(l=>l!==t),Z(d)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:Q[t]})]},p)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(s,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{g.current.hide()}})})]})]})}),e.jsxs(xe,{dragSelection:!0,value:b,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filterDisplay:"row",filters:{name:{value:"",matchMode:"contains"},email:{value:"",matchMode:"contains"},phone:{value:"",matchMode:"contains"},"dealer.company.company_name":{value:"",matchMode:"contains"}},loading:!1,selectionMode:null,selection:m,onSelectionChange:t=>j(t.value),globalFilterFields:["name","email","phone"],header:ie,emptyMessage:"Çalışan bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(c,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),n.includes("id")&&e.jsx(c,{field:"id",sortable:!0,header:"#"}),n.includes("name")&&e.jsx(c,{field:"name",filter:!0,filterPlaceholder:"Ada Göre Filtreleyin",sortable:!0,header:"Çalışan Adı"}),n.includes("dealer_name")&&e.jsx(c,{field:"dealer.company.company_name",filter:!0,filterPlaceholder:"Bayi Adına Göre Filtreleyin",sortable:!0,header:"Bayi Adı",body:t=>e.jsx(s,{label:t.dealer.name,link:!0,size:"small",onClick:()=>{me.visit(route("super.dealers.show",t.dealer.id))}})}),n.includes("email")&&e.jsx(c,{field:"email",filter:!0,filterPlaceholder:"Emaile Göre Filtreleyin",sortable:!0,header:"Email"}),n.includes("phone")&&e.jsx(c,{field:"phone",filter:!0,filterPlaceholder:"Telefona Göre Filtreleyin",sortable:!0,header:"Telefon No"}),n.includes("avatar")&&e.jsx(c,{field:"image",header:"Avatar",body:t=>e.jsx(ve,{image:t.avatar,shape:"circle",size:"large"})}),n.includes("active")&&e.jsx(c,{field:"active",header:"Durumu",dataType:"boolean",body:ae}),n.includes("created_at")&&e.jsx(c,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),n.includes("updated_at")&&e.jsx(c,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),n.includes("actions")&&e.jsx(c,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(s,{icon:"pi pi-eye",size:"small",tooltip:"Çalışanı Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{oe(t)}}),e.jsx(s,{icon:"pi pi-pencil",size:"small",tooltip:"Çalışanı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{F(t)}}),e.jsx(s,{icon:"pi pi-times",tooltip:"Çalışanı Sil",tooltipOptions:{position:"top"},size:"small",onClick:p=>{B(p,t.id)},severity:"danger"})]})})]}),e.jsx(k,{header:"Yeni Çalışan Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>v(!1),maximizable:!0,visible:C,footer:le,children:e.jsx(ke,{dealerId:1,dealers:N,onHide:()=>v(!1),csrf_token:u,toast:r,setWorkers:f,addModal:C,setAddModalFooter:se})}),e.jsx(k,{header:"Çalışanı Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>w(!1),maximizable:!0,visible:z,footer:re,children:e.jsx(Ne,{updateModal:z,dealers:N,worker:$,csrf_token:u,toast:r,onHide:()=>w(!1),setWorkers:f,setUpdateModalFooter:ne})}),e.jsx(k,{header:"Çalışanı Görüntüle",style:{width:"40vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>x(!1),maximizable:!0,visible:ee,children:a&&e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-lg text-white font-semibold border-b pb-2",children:"Çalışan Bilgileri"})}),e.jsx("div",{className:"flex flex-col gap-y-2 mb-3",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Çalışan Adı:"}),e.jsx("span",{children:a.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:a.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Telefon:"}),e.jsx("span",{children:a.phone})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Üyelik Durumu:"}),e.jsx("span",{children:a.active?"Aktif":"DeAktif"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Eklenme Tarihi:"}),e.jsx("span",{children:new Date(a.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Güncellenme Tarihi:"}),e.jsx("span",{children:new Date(a.updated_at).toLocaleString()})]})]})}),e.jsx("hr",{}),e.jsx("div",{className:"flex justify-between items-center mt-1",children:e.jsx("h3",{className:"text-lg text-white font-semibold border-b pb-2",children:"Bayi Bilgileri"})}),e.jsx("div",{className:"flex flex-col gap-y-2 mb-3",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Adı:"}),e.jsx("span",{children:(D=(A=a.dealer)==null?void 0:A.company)==null?void 0:D.company_name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Email:"}),e.jsx("span",{children:(E=(P=a.dealer)==null?void 0:P.company)==null?void 0:E.company_email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Telefon:"}),e.jsx("span",{children:(M=(L=a.dealer)==null?void 0:L.company)==null?void 0:M.company_phone})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Adı:"}),e.jsx("span",{children:(_=a.dealer)==null?void 0:_.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Email:"}),e.jsx("span",{children:(O=a.dealer)==null?void 0:O.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Telefon:"}),e.jsx("span",{children:(H=a.dealer)==null?void 0:H.phone})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Bayi Yönetici Üyelik Durumu:"}),e.jsx("span",{children:(R=a.dealer)!=null&&R.active?"Aktif":"DeAktif"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Eklenme Tarihi:"}),e.jsx("span",{children:new Date((G=a==null?void 0:a.dealer)==null?void 0:G.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Güncellenme Tarihi:"}),e.jsx("span",{children:new Date((Y=a==null?void 0:a.dealer)==null?void 0:Y.updated_at).toLocaleString()})]})]})}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs(Se,{children:[e.jsx(s,{label:"Kapat",icon:"pi pi-times",severity:"info",size:"small",onClick:()=>{x(!1),y({})}}),e.jsx(s,{label:"Hizmet Kayıtları",icon:"pi pi-file",size:"small",severity:"help",onClick:()=>{}}),e.jsx(s,{label:"Düzenle",icon:"pi pi-pencil",size:"small",severity:"warning",onClick:t=>{x(!1),y({}),F(a)}}),e.jsx(s,{label:"Sil",icon:"pi pi-trash",size:"small",severity:"danger",onClick:t=>{B(t,a.id,()=>{x(!1),y({})})}})]})})]})})})]})})})})]})}export{bt as default};
