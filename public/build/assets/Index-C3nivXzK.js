import{r as i,F as ue,j as e,a as pe,c as ge}from"./app-CjY0koJm.js";import{A as he}from"./AuthenticatedLayout-qfnlzVqW.js";import{D as B}from"./datatable.esm-TfRN3DcD.js";import{C as o}from"./column.esm-D5IAkLrW.js";import{I as N}from"./inputtext.esm-qJywbp9S.js";import{I as ye}from"./image.esm-DY0GZfY9.js";import{B as d}from"./button.esm-Co0yB8O6.js";import{T as fe}from"./tooltip.esm-BKGfpTeG.js";import{C as xe,c as Y}from"./confirmpopup.esm-DBcbcHh_.js";import{T as A}from"./toolbar.esm-CiDcsaJk.js";import{D as C}from"./dialog.esm-LFO1c7y6.js";import{T as je}from"./toast.esm-zcwlkn4p.js";import{O as ve}from"./overlaypanel.esm-Bx0XgGvR.js";import{C as we}from"./checkbox.esm-CKFIkJQE.js";import Ce from"./Create-BNmPpg3s.js";import be from"./Update-BARiyAUj.js";import Se from"./ProductCodes-D26Cwnkg.js";import"./ApplicationLogo-DZPKim-0.js";import"./Dropdown-Uwv0207t.js";import"./transition-DKW0-CMv.js";import"./tag.esm-FoIDqgb6.js";import"./ripple.esm-DUcKYDL8.js";import"./index.esm-Cl4mSwD1.js";import"./paginator.esm-mQp3hbj7.js";import"./inputnumber.esm-_Q-w1U-T.js";import"./index.esm-D7V0RoJ9.js";import"./dropdown.esm-CUlx9ky0.js";import"./index.esm-vVuahSer.js";import"./index.esm-xP5MTllx.js";import"./overlayservice.esm-opcBj_Qj.js";import"./csstransition.esm-zB_j87LA.js";import"./index.esm-yqYviL6l.js";import"./index.esm-CwIwGKrq.js";import"./index.esm-CcjZTtWT.js";import"./index.esm-7U-gajNu.js";import"./index.esm-DMXiSHjF.js";import"./index.esm-CjSVUSJN.js";import"./index.esm-LOycHBtu.js";import"./inputtextarea.esm-DSUoc1th.js";import"./blockui.esm-B1s-mrsB.js";import"./formik.esm-BAD9kfFK.js";import"./_baseClone-BgPU1wOP.js";import"./index.esm-Bc8FANJz.js";import"./message.esm-C6mVGMUj.js";import"./inputswitch.esm-5EIK00b1.js";import"./chips.esm-C2nVaj2t.js";import"./divider.esm-CDdZ1s9R.js";function xt({auth:g,productsAll:I,categoriesAll:G,csrf_token:p}){const r=i.useRef(null),b=i.useRef(null),[z,U]=i.useState({global:{value:null,matchMode:ue.CONTAINS}});i.useState(!1);const[P,_]=i.useState(""),[m,f]=i.useState([]),[J,X]=i.useState({}),[V,x]=i.useState(!1),[j,v]=i.useState(G),[w,h]=i.useState(I),[H,O]=i.useState(""),K=["id","sku","name","image","price","category","warranty","active","updated_at","created_at","actions"],$={id:"ID",sku:"Stok Kodu",name:"Ürün Adı",image:"Ürün Resmi",price:"Ürün Fiyatı",category:"Kategori",warranty:"Garanti Süresi",active:"Ürün Durumu",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[c,q]=i.useState(localStorage.getItem("selectedColumnsForProductsTable")?JSON.parse(localStorage.getItem("selectedColumnsForProductsTable")):K),[E,S]=i.useState(!1),[R,F]=i.useState(!1),[D,T]=i.useState(!1),[Q,W]=i.useState({}),[Z,ee]=i.useState(e.jsx(e.Fragment,{}));i.useEffect(()=>{localStorage.setItem("selectedColumnsForProductsTable",JSON.stringify(c))},[c]);const k=(t,a=!1)=>{const s=a?t:t.target.value;let l={...z};l.global.value=s,U(l),_(s)},te=()=>e.jsx(e.Fragment,{children:e.jsx(A,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Ürün Ekle",tooltipOptions:{position:"top"},onClick:()=>{S(!0)},className:"mr-2"}),e.jsx(d,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{b.current.toggle(t)},className:"mr-2"}),e.jsx(d,{icon:"pi pi-sitemap",size:"small",severity:"help",tooltip:"Kategoriler",tooltipOptions:{position:"top"},onClick:()=>{x(!0)},className:"mr-2"}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>f([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(d,{size:"small",onClick:t=>{Y({target:t.currentTarget,message:`Seçilen ${m.length} ürünü silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let a=route("central.products.multipleDestroy");fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({productIds:m.map(s=>s.id)})}).then(async s=>{let l=await s.json();s.status===404?r.current.show({severity:"error",summary:"Hata",detail:l.message}):s.status===500?r.current.show({severity:"warning",summary:"Hata",detail:l.message}):s.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:l.message}),h(w.map(y=>m.map(n=>n.id).includes(y.id)?null:y).filter(Boolean)))}).catch(s=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{f([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${m.length} Ürünü Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:m.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[m.length," ürün seçildi."]})})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(N,{size:"small",value:P,onChange:k,placeholder:"Ürünlerde Arama Yapın"})]}),P!==""&&e.jsx(d,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>k("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),ae=t=>e.jsx(d,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:ge("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),se=te(),L=(t,a,s="product")=>{let l=s==="category";const y=()=>{l?fetch(route("central.categories.delete",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async n=>{let u=await n.json();n.status===404?r.current.show({severity:"error",summary:"Hata",detail:u.message}):n.status===500?r.current.show({severity:"warning",summary:"Hata",detail:u.message}):n.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:u.message}),h(u.products),v(u.categories))}).catch(n=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{}):fetch(route("central.products.destroy",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async n=>{let u=await n.json();n.status===404?r.current.show({severity:"error",summary:"Hata",detail:u.message}):n.status===500?r.current.show({severity:"warning",summary:"Hata",detail:u.message}):n.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:u.message}),h(w.map(M=>M.id!==a?M:null).filter(Boolean)))}).catch(n=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{f(m.filter(n=>n.id!==a?n:null).filter(Boolean))})};Y({target:t.currentTarget,message:l?"Kategoriyi silmek istediğinize emin misiniz?":"Ürünü silmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:y,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},re=()=>{fetch(route("central.categories.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({name:H})}).then(async t=>{let a=await t.json();t.status===404?r.current.show({severity:"error",summary:"Hata",detail:a.message}):t.status===500?r.current.show({severity:"warning",summary:"Hata",detail:a.message}):t.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:a.message}),v(a.categories))}).catch(t=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{O("")})},ie=t=>{fetch(route("central.categories.update",t.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({name:t.name})}).then(async a=>{let s=await a.json();a.status===404?r.current.show({severity:"error",summary:"Hata",detail:s.message}):a.status===500?r.current.show({severity:"warning",summary:"Hata",detail:s.message}):a.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:s.message}),h(s.products),v(s.categories))}).catch(a=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{x(!1)})},[oe,le]=i.useState(e.jsx(e.Fragment,{})),[ne,ce]=i.useState(e.jsx(e.Fragment,{})),de=t=>{X(t),F(!0)},me=t=>{W(t),T(!0)};return e.jsxs(he,{user:g.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Ürünler"}),children:[e.jsx(pe,{title:"Ürünler"}),e.jsx(fe,{target:".custom-target-icon"}),e.jsx(xe,{}),e.jsx(je,{ref:r}),e.jsx(ve,{ref:b,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[K.map((t,a)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(we,{inputId:t,checked:c.includes(t),onChange:s=>{let l=[...c];s.checked?l.push(t):l=l.filter(y=>y!==t),q(l)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:$[t]})]},a)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(d,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{b.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(B,{value:w,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:z,loading:!1,selectionMode:null,selection:m,onSelectionChange:t=>f(t.value),globalFilterFields:["name","category","warranty"],header:se,emptyMessage:"Ürün bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(o,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),c.includes("id")&&e.jsx(o,{field:"id",sortable:!0,header:"#"}),c.includes("sku")&&e.jsx(o,{field:"sku",sortable:!0,header:"SKU"}),c.includes("name")&&e.jsx(o,{field:"name",header:"Ürün Adı"}),c.includes("image")&&e.jsx(o,{field:"image",header:"Ürün Resmi",body:t=>e.jsx(ye,{src:`${t.image}`,preview:!0,style:{width:"6rem",borderRadius:"1rem"},alt:t.image,className:"w-[6rem] shadow-2 rounded-lg"})}),c.includes("price")&&g.user.role==="super"&&e.jsx(o,{field:"price",sortable:!0,header:"Ürün Fiyatı",body:t=>e.jsxs("span",{children:[t.price," $"]})}),c.includes("category")&&e.jsx(o,{field:"category",header:"Kategori"}),c.includes("warranty")&&e.jsx(o,{field:"warranty",header:"Garanti Süresi"}),c.includes("active")&&e.jsx(o,{field:"active",header:"Ürün Durumu",dataType:"boolean",body:ae}),c.includes("created_at")&&e.jsx(o,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),c.includes("updated_at")&&e.jsx(o,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),c.includes("actions")&&e.jsx(o,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(d,{icon:"pi pi-qrcode",size:"small",tooltip:"Ürün Kodları",onClick:()=>{me(t)},tooltipOptions:{position:"top"},severity:"success"}),e.jsx(d,{icon:"pi pi-pencil",visible:g.user.role==="super",size:"small",tooltip:"Ürünü Düzenle",onClick:()=>{de(t)},tooltipOptions:{position:"top"},severity:"warning"}),e.jsx(d,{icon:"pi pi-times",visible:g.user.role==="super",tooltip:"Ürünü Sil",tooltipOptions:{position:"top"},size:"small",onClick:a=>{L(a,t.id)},severity:"danger"})]})})]}),e.jsxs(C,{header:"Kategoriler",maximizable:!0,position:"top",visible:V,style:{width:"50vw"},onHide:()=>x(!1),children:[e.jsx(A,{start:()=>e.jsx("p",{children:"Yeni Kategori Ekle"}),center:()=>e.jsx(e.Fragment,{children:e.jsx(N,{size:"small",placeholder:"Yeni Kategori Adı",value:H,onChange:t=>O(t.target.value)})}),end:()=>e.jsx(e.Fragment,{children:e.jsx(d,{icon:"pi pi-save",onClick:()=>{re()},size:"small",severity:"success",tooltip:"Yeni Kategori Ekle"})})}),e.jsxs(B,{value:j,removableSort:!0,editMode:"row",onRowEditComplete:t=>{let a=[...j],{newData:s,index:l}=t;ie(s),a[l]=s,v(a)},children:[e.jsx(o,{field:"id",sortable:!0,header:"ID"}),e.jsx(o,{field:"name",sortable:!0,header:"Kategori Adı",editor:t=>e.jsx(N,{type:"text",size:"small",value:t.value,onChange:a=>t.editorCallback(a.target.value)})}),e.jsx(o,{header:"Ürün Sayısı",body:t=>{const a=w.filter(s=>s.category===t.name).length;return e.jsx(d,{label:a+" Ürün",link:!0,onClick:()=>{k(t.name,!0),x(!1)}})}}),e.jsx(o,{header:"Düzenle",rowEditor:!0}),e.jsx(o,{header:"Sil",body:t=>e.jsx(e.Fragment,{children:t.id!==0&&e.jsx(d,{icon:"pi pi-times",className:"ml-2",tooltip:"Kategoriyi Sil",tooltipOptions:{position:"top"},size:"small",onClick:a=>{L(a,t.id,"category")},severity:"danger"})})})]})]}),e.jsx(C,{header:"Yeni Ürün Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>S(!1),maximizable:!0,visible:E,footer:oe,children:e.jsx(Ce,{addModal:E,categories:j,auth:g,csrf_token:p,toast:r,onHide:()=>S(!1),setProducts:h,setAddModalFooter:le})}),e.jsx(C,{header:"Ürünü Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>F(!1),maximizable:!0,visible:R,footer:ne,children:e.jsx(be,{updateModal:R,categories:j,auth:g,product:J,csrf_token:p,toast:r,onHide:()=>F(!1),setProducts:h,setUpdateModalFooter:ce})}),e.jsx(C,{header:"Ürün Kodları",style:{width:"70vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>T(!1),maximizable:!0,visible:D,footer:Z,children:e.jsx(Se,{productCodesModal:D,product:Q,csrf_token:p,toast:r,onHide:()=>T(!1),setFooter:ee})})]})})})]})}export{xt as default};
