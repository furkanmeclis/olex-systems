import{r as i,F as me,j as e,a as ue,c as pe}from"./app-BkrWYZtC.js";import{A as he}from"./AuthenticatedLayout-2L1z-SVm.js";import{D as E}from"./datatable.esm-yDvZPKI4.js";import{C as o}from"./column.esm-hvUB5b8f.js";import{I as M}from"./inputtext.esm-Bm4L0Hw3.js";import{I as ye}from"./image.esm-CntFV5KP.js";import{B as d}from"./button.esm-e90mhoT9.js";import{T as ge}from"./tooltip.esm-BZpDGtoz.js";import{C as fe,c as D}from"./confirmpopup.esm-C67eBMmD.js";import{T as R}from"./toolbar.esm-BuaHRo4m.js";import{D as w}from"./dialog.esm-BnfPzP_r.js";import{T as xe}from"./toast.esm-CFYgxnmH.js";import{O as je}from"./overlaypanel.esm-DYWj8HWn.js";import{C as ve}from"./checkbox.esm-CDijuniZ.js";import we from"./Create-CQf81Y2R.js";import Se from"./Update-DruErIfX.js";import Ce from"./ProductCodes-BQC1h80b.js";import"./ApplicationLogo-DQw6Nnsr.js";import"./Dropdown-CLhlELt6.js";import"./transition-R0PNTLsy.js";import"./tag.esm-BAKrTJ9r.js";import"./ripple.esm-BZzQmJ3T.js";import"./index.esm-CyRMFN6c.js";import"./paginator.esm-VnrZA1X8.js";import"./inputnumber.esm-B7Yhw0Sw.js";import"./index.esm-fSEY-Mt5.js";import"./dropdown.esm-BJhm_Tk0.js";import"./index.esm-Ctk2V5pl.js";import"./index.esm-8o80j0rC.js";import"./overlayservice.esm-hBC-YJAC.js";import"./csstransition.esm-1psgkuxi.js";import"./index.esm-But8BROI.js";import"./index.esm-BgLGqj4p.js";import"./index.esm-yJQR7V9A.js";import"./index.esm-CzFE8yhM.js";import"./index.esm-DgsMyShD.js";import"./index.esm-DxH3kaKN.js";import"./index.esm-C4UCk0Ui.js";import"./inputtextarea.esm-B89aG31T.js";import"./index.esm-BQZ5TbbX.js";import"./formik.esm-D8qEp_UV.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-DtB68Usi.js";import"./inputswitch.esm-Dkr-TzYE.js";import"./chips.esm-CvRVp-3k.js";import"./divider.esm-D7fN9uhj.js";function ft({auth:L,productsAll:B,categoriesAll:A,csrf_token:p}){const s=i.useRef(null),S=i.useRef(null),[G,Y]=i.useState({global:{value:null,matchMode:me.CONTAINS}});i.useState(!1);const[be,I]=i.useState(""),[m,g]=i.useState([]),[U,_]=i.useState({}),[J,f]=i.useState(!1),[x,j]=i.useState(A),[v,h]=i.useState(B),[k,T]=i.useState(""),N=["id","sku","name","image","price","category","warranty","active","updated_at","created_at","actions"],X={id:"ID",sku:"Stok Kodu",name:"Ürün Adı",image:"Ürün Resmi",price:"Ürün Fiyatı",category:"Kategori",warranty:"Garanti Süresi",active:"Ürün Durumu",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[c,V]=i.useState(localStorage.getItem("selectedColumnsForProductsTable")?JSON.parse(localStorage.getItem("selectedColumnsForProductsTable")):N),[P,C]=i.useState(!1),[z,b]=i.useState(!1),[H,F]=i.useState(!1),[$,q]=i.useState({}),[Q,W]=i.useState(e.jsx(e.Fragment,{}));i.useEffect(()=>{localStorage.setItem("selectedColumnsForProductsTable",JSON.stringify(c))},[c]);const Z=(t,a=!1)=>{const r=a?t:t.target.value;let l={...G};l.global.value=r,Y(l),I(r)},ee=()=>e.jsx(e.Fragment,{children:e.jsx(R,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Ürün Ekle",tooltipOptions:{position:"top"},onClick:()=>{C(!0)},className:"mr-2"}),e.jsx(d,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{S.current.toggle(t)},className:"mr-2"}),e.jsx(d,{icon:"pi pi-sitemap",size:"small",severity:"help",tooltip:"Kategoriler",tooltipOptions:{position:"top"},onClick:()=>{f(!0)},className:"mr-2"}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>g([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(d,{size:"small",onClick:t=>{D({target:t.currentTarget,message:`Seçilen ${m.length} ürünü silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let a=route("super.products.multipleDestroy");fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({productIds:m.map(r=>r.id)})}).then(async r=>{let l=await r.json();r.status===404?s.current.show({severity:"error",summary:"Hata",detail:l.message}):r.status===500?s.current.show({severity:"warning",summary:"Hata",detail:l.message}):r.status===200&&(s.current.show({severity:"success",summary:"Başarılı",detail:l.message}),h(v.map(y=>m.map(n=>n.id).includes(y.id)?null:y).filter(Boolean)))}).catch(r=>{s.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{g([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${m.length} Ürünü Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:m.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[m.length," ürün seçildi."]})})})})}),te=t=>e.jsx(d,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:pe("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),ae=ee(),O=(t,a,r="product")=>{let l=r==="category";const y=()=>{l?fetch(route("super.categories.delete",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async n=>{let u=await n.json();n.status===404?s.current.show({severity:"error",summary:"Hata",detail:u.message}):n.status===500?s.current.show({severity:"warning",summary:"Hata",detail:u.message}):n.status===200&&(s.current.show({severity:"success",summary:"Başarılı",detail:u.message}),h(u.products),j(u.categories))}).catch(n=>{s.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{}):fetch(route("super.products.destroy",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async n=>{let u=await n.json();n.status===404?s.current.show({severity:"error",summary:"Hata",detail:u.message}):n.status===500?s.current.show({severity:"warning",summary:"Hata",detail:u.message}):n.status===200&&(s.current.show({severity:"success",summary:"Başarılı",detail:u.message}),h(v.map(K=>K.id!==a?K:null).filter(Boolean)))}).catch(n=>{s.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{g(m.filter(n=>n.id!==a?n:null).filter(Boolean))})};D({target:t.currentTarget,message:l?"Kategoriyi silmek istediğinize emin misiniz?":"Ürünü silmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:y,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},re=()=>{fetch(route("super.categories.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({name:k})}).then(async t=>{let a=await t.json();t.status===404?s.current.show({severity:"error",summary:"Hata",detail:a.message}):t.status===500?s.current.show({severity:"warning",summary:"Hata",detail:a.message}):t.status===200&&(s.current.show({severity:"success",summary:"Başarılı",detail:a.message}),j(a.categories))}).catch(t=>{s.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{T("")})},se=t=>{fetch(route("super.categories.update",t.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({name:t.name})}).then(async a=>{let r=await a.json();a.status===404?s.current.show({severity:"error",summary:"Hata",detail:r.message}):a.status===500?s.current.show({severity:"warning",summary:"Hata",detail:r.message}):a.status===200&&(s.current.show({severity:"success",summary:"Başarılı",detail:r.message}),h(r.products),j(r.categories))}).catch(a=>{s.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{f(!1)})},[ie,oe]=i.useState(e.jsx(e.Fragment,{})),[le,ne]=i.useState(e.jsx(e.Fragment,{})),ce=t=>{_(t),b(!0)},de=t=>{q(t),F(!0)};return e.jsxs(he,{user:L.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Ürünler"}),children:[e.jsx(ue,{title:"Ürünler"}),e.jsx(ge,{target:".custom-target-icon"}),e.jsx(fe,{}),e.jsx(xe,{ref:s}),e.jsx(je,{ref:S,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[N.map((t,a)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(ve,{inputId:t,checked:c.includes(t),onChange:r=>{let l=[...c];r.checked?l.push(t):l=l.filter(y=>y!==t),V(l)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:X[t]})]},a)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(d,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{S.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(E,{value:v,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filterDisplay:"row",filters:{sku:{value:"",matchMode:"contains"},name:{value:"",matchMode:"contains"},category:{value:"",matchMode:"contains"},warranty:{value:"",matchMode:"contains"},price:{value:"",matchMode:"contains"}},loading:!1,selectionMode:null,selection:m,onSelectionChange:t=>g(t.value),globalFilterFields:["name","category","warranty"],header:ae,emptyMessage:"Ürün bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(o,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),c.includes("id")&&e.jsx(o,{field:"id",sortable:!0,header:"#"}),c.includes("sku")&&e.jsx(o,{field:"sku",filter:!0,filterPlaceholder:"SKU'ya Göre Filtreleyin",sortable:!0,header:"SKU"}),c.includes("name")&&e.jsx(o,{field:"name",filter:!0,filterPlaceholder:"Ürün Adına Göre Filtreleyin",header:"Ürün Adı"}),c.includes("image")&&e.jsx(o,{field:"image",header:"Ürün Resmi",body:t=>e.jsx(ye,{src:`${t.image}`,preview:!0,style:{width:"6rem",borderRadius:"1rem"},alt:t.image,className:"w-[6rem] shadow-2 rounded-lg"})}),c.includes("price")&&e.jsx(o,{field:"price",sortable:!0,header:"Ürün Fiyatı",filter:!0,filterPlaceholder:"Ürün Fiyatına Göre Filtreleyin",body:t=>e.jsxs("span",{children:[t.price," $"]})}),c.includes("category")&&e.jsx(o,{field:"category",filter:!0,filterPlaceholder:"Kategoriye Göre Filtreleyin",header:"Kategori"}),c.includes("warranty")&&e.jsx(o,{field:"warranty",filter:!0,filterPlaceholder:"Garanti Süresine Göre Filtreleyin",header:"Garanti Süresi"}),c.includes("active")&&e.jsx(o,{field:"active",header:"Ürün Durumu",dataType:"boolean",body:te}),c.includes("created_at")&&e.jsx(o,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),c.includes("updated_at")&&e.jsx(o,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),c.includes("actions")&&e.jsx(o,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(d,{icon:"pi pi-qrcode",size:"small",tooltip:"Ürün Kodları",onClick:()=>{de(t)},tooltipOptions:{position:"top"},severity:"success"}),e.jsx(d,{icon:"pi pi-pencil",size:"small",tooltip:"Ürünü Düzenle",onClick:()=>{ce(t)},tooltipOptions:{position:"top"},severity:"warning"}),e.jsx(d,{icon:"pi pi-times",tooltip:"Ürünü Sil",tooltipOptions:{position:"top"},size:"small",onClick:a=>{O(a,t.id)},severity:"danger"})]})})]}),e.jsxs(w,{header:"Kategoriler",maximizable:!0,position:"top",visible:J,style:{width:"50vw"},onHide:()=>f(!1),children:[e.jsx(R,{start:()=>e.jsx("p",{children:"Yeni Kategori Ekle"}),center:()=>e.jsx(e.Fragment,{children:e.jsx(M,{size:"small",placeholder:"Yeni Kategori Adı",value:k,onChange:t=>T(t.target.value)})}),end:()=>e.jsx(e.Fragment,{children:e.jsx(d,{icon:"pi pi-save",onClick:()=>{re()},size:"small",severity:"success",tooltip:"Yeni Kategori Ekle"})})}),e.jsxs(E,{value:x,removableSort:!0,editMode:"row",onRowEditComplete:t=>{let a=[...x],{newData:r,index:l}=t;se(r),a[l]=r,j(a)},children:[e.jsx(o,{field:"id",sortable:!0,header:"ID"}),e.jsx(o,{field:"name",sortable:!0,header:"Kategori Adı",editor:t=>e.jsx(M,{type:"text",size:"small",value:t.value,onChange:a=>t.editorCallback(a.target.value)})}),e.jsx(o,{header:"Ürün Sayısı",body:t=>{const a=v.filter(r=>r.category===t.name).length;return e.jsx(d,{label:a+" Ürün",link:!0,onClick:()=>{Z(t.name,!0),f(!1)}})}}),e.jsx(o,{header:"Düzenle",rowEditor:!0}),e.jsx(o,{header:"Sil",body:t=>e.jsx(e.Fragment,{children:t.id!==0&&e.jsx(d,{icon:"pi pi-times",className:"ml-2",tooltip:"Kategoriyi Sil",tooltipOptions:{position:"top"},size:"small",onClick:a=>{O(a,t.id,"category")},severity:"danger"})})})]})]}),e.jsx(w,{header:"Yeni Ürün Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>C(!1),maximizable:!0,visible:P,footer:ie,children:e.jsx(we,{addModal:P,categories:x,csrf_token:p,toast:s,onHide:()=>C(!1),setProducts:h,setAddModalFooter:oe})}),e.jsx(w,{header:"Ürünü Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>b(!1),maximizable:!0,visible:z,footer:le,children:e.jsx(Se,{updateModal:z,categories:x,product:U,csrf_token:p,toast:s,onHide:()=>b(!1),setProducts:h,setUpdateModalFooter:ne})}),e.jsx(w,{header:"Ürün Kodları",style:{width:"70vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>F(!1),maximizable:!0,visible:H,footer:Q,children:e.jsx(Ce,{productCodesModal:H,product:$,csrf_token:p,toast:s,onHide:()=>F(!1),setFooter:W})})]})})})]})}export{ft as default};
