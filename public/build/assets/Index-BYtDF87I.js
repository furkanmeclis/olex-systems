import{r as o,F as N,j as e,L as T}from"./app-DxDaNuwc.js";import{A as P}from"./AuthenticatedLayout-BdNvT29y.js";import{D as C}from"./datatable.esm-DxBnjTjz.js";import{C as s}from"./column.esm-yzpK49Ap.js";import{B as c}from"./button.esm-Bxu_xj3y.js";import{T as L}from"./tooltip.esm-GXVv6zQ0.js";import{C as M}from"./confirmpopup.esm-BLYYyUJD.js";import{D as K}from"./dialog.esm-Bh6TVNw1.js";import{T as R}from"./toast.esm-HMLeBv3n.js";import{T as p}from"./tag.esm-BQ6kz8cH.js";import{D as A}from"./dropdown.esm--AN9BDCh.js";import{D as B}from"./divider.esm-D9Kw8Aid.js";import"./Dropdown-DInTnht4.js";import"./motion-Div62UW1.js";import"./ripple.esm-CN3IMNQy.js";import"./index.esm-CTODs3I_.js";import"./paginator.esm-DViuf6lZ.js";import"./inputnumber.esm-BCm-KQ9q.js";import"./inputtext.esm-D8gDRWlw.js";import"./index.esm-CQk--BkZ.js";import"./index.esm-vt_AVzPH.js";import"./index.esm-BtXPxCRF.js";import"./index.esm-AzyeLgjY.js";import"./index.esm-DMrmqchS.js";import"./index.esm-DcoxjD9O.js";import"./overlayservice.esm-CFfyJ6sK.js";import"./csstransition.esm-BUvjeB1Z.js";import"./index.esm-BNFL2t34.js";import"./index.esm-BSam72xK.js";import"./index.esm-BpuqwZ6s.js";import"./TransitionGroup-BXFAywI0.js";import"./index.esm-B_0QCUno.js";function xe({auth:x,recordsAll:h,csrf_token:f,statuses:y}){const i=o.useRef(null);o.useState({global:{value:null,matchMode:N.CONTAINS}});const[m,n]=o.useState(!1),[l,j]=o.useState([]),[g,u]=o.useState(!1);o.useState("");const[b,v]=o.useState(h),w=t=>e.jsx(A,{value:t.value,options:y,onChange:a=>t.editorCallback(a.value),optionLabel:"label",optionValue:"value",placeholder:"Select a Status",itemTemplate:a=>e.jsx(p,{value:a.label,severity:a.severity})}),S=t=>e.jsx(p,{value:t.status_label,severity:t.status_severity}),k=async t=>{const a={id:t.newData.id,quantity:t.newData.quantity,status:t.newData.status};u(!0),fetch(route("super.stock-management.update",a.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":f},body:JSON.stringify(a)}).then(r=>r.json()).then(r=>{r.status?(i.current.show({severity:"success",summary:"Başarılı",detail:r.message}),v(r.records)):i.current.show({severity:"error",summary:"Hata",detail:r.message})}).catch(r=>{i.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u(!1)})};return e.jsxs(P,{user:x.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Stok Kayıtları"}),children:[e.jsx(T,{title:"Stok Kayıtları"}),e.jsx(L,{target:".custom-target-icon"}),e.jsx(M,{}),e.jsx(R,{ref:i}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs(C,{dragSelection:!0,value:b,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,filterDisplay:"row",filters:{"dealer.name":{value:"",matchMode:"contains"},"product.name":{value:"",matchMode:"contains"},status:{value:"",matchMode:"contains"},quantity:{value:"",matchMode:"contains"},note:{value:"",matchMode:"contains"}},loading:g,globalFilterFields:["product.name","dealer.name","status","quantity"],rowClassName:t=>"cursor-pointer",emptyMessage:"Kayıt bulunamadı.",onRowEditComplete:k,rowHover:!0,editMode:"row",dataKey:"id",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(s,{field:"id",sortable:!0,header:"#"}),e.jsx(s,{field:"dealer.name",filter:!0,filterPlaceholder:"Bayi Adına Göre",sortable:!0,header:"Bayi Adı"}),e.jsx(s,{field:"product.name",filter:!0,filterPlaceholder:"Ürün Adına Göre",sortable:!0,header:"Ürün Adı"}),e.jsx(s,{field:"quantity",sortable:!0,header:"Ürün Adedi"}),e.jsx(s,{field:"status",editor:w,header:"Durumu",body:S}),e.jsx(s,{field:"note",header:"Not"}),e.jsx(s,{field:"updated_at",sortable:!0,header:"Son Değişiklik Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),e.jsx(s,{sortable:!0,header:"Ürün Kodları",body:t=>e.jsx(c,{icon:"pi pi-qrcode",tooltip:"Ürün Kodlarını Görüntüle",onClick:()=>{j(t.product),n(!0)}})}),e.jsx(s,{rowEditor:!0,headerStyle:{width:"10%",minWidth:"8rem"},bodyStyle:{textAlign:"center"}})]})})})}),e.jsx(K,{header:"Ürünler",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>n(!1),maximizable:!0,visible:m,footer:()=>e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Kapat",icon:"pi pi-times",onClick:()=>n(!1),severity:"warning",size:"small"}),e.jsx(c,{label:"Kaydet",icon:"pi pi-cloud-download",size:"small",severity:"success",onClick:()=>{if(l.codes.length===0){i.current.show({severity:"warn",summary:"Hata",detail:"Ürün Kodu Bulunamadı"});return}else{let t="";l.codes.map(({code:D})=>{t+=D+`
`});const a=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(a),d=document.createElement("a");d.href=r,d.download=l.name+" Ürün Kodları.txt",d.click()}}})]}),children:m&&e.jsxs("div",{className:"card flex flex-col",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex p-2 items-center gap-3 ",children:[e.jsx("span",{className:"font-bold flex-1",children:e.jsx("span",{className:"border-b",children:"Ürün Kodu"})}),e.jsx("span",{children:e.jsx("span",{className:"border-b",children:"Son Değişiklik Tarihi"})})]})}),l.codes.length===0&&e.jsx("div",{className:"flex p-2 items-center gap-3 ",children:e.jsx("span",{className:"font-bold flex-1 border-b border-dashed ",children:"Ürün Kodu Bulunamadı"})}),l.codes.map(({code:t,updated_at:a},r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex p-2 items-center gap-3 ",children:[e.jsx("span",{className:"font-bold flex-1",children:e.jsx("span",{className:"select-all",children:t})}),e.jsx("span",{children:new Date(a).toLocaleString()})]}),e.jsx(B,{})]},r))]})})]})}export{xe as default};
