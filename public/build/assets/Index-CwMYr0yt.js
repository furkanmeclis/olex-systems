import{r as s,F as Q,j as e,S as Z,c as ee}from"./app-B5Ro1tF2.js";import{A as te}from"./AuthenticatedLayout-CvibJuqE.js";import{D as ae}from"./datatable.esm-DjPMBA_L.js";import{C as d}from"./column.esm-B-alt3ap.js";import{I as ie}from"./inputtext.esm-B5o3MFH4.js";import{B as l}from"./button.esm-CRs9G-w5.js";import{T as se}from"./tooltip.esm-CeL4iahc.js";import{C as le,c as O}from"./confirmpopup.esm-C7sNsHkH.js";import{T as re}from"./toolbar.esm-BFKTk765.js";import{D as k}from"./dialog.esm-ChdUybZA.js";import{T as oe}from"./toast.esm-BXCw23ib.js";import{O as ne}from"./overlaypanel.esm-D4aUgCY4.js";import{C as ce}from"./checkbox.esm-DjSvGxd_.js";import{A as de}from"./avatar.esm-Drvp2oS1.js";import{u as me}from"./ripple.esm-Bq3XBY3O.js";import pe from"./WorkerCreate-CTIOFp2S.js";import ue from"./WorkerUpdate-CDMCgkdj.js";import{B as xe}from"./buttongroup.esm-D-PWJdbs.js";import"./ApplicationLogo-P0EXx_8w.js";import"./Dropdown-CokIjaSa.js";import"./transition-DgzLvjhv.js";import"./tag.esm-BG8Dv4Ov.js";import"./index.esm-DUycn8Q2.js";import"./paginator.esm-CMo_5vQD.js";import"./inputnumber.esm-Cbm5_WSS.js";import"./index.esm-CDa3KtzU.js";import"./dropdown.esm-seNYrKQj.js";import"./index.esm-DaAXNlej.js";import"./index.esm-0iHr0KMk.js";import"./overlayservice.esm-Dq_X-Npo.js";import"./csstransition.esm-D0I1w4pY.js";import"./index.esm-kcPQw2ng.js";import"./index.esm-CaGUm6WG.js";import"./index.esm-DYRFb8nN.js";import"./index.esm-CUKl9ULb.js";import"./index.esm-KzB7CSJj.js";import"./index.esm-DsY_hiQH.js";import"./index.esm-BSe9B3Sy.js";import"./formik.esm-B1sO77PR.js";import"./cloneDeep-DJN0yfLA.js";import"./index.esm-DFaf7SyD.js";import"./blockui.esm-xPPwLx60.js";import"./message.esm-P9d3Zdfi.js";import"./inputswitch.esm-CA5EBhTb.js";import"./password.esm-D3oqVK58.js";import"./index.esm-W1hrzPAw.js";function ot({auth:B,workersAll:M,csrf_token:h,dealer:N}){const o=s.useRef(null),y=s.useRef(null),[S,E]=s.useState({global:{value:null,matchMode:Q.CONTAINS}}),[v,f]=s.useState(M);s.useState(!1);const[C,H]=s.useState(""),[m,j]=s.useState([]),[R,_]=s.useState({}),T=["id","name","email","phone","avatar","active","updated_at","created_at","actions"],W={id:"ID",name:"Çalışan Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rol",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[n,G]=me(T,"super-dealer-workers-tab"),[F,b]=s.useState(!1),[z,w]=s.useState(!1),[K,u]=s.useState(!1),[p,g]=s.useState({}),D=(t,c=!1)=>{const a=c?t:t.target.value;let r={...S};r.global.value=a,E(r),H(a)},Y=()=>e.jsx(e.Fragment,{children:e.jsx(re,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(l,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Çalışan Ekle",tooltipOptions:{position:"top"},onClick:()=>{b(!0)},className:"mr-2"}),e.jsx(l,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{y.current.toggle(t)},className:"mr-2"}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>j([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(l,{size:"small",onClick:t=>{O({target:t.currentTarget,message:`Seçilen ${m.length} çalışanı silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let c=route("dealer.workers.multipleDestroy");fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":h},body:JSON.stringify({workerIds:m.map(a=>a.id),dealerId:N.id})}).then(async a=>{let r=await a.json();a.status===404?o.current.show({severity:"error",summary:"Hata",detail:r.message}):a.status===500?o.current.show({severity:"warning",summary:"Hata",detail:r.message}):a.status===200&&(o.current.show({severity:"success",summary:"Başarılı",detail:r.message}),f(v.map(i=>m.map(x=>x.id).includes(i.id)?null:i).filter(Boolean)))}).catch(a=>{console.log(a),o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${m.length} çalışanı Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Çalışan Listesi"}),m.length>0&&e.jsxs("span",{children:[m.length," çalışan seçildi."]})]})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(ie,{size:"small",value:C,onChange:D,placeholder:"Çalışanlarda Arama Yapın"})]}),C!==""&&e.jsx(l,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>D("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),I=t=>e.jsx(l,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:ee("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),V=Y(),L=(t,c,a=()=>{})=>{const r=()=>{fetch(route("dealer.workers.destroy",c),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":h}}).then(async i=>{let x=await i.json();i.status===404?o.current.show({severity:"error",summary:"Hata",detail:x.message}):i.status===500?o.current.show({severity:"warning",summary:"Hata",detail:x.message}):i.status===200&&(a(),o.current.show({severity:"success",summary:"Başarılı",detail:x.message}),f(v.map(A=>A.id!==c?A:null).filter(Boolean)))}).catch(i=>{console.log(i),o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{j(m.filter(i=>i.id!==c?i:null).filter(Boolean))})};O({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:r,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[U,X]=s.useState(e.jsx(e.Fragment,{})),[$,J]=s.useState(e.jsx(e.Fragment,{})),P=t=>{_(t),w(!0)},q=t=>{g(t),u(!0)};return e.jsxs(te,{user:B.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Çalışanlar"}),children:[e.jsx(Z,{title:"Çalışanlar"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx(se,{target:".custom-target-icon"}),e.jsx(le,{}),e.jsx(oe,{ref:o}),e.jsx(ne,{ref:y,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[T.map((t,c)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(ce,{inputId:t,checked:n.includes(t),onChange:a=>{let r=[...n];a.checked?r.push(t):r=r.filter(i=>i!==t),G(r)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:W[t]})]},c)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(l,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{y.current.hide()}})})]})]})}),e.jsxs(ae,{dragSelection:!0,value:v,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:S,loading:!1,selectionMode:null,selection:m,onSelectionChange:t=>j(t.value),globalFilterFields:["name","email","phone"],header:V,emptyMessage:"Çalışan bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(d,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),n.includes("id")&&e.jsx(d,{field:"id",sortable:!0,header:"#"}),n.includes("name")&&e.jsx(d,{field:"name",sortable:!0,header:"Çalışan Adı"}),n.includes("email")&&e.jsx(d,{field:"email",sortable:!0,header:"Email"}),n.includes("phone")&&e.jsx(d,{field:"phone",sortable:!0,header:"Telefon No"}),n.includes("avatar")&&e.jsx(d,{field:"image",header:"Avatar",body:t=>e.jsx(de,{image:t.avatar,shape:"circle",size:"large"})}),n.includes("active")&&e.jsx(d,{field:"active",header:"Durumu",dataType:"boolean",body:I}),n.includes("created_at")&&e.jsx(d,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),n.includes("updated_at")&&e.jsx(d,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),n.includes("actions")&&e.jsx(d,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(l,{icon:"pi pi-eye",size:"small",tooltip:"Çalışanı Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{q(t)}}),e.jsx(l,{icon:"pi pi-pencil",size:"small",tooltip:"Çalışanı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{P(t)}}),e.jsx(l,{icon:"pi pi-times",tooltip:"Çalışanı Sil",tooltipOptions:{position:"top"},size:"small",onClick:c=>{L(c,t.id)},severity:"danger"})]})})]}),e.jsx(k,{header:"Yeni Çalışan Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>b(!1),maximizable:!0,visible:F,footer:U,children:e.jsx(pe,{dealerId:N.id,onHide:()=>b(!1),csrf_token:h,toast:o,setWorkers:f,addModal:F,setAddModalFooter:X})}),e.jsx(k,{header:"Çalışanı Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>w(!1),maximizable:!0,visible:z,footer:$,children:e.jsx(ue,{updateModal:z,worker:R,csrf_token:h,toast:o,onHide:()=>w(!1),setWorkers:f,setUpdateModalFooter:J})}),e.jsx(k,{header:"Çalışanı Görüntüle",style:{width:"40vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>u(!1),maximizable:!0,visible:K,children:p&&e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{className:"text-lg text-white font-semibold border-b pb-2",children:"Çalışan Bilgileri"})}),e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Çalışan Adı:"}),e.jsx("span",{children:p.name})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Email:"}),e.jsx("span",{children:p.email})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Telefon:"}),e.jsx("span",{children:p.phone})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Üyelik Durumu:"}),e.jsx("span",{children:p.active?"Aktif":"DeAktif"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Eklenme Tarihi:"}),e.jsx("span",{children:new Date(p.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{children:"Güncellenme Tarihi:"}),e.jsx("span",{children:new Date(p.updated_at).toLocaleString()})]})]})}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs(xe,{children:[e.jsx(l,{label:"Kapat",icon:"pi pi-times",severity:"info",onClick:()=>{u(!1),g({})}}),e.jsx(l,{label:"Hizmet Kayıtları",icon:"pi pi-file",severity:"help",onClick:()=>{}}),e.jsx(l,{label:"Düzenle",icon:"pi pi-pencil",severity:"warning",onClick:t=>{u(!1),g({}),P(p)}}),e.jsx(l,{label:"Sil",icon:"pi pi-trash",severity:"danger",onClick:t=>{L(t,p.id,()=>{u(!1),g({})})}})]})})]})})})]})})})]})}export{ot as default};
