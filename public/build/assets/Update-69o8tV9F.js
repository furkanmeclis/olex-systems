import{r as n,j as e,a as b}from"./app-2dEnFbol.js";import{D as C}from"./dialog.esm-D5LH6sar.js";import{I as D}from"./inputtext.esm-BElP5JEu.js";import{B as d}from"./button.esm-BxCmjYrH.js";import{C as S}from"./checkbox.esm-DePb2jBT.js";import{F as U}from"./fileupload.esm-VnVBgUFf.js";import"./ripple.esm-BzRUCNyJ.js";import"./csstransition.esm-CZRxnida.js";import"./index.esm-DCNiD8Nv.js";import"./tooltip.esm-B0SFQXmi.js";import"./index.esm-CJ0UbATh.js";import"./index.esm-BCqelGsY.js";import"./index.esm-LbBjE-3k.js";import"./index.esm-DffjiFPL.js";import"./index.esm-GJ4SfU9q.js";import"./TransitionGroup-B7gto3Pv.js";function Q({visible:h,setVisible:c,toast:u,brand:a,setBrands:v}){const[j,f]=n.useState(!1),[l,r]=n.useState({name:a.name,is_active:a.is_active,logo:null}),[x,m]=n.useState(a.logo),p=n.useRef(null);n.useEffect(()=>{r({name:a.name,is_active:a.is_active,logo:null}),m(a.logo)},[a]);const y=async o=>{var t,i;o.preventDefault();try{f(!0);const s=new FormData;s.append("name",l.name),s.append("is_active",l.is_active?"1":"0"),l.logo&&s.append("logo",l.logo),s.append("_method","PUT");const F=await b.post(route("super.car.brands.update",a.id),s,{headers:{"Content-Type":"multipart/form-data"}});v(_=>_.map(g=>g.id===a.id?F.data.brand:g)),u.current.show({severity:"success",summary:"Başarılı",detail:"Marka başarıyla güncellendi",life:3e3}),c(!1)}catch(s){u.current.show({severity:"error",summary:"Hata",detail:((i=(t=s.response)==null?void 0:t.data)==null?void 0:i.message)||"Bir hata oluştu",life:3e3})}finally{f(!1)}},k=o=>{const t=o.files[0];if(t){r(s=>({...s,logo:t}));const i=new FileReader;i.onloadend=()=>{m(i.result)},i.readAsDataURL(t)}},w=()=>{r(o=>({...o,logo:null})),m(a.logo),p.current&&p.current.clear()},N=e.jsxs("div",{children:[e.jsx(d,{label:"İptal",icon:"pi pi-times",onClick:()=>c(!1),className:"p-button-text"}),e.jsx(d,{label:"Güncelle",icon:"pi pi-check",onClick:y,loading:j})]});return e.jsx(C,{header:"Marka Düzenle",visible:h,style:{width:"50vw"},onHide:()=>c(!1),footer:N,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"logo",children:"Logo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[x?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x,alt:"Preview",className:"w-24 h-24 object-contain border rounded"}),l.logo&&e.jsx(d,{icon:"pi pi-times",className:"p-button-rounded p-button-danger p-button-sm absolute -top-2 -right-2",onClick:w})]}):e.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"pi pi-image text-gray-500 text-xl"})}),e.jsx(U,{ref:p,mode:"basic",accept:"image/*",maxFileSize:2e6,customUpload:!0,uploadHandler:k,auto:!0,chooseLabel:"Logo Seç",className:"flex-1"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"name",children:"Marka Adı"}),e.jsx(D,{id:"name",value:l.name,onChange:o=>r(t=>({...t,name:o.target.value}))})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(S,{inputId:"is_active",checked:l.is_active,onChange:o=>r(t=>({...t,is_active:o.checked}))}),e.jsx("label",{htmlFor:"is_active",children:"Aktif"})]})]})})}export{Q as default};
