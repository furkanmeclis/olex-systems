import{r as o,j as e,S as L,A as z,a as f}from"./app-Dz0Rbp0h.js";import{A as R}from"./AuthenticatedLayout-UG5Ak_Yr.js";import{D}from"./datatable.esm-CObs6uow.js";import{C as l}from"./column.esm-BqjfhWTS.js";import{B as n}from"./button.esm-Diq6oNXP.js";import{C as O,c as _}from"./confirmpopup.esm-DsNH-MJi.js";import{T as E}from"./toolbar.esm-BoNc40yF.js";import{T as H}from"./toast.esm-Dhu2y3hm.js";import U from"./Create-DIbYuNDV.js";import F from"./Update-DuIK7j8N.js";import"./Dropdown-ZRVcHY7B.js";import"./tag.esm-DhRfOEXx.js";import"./ripple.esm-CYZs3McG.js";import"./motion-Cu9LvwVc.js";import"./index.esm-HViXaaiK.js";import"./paginator.esm-2p2CsUBO.js";import"./inputnumber.esm-C406o3lj.js";import"./inputtext.esm-D_WE3Z_v.js";import"./tooltip.esm-DY0YRRBX.js";import"./index.esm-Be_7JE-C.js";import"./dropdown.esm-CovDHvo0.js";import"./index.esm-D9qUPuzA.js";import"./index.esm-TiU1zUHP.js";import"./overlayservice.esm-DnTU8eSE.js";import"./csstransition.esm-DJl7jKS0.js";import"./index.esm-C0q9DBoq.js";import"./index.esm-BzMgZE_T.js";import"./index.esm-DN8DryRJ.js";import"./index.esm-Bni9AK0c.js";import"./index.esm-BT4Cayqk.js";import"./index.esm-C-uHF7gK.js";import"./index.esm-BiZvDMX_.js";import"./TransitionGroup-BfaxfAol.js";import"./dialog.esm-Bjs29rVv.js";import"./checkbox.esm-DN_GJVBb.js";import"./fileupload.esm-CqKNZTLz.js";function Me({auth:b,brands:k}){const r=o.useRef(null),[x,v]=o.useState(null),[p,g]=o.useState([]),[w,y]=o.useState(!1),[M,h]=o.useState(!1),[c,d]=o.useState(!1),[B,u]=o.useState(k),j=async t=>{var i,a;if(!p.length){r.current.show({severity:"warn",summary:"Uyarı",detail:"Lütfen en az bir marka seçin",life:3e3});return}try{d(!0),await f.post(route("super.car.brands.bulk-status"),{ids:p.map(s=>s.id),status:t}),u(s=>s.map(m=>p.find(A=>A.id===m.id)?{...m,is_active:t}:m)),g([]),r.current.show({severity:"success",summary:"Başarılı",detail:"Markalar başarıyla güncellendi",life:3e3})}catch(s){r.current.show({severity:"error",summary:"Hata",detail:((a=(i=s.response)==null?void 0:i.data)==null?void 0:a.message)||"Bir hata oluştu",life:3e3})}finally{d(!1)}},P=async()=>{var t,i;try{d(!0);const a=await f.post(route("super.car.data.import"));r.current.show({severity:"success",summary:"Başarılı",detail:a.data.message,life:3e3})}catch(a){console.log(a),r.current.show({severity:"error",summary:"Hata",detail:((i=(t=a.response)==null?void 0:t.data)==null?void 0:i.error)||"Bir hata oluştu",life:3e3})}finally{d(!1)}},S=t=>{_({target:event.currentTarget,message:"Bu markayı silmek istediğinize emin misiniz?",icon:"pi pi-exclamation-triangle",accept:async()=>{var i,a;try{d(!0),await f.delete(route("super.car.brands.destroy",t.id)),u(s=>s.filter(m=>m.id!==t.id)),r.current.show({severity:"success",summary:"Başarılı",detail:"Marka başarıyla silindi",life:3e3})}catch(s){r.current.show({severity:"error",summary:"Hata",detail:((a=(i=s.response)==null?void 0:i.data)==null?void 0:a.error)||"Bir hata oluştu",life:3e3})}finally{d(!1)}}})},C=()=>e.jsx("div",{className:"flex flex-wrap gap-2",children:p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Seçilenleri Aktif Et",size:"small",icon:"pi pi-check",onClick:()=>j(!0),loading:c}),e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Seçilenleri Deaktif Et",size:"small",icon:"pi pi-times",severity:"danger",onClick:()=>j(!1),loading:c})]})}),T=()=>e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Yeni Marka",size:"small",icon:"pi pi-plus",severity:"success",onClick:()=>y(!0)}),e.jsx(n,{tooltipOptions:{position:"top"},tooltip:"Toplu İçe Aktar",size:"small",icon:"pi pi-upload",onClick:P,loading:c})]}),N=t=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{icon:"pi pi-pencil",rounded:!0,outlined:!0,severity:"success",onClick:()=>{v(t),h(!0)}}),e.jsx(n,{icon:"pi pi-trash",rounded:!0,outlined:!0,severity:"danger",onClick:()=>S(t)})]});return e.jsxs(R,{user:b.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Araç Markaları"}),children:[e.jsx(L,{title:"Araç Markaları"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6",children:[e.jsx(H,{ref:r}),e.jsx(O,{}),e.jsx(E,{className:"mb-4",left:C,right:T}),e.jsxs(D,{value:B,dataKey:"id",loading:c,removableSort:!0,paginator:!0,rows:10,rowsPerPageOptions:[5,10,25,50],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",filterDisplay:"row",selection:p,onSelectionChange:t=>g(t.value),filters:{name:{value:"",matchMode:"contains"}},emptyMessage:"Marka bulunamadı.",children:[e.jsx(l,{selectionMode:"multiple",exportable:!1,style:{width:"3rem"}}),e.jsx(l,{field:"id",header:"ID",sortable:!0}),e.jsx(l,{field:"logo",header:"Logo",body:t=>t.logo?e.jsx("img",{src:t.logo,alt:t.name,className:"w-16 h-16 object-contain rounded-lg bg-gray-100 dark:bg-gray-700 p-2"}):e.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"pi pi-image text-gray-500 text-xl"})})}),e.jsx(l,{field:"name",filter:!0,filterPlaceholder:"Markaya Göre",header:"Marka Adı",sortable:!0}),e.jsx(l,{field:"models_count",header:"Model Sayısı",sortable:!0,body:t=>e.jsxs(n,{link:!0,onClick:()=>z.visit(route("super.car.brands.models.index",t.id)),className:"p-0 underline font-normal",children:[t.models_count," Model"]})}),e.jsx(l,{field:"is_active",header:"Durum",sortable:!0,style:{width:"10%"},body:t=>t.is_active?"Aktif":"Pasif"}),e.jsx(l,{body:N,exportable:!1,style:{width:"20%"}})]}),e.jsx(U,{visible:w,setVisible:y,toast:r,setBrands:u}),x&&e.jsx(F,{visible:M,setVisible:h,toast:r,brand:x,setBrands:u})]})})})]})}export{Me as default};
