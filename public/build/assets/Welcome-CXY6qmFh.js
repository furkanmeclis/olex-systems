import{R as A,r as v,P as Q,b as Z,O as ee,j as i,S as te,x as K,A as re}from"./app-BzKgFMKw.js";import{A as ne}from"./ApplicationLogo-Cp2UfxsY.js";import{B as I}from"./button.esm-ZM-JlLNI.js";import{I as ae}from"./inputmask.esm-BsUvjtjI.js";import{T as le}from"./toast.esm-4yZ-JpKE.js";import{C as ie,b as oe,c as se,f as ue}from"./ripple.esm-BsUji4X7.js";import{I as ce}from"./inputtext.esm-DB4diLiC.js";import"./index.esm-CLNOFtO4.js";import"./tooltip.esm-Bg12zPW3.js";import"./csstransition.esm-CXzFgeSQ.js";import"./index.esm-CwJKro94.js";import"./index.esm-BSORfD1Z.js";import"./index.esm-Cz_ibiUd.js";import"./index.esm-hfNdV11_.js";const pe="/build/assets/bg-D-KoXhPT.svg";function F(){return F=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},F.apply(null,arguments)}function R(t,a){(a==null||a>t.length)&&(a=t.length);for(var n=0,o=Array(a);n<a;n++)o[n]=t[n];return o}function de(t){if(Array.isArray(t))return R(t)}function fe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U(t,a){if(t){if(typeof t=="string")return R(t,a);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,a):void 0}}function me(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(t){return de(t)||fe(t)||U(t)||me()}function ve(t){if(Array.isArray(t))return t}function ye(t,a){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var o,y,h,x,e=[],p=!0,d=!1;try{if(h=(n=n.call(t)).next,a!==0)for(;!(p=(o=h.call(n)).done)&&(e.push(o.value),e.length!==a);p=!0);}catch(g){d=!0,y=g}finally{try{if(!p&&n.return!=null&&(x=n.return(),Object(x)!==x))return}finally{if(d)throw y}}return e}}function be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(t,a){return ve(t)||ye(t,a)||U(t,a)||be()}function N(t){"@babel/helpers - typeof";return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},N(t)}function xe(t,a){if(N(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,a||"default");if(N(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function ge(t){var a=xe(t,"string");return N(a)=="symbol"?a:a+""}function je(t,a,n){return(a=ge(a))in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t}var we={root:"p-inputotp p-component",input:"p-inputotp-input"},C=ie.extend({defaultProps:{__TYPE:"InputOtp",__parentMetadata:null,className:null,modelValue:!1,invalid:!1,disabled:!1,readOnly:!1,variant:null,tabIndex:null,length:4,mask:!1,integerOnly:!1},css:{classes:we}});function M(t,a){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);a&&(o=o.filter(function(y){return Object.getOwnPropertyDescriptor(t,y).enumerable})),n.push.apply(n,o)}return n}function H(t){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?M(Object(n),!0).forEach(function(o){je(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}var X=A.memo(A.forwardRef(function(t,a){var n,o,y=v.useRef(a),h=oe(),x=v.useContext(Q),e=C.getProps(t,x),p=C.setMetaData(H(H({props:e},e.__parentMetadata),{},{context:{disabled:e.disabled}})),d=p.ptm,g=p.cx,T=p.isUnstyled;se(C.css.styles,T,{name:"inputotp"});var O=e.value?(n=e.value)===null||n===void 0||(n=n.toString())===null||n===void 0||(o=n.split)===null||o===void 0?void 0:o.call(n,""):new Array(e.length),D=v.useState(O),w=he(D,2),S=w[0],j=w[1],P=function(r){var l=r.nextElementSibling;if(l)return l.nodeName==="INPUT"?l:P(l)},k=function(r){var l=r.previousElementSibling;if(l)return l.nodeName==="INPUT"?l:k(l)},E=function(r){var l=P(r.target);l&&(l.focus(),l.select())},u=function(r){var l=k(r.target);l&&(l.focus(),l.select())},f=function(r,l){var m;e==null||(m=e.onChange)===null||m===void 0||m.call(e,{originalEvent:r,value:l.join("")})},_=function(r,l){var m=r.target.value,c=B(S);c[l]=m,c=c.join(""),c=c?c.split(""):new Array(e.length),j(c),f(r,c)},b=function(r,l){e.disabled||e.readOnly||r.nativeEvent.inputType!=="insertFromPaste"&&(_(r,l),r.nativeEvent.inputType==="deleteContentBackward"?u(r):(r.nativeEvent.inputType==="insertText"||r.nativeEvent.inputType==="deleteContentForward")&&E(r))},Y=function(r){if(!(e.disabled||e.readOnly)){var l=r.clipboardData.getData("text");if(l.length){var m=l.substring(0,e.length+1);if(!e.integerOnly||!isNaN(m)){var c=m.split("");j(c),f(r,c)}}}},G=function(r){var l;r.target.select(),e==null||(l=e.focus)===null||l===void 0||l.call(e,r)},$=function(r){var l;e==null||(l=e.blur)===null||l===void 0||l.call(e,r)},z=function(r){if(!(e.disabled||e.readOnly)&&!(r.altKey||r.ctrlKey||r.metaKey))switch(r.code){case"ArrowLeft":{u(r),r.preventDefault();break}case"ArrowRight":{E(r),r.preventDefault();break}case"Backspace":{var l;((l=r.target)===null||l===void 0||(l=l.value)===null||l===void 0?void 0:l.length)===0&&(u(r),r.preventDefault());break}case"ArrowUp":case"ArrowDown":{r.preventDefault();break}case"Tab":case"Enter":break;default:{(e!=null&&e.integerOnly&&!(r.code!=="Space"&&Number(r.key)>=0&&Number(r.key)<=9)||S.join("").length>=e.length&&r.code!=="Delete")&&r.preventDefault();break}}};ue(function(){var s,r,l=e.value?(s=e.value)===null||s===void 0||(s=s.toString())===null||s===void 0||(r=s.split)===null||r===void 0?void 0:r.call(s,""):new Array(e.length);j(l)},[e.value]);var L=function(r){if(r<=0)return[];var l=e.length-r,m={onInput:function(q){return b(q,l)},onKeyDown:z,onFocus:G,onBlur:$,onPaste:Y},c={id:l,value:S[l]||"",inputMode:e!=null&&e.integerOnly?"numeric":"text",type:e!=null&&e.mask?"password":"text",variant:e==null?void 0:e.variant,readOnly:e==null?void 0:e.readOnly,disabled:e==null?void 0:e.disabled,invalid:e==null?void 0:e.invalid,tabIndex:e==null?void 0:e.tabIndex,unstyled:e==null?void 0:e.unstyled,"aria-label":Z("otpLabel",{0:l+1}),className:g("input"),pt:d("input")},W=e!=null&&e.inputTemplate?ee.getJSXElement(e==null?void 0:e.inputTemplate,{events:m,props:c}):A.createElement(ce,F({},c,m,{key:l})),J=[W].concat(B(L(r-1)));return J},V=h({className:g("root"),ref:y,style:e==null?void 0:e.style},d("root"));return A.createElement("div",V,L(e.length))}));X.displayName="InputOtp";function Ke({auth:t,csrf_token:a}){const n=v.useRef(null),[o,y]=v.useState(""),[h,x]=v.useState(!1),[e,p]=v.useState(!1),[d,g]=v.useState(!1),[T,O]=v.useState(""),[D,w]=v.useState(""),[S,j]=v.useState(!1),P=()=>{setTimeout(()=>{j(!0)},1e3*10),setTimeout(()=>{g(!1),O(""),w("")},1e3*60*5)},k=(u,f=!1)=>{j(!1),p(!0);let _=new FormData;_.append("phone",o),fetch(route("customer-otp-login"),{method:"POST",headers:{"X-CSRF-TOKEN":a},body:_}).then(b=>b.json()).then(b=>{b.status?(n.current.show({severity:"success",summary:"Başarılı",detail:b.message,life:3e3}),f||P(),w(b.customer_id),g(!0)):n.current.show({severity:"error",summary:"Hata",detail:b.message,life:3e3})}).catch(b=>{n.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{p(!1)})},E=()=>{p(!0);let u=new FormData;u.append("customer_id",D),u.append("otp",T),fetch(route("customer-otp-verify"),{method:"POST",headers:{"X-CSRF-TOKEN":a},body:u}).then(f=>f.json()).then(f=>{f.status?re.visit(route("customer.notify",f.hash)):n.current.show({severity:"error",summary:"Hata",detail:f.message,life:3e3})}).catch(f=>{n.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{p(!1)})};return i.jsxs(i.Fragment,{children:[i.jsx(te,{title:"OLEX Films"}),i.jsx(le,{ref:n}),i.jsxs("div",{className:"bg-gray-50 text-black/50 dark:bg-black dark:text-white/50",children:[i.jsx("img",{id:"background",className:"absolute -left-20 top-0 max-w-[877px]",src:pe}),i.jsx("div",{className:"relative min-h-screen flex flex-col items-center justify-center selection:bg-[#006400] selection:text-white",children:i.jsxs("div",{className:"relative w-full max-w-2xl px-6 lg:max-w-7xl",children:[!h&&i.jsxs("header",{className:"grid grid-cols-2 items-center gap-2 py-10 lg:grid-cols-3",children:[i.jsx("div",{className:"flex lg:justify-center lg:col-start-2",children:i.jsx(ne,{className:"w-24 h-24"})}),i.jsx("nav",{className:"-mx-3 flex flex-1 justify-end",children:t.user?i.jsx(K,{href:route("dashboard"),className:"rounded-md px-3 py-2 text-black ring-1 ring-transparent transition hover:text-black/70 focus:outline-none focus-visible:ring-[#FF2D20] dark:text-white dark:hover:text-white/80 dark:focus-visible:ring-white",children:"Yönetim Paneli"}):i.jsx(i.Fragment,{children:i.jsx(K,{href:route("login"),className:"rounded-md px-3 py-2 text-black ring-1 ring-transparent transition hover:text-black/70 focus:outline-none focus-visible:ring-[#FF2D20] dark:text-white dark:hover:text-white/80 dark:focus-visible:ring-white",children:"Giriş Yap"})})})]}),!h&&i.jsx("header",{className:"w-full flex items-center justify-center gap-2 py-10",children:i.jsx("div",{className:"flex lg:justify-center lg:col-start-2",children:i.jsx(I,{label:"Müşteri Girişi",icon:"pi pi-user",text:!0,onClick:()=>{x(!0),j(!1),O(""),w(""),g(!1),y("")}})})}),h&&i.jsx("div",{className:"w-full flex items-center justify-center",children:i.jsxs("div",{className:"lg:w-[60%] w-[90%] bg-black rounded p-4 relative",children:[i.jsx("div",{className:"absolute top-[-55px] left-0",children:i.jsx(I,{icon:"pi pi-arrow-left",raised:!0,text:!0,rounded:!0,onClick:()=>x(!1)})}),i.jsx("div",{className:"flex justify-center",children:i.jsx("span",{className:`inline-block text-2xl font-bold
      bg-gradient-to-r from-[var(--primary-600)] via-[var(--primary-400)] to-[var(--primary-600)]
      bg-clip-text text-transparent mb-3`,children:d?"Doğrulama Kodunu Giriniz":" OLEX Films Müşteri Girişi"})}),i.jsx("div",{className:"flex justify-center my-3",children:S&&i.jsx(I,{label:"Tekrar Gönder",icon:"pi pi-refresh",className:"ml-2",text:!0,onClick:u=>k(u,!0)})}),!d&&i.jsx(ae,{className:"w-full mb-3",value:o,placeholder:"Telefon Numarası",onChange:u=>y(u.target.value),mask:"0(599) 999-9999"}),d&&i.jsx("div",{className:"w-full flex justify-center mb-3",children:i.jsx(X,{value:T,onChange:u=>O(u.value),length:6})}),i.jsxs("div",{className:"flex justify-center",children:[!d&&i.jsx(I,{label:"Giriş Yap",loading:e,size:"small",icon:"pi pi-sign-in",onClick:k}),d&&i.jsx(I,{label:"Doğrula",loading:e,size:"small",icon:"pi pi-check",onClick:E})]})]})}),i.jsxs("footer",{className:"py-16 text-center text-sm text-black dark:text-white/70",children:["OLEX Films © ",new Date().getFullYear()," All Rights Reserved."]})]})})]})]})}export{Ke as default};
