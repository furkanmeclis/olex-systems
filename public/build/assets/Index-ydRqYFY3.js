import{r as s,F as J,j as e,a as Q}from"./app-ByJu4dNU.js";import{A as Z}from"./AuthenticatedLayout-BUm5pRRv.js";import{D as $}from"./datatable.esm-oEDKHZEm.js";import{C as r}from"./column.esm-zi55Ootl.js";import{I as ee}from"./inputtext.esm-B7bQ2xES.js";import{B as i}from"./button.esm-NdAN6Zra.js";import{T as te}from"./tooltip.esm-Qbmp7RO6.js";import{C as se}from"./confirmpopup.esm-D1qz3Tmh.js";import{T as ae}from"./toolbar.esm-7VVT_FTd.js";import{D as T}from"./dialog.esm-73asXoq6.js";import{T as ie}from"./toast.esm-B3eWfIZr.js";import{O as re,C as le}from"./checkbox.esm-CTWFO_OP.js";import oe from"./Create-CPQDSsLm.js";import ne from"./Update-DSD6For2.js";import{u as de}from"./ripple.esm-DVOzkR0Z.js";import"./ApplicationLogo-CH63_8P2.js";import"./Dropdown-C8_4X2gx.js";import"./transition-ChVoFVC_.js";import"./tag.esm-C8Bd4_E3.js";import"./index.esm-B4IXFwYI.js";import"./paginator.esm-BgYLmhtY.js";import"./inputnumber.esm-CQmfIYN9.js";import"./index.esm-Y4mq6vV8.js";import"./dropdown.esm-DYKLOoBX.js";import"./index.esm-Bf7BvPu-.js";import"./index.esm-DJgHaFZm.js";import"./overlayservice.esm-61u2ope0.js";import"./csstransition.esm-YXMguxKw.js";import"./index.esm-BZ__EFKP.js";import"./index.esm-DVkhJMLF.js";import"./index.esm-Cbc1Zeel.js";import"./index.esm-Bx9LTo6Y.js";import"./index.esm-_S9D5RbG.js";import"./index.esm-DK5sDiZt.js";import"./index.esm-Y-i7tGI1.js";import"./formik.esm-CiEZ6rRD.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-NliSS8l_.js";import"./badge.esm-DNyPdmSz.js";function Je({auth:z,customersAll:_,csrf_token:j,page:n=!0}){const c=s.useRef(null),p=s.useRef(null),[g,P]=s.useState({global:{value:null,matchMode:J.CONTAINS}});s.useState(!1);const[u,L]=s.useState(!1),[x,R]=s.useState(!1),[b,D]=s.useState(""),[E,O]=s.useState([]),[A,H]=s.useState({}),k=s.useRef(),v=s.useRef(),[I,C]=s.useState(_),K=["id","name","email","phone","worker_name","address","updated_at","created_at","actions"],U={id:"ID",name:"Müşteri Adı",phone:"Telefon",email:"Email",address:"Müşteri Adresi",worker_name:"Ekleyen Çalışan",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},G=n===!0?"worker-customers-table-columns":"worker-customers-table-columns-2",[a,V]=de(["id","name","email","phone","updated_at","actions"],G),[d,y]=s.useState(!1),[f,w]=s.useState(!1),S=(t,h=!1)=>{const m=h?t:t.target.value;let l={...g};l.global.value=m,P(l),D(m)},o=()=>{d&&y(!1),f&&w(!1)},Y=e.jsx(e.Fragment,{children:e.jsx(ae,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(i,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Müşteri Ekle",tooltipOptions:{position:"top"},onClick:()=>{w(!0)},className:"mr-2"}),e.jsx(i,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{p.current.toggle(t)},className:"mr-2"}),E.length>0&&e.jsx(e.Fragment,{children:e.jsx(i,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>O([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}})})]}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(ee,{size:"small",value:b,onChange:S,placeholder:"Müşterilerde Arama Yapın"})]}),b!==""&&e.jsx(i,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>S("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),[W,N]=s.useState(!1),[B,F]=s.useState(!1),X=t=>{d||(H(t),y(!0))},M=()=>e.jsxs(e.Fragment,{children:[e.jsx(te,{target:".custom-target-icon"}),e.jsx(se,{}),e.jsx(ie,{ref:c}),e.jsx(re,{ref:p,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[K.map((t,h)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(le,{inputId:t,checked:a.includes(t),onChange:m=>{let l=[...a];m.checked?l.push(t):l=l.filter(q=>q!==t),V(l)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:U[t]})]},h)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(i,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{p.current.hide()}})})]})]})}),e.jsxs($,{value:I,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:g,loading:!1,globalFilterFields:["name","email","phone","worker.name"],header:Y,emptyMessage:"Müşteri bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[a.includes("id")&&e.jsx(r,{field:"id",sortable:!0,header:"#"}),a.includes("name")&&e.jsx(r,{field:"name",sortable:!0,header:"Müşteri Adı"}),a.includes("email")&&e.jsx(r,{field:"email",sortable:!0,header:"Email"}),a.includes("phone")&&e.jsx(r,{field:"phone",sortable:!0,header:"Telefon No"}),a.includes("worker_name")&&e.jsx(r,{field:"worker.name",sortable:!0,header:"Ekleyen Çalışan"}),a.includes("address")&&e.jsx(r,{field:"address",sortable:!0,header:"Müşteri Adresi"}),a.includes("created_at")&&e.jsx(r,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),a.includes("updated_at")&&e.jsx(r,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),a.includes("actions")&&e.jsx(r,{header:"İşlemler",body:t=>e.jsx("div",{className:"flex justify-center gap-x-2",children:e.jsx(i,{icon:"pi pi-pencil",size:"small",tooltip:"Müşteriyi Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{X(t)}})})})]}),e.jsx(T,{header:"Müşteriyi Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:o,maximizable:!0,visible:d,footer:e.jsxs(e.Fragment,{children:[e.jsx(i,{label:"Vazgeç",icon:"pi pi-times",size:"small",link:!0,onClick:o,loading:u}),e.jsx(i,{label:"Kaydet",icon:"pi pi-save",size:"small",className:"p-button-success",loading:u,onClick:()=>{N(!0),k.current.click()}})]}),children:e.jsx(ne,{updateModal:d,user:A,csrf_token:j,toast:c,onHide:o,setUsers:C,formRef:k,setFormSubmitted:N,formSubmitted:W,loading:u,setLoading:L,page:n})}),e.jsx(T,{header:"Müşteri Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:o,maximizable:!0,visible:f,footer:e.jsxs(e.Fragment,{children:[e.jsx(i,{label:"Vazgeç",icon:"pi pi-times",size:"small",link:!0,onClick:o,loading:x}),e.jsx(i,{label:"Kaydet",icon:"pi pi-save",size:"small",className:"p-button-success",loading:x,onClick:()=>{F(!0),v.current.click()}})]}),children:e.jsx(oe,{createModal:f,csrf_token:j,toast:c,onHide:o,setUsers:C,formRef:v,setFormSubmitted:F,formSubmitted:B,loading:x,setLoading:R,page:n})})]});return n===!0?e.jsxs(Z,{user:z.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Müşteriler"}),children:[e.jsx(Q,{title:"Müşteriler"}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx(M,{})})})})]}):e.jsx(M,{})}export{Je as default};
