import{R as w,r as y,j as t,S as W,x as G,A as J}from"./app-CBY0U7SJ.js";import{A as Q}from"./ApplicationLogo-BmW6Kxwa.js";import{B as A}from"./button.esm-DkOBQGVj.js";import{I as Z}from"./inputmask.esm-CJqKmK4N.js";import{T as $}from"./toast.esm-BiiiWxY4.js";import{m as d}from"./motion-Ca_-YzoP.js";import"./ripple.esm-BY9TacgE.js";import"./index.esm-BC2Bb7eL.js";import"./tooltip.esm-Bt0hE51c.js";import"./inputtext.esm-BqQXhoLn.js";import"./csstransition.esm-jtiH1prm.js";import"./index.esm-ZtgUK56_.js";import"./index.esm--0L79wVK.js";import"./index.esm-CO88Q5wZ.js";import"./index.esm-DjTnnZkd.js";const ee="/build/assets/bg-D-KoXhPT.svg";var K=function(a){return typeof a=="object"&&a!==null},te=function(a){var C=a.value,f=C===void 0?"":C,T=a.numInputs,l=T===void 0?4:T,F=a.onChange,P=a.onPaste,R=a.renderInput,b=a.shouldAutoFocus,v=b===void 0?!1:b,k=a.inputType,N=k===void 0?"text":k,j=a.renderSeparator,S=a.placeholder,g=a.containerStyle,D=a.inputStyle,I=a.skipDefaultStyles,B=I===void 0?!1:I,O=w.useState(0),s=O[0],p=O[1],m=w.useRef([]),i=function(){return f?f.toString().split(""):[]},u=N==="number"||N==="tel";w.useEffect(function(){m.current=m.current.slice(0,l)},[l]),w.useEffect(function(){var e;v&&((e=m.current[0])===null||e===void 0||e.focus())},[v]);var E=function(){if(typeof S=="string"){if(S.length===l)return S;S.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},c=function(e){var r=u?!isNaN(Number(e)):typeof e=="string";return r&&e.trim().length===1},M=function(e){var r=e.target.value;c(r)&&(L(r),x(s+1))},X=function(e){var r=e.nativeEvent,n=e.target.value;if(!c(n)){if(n.length===l){var o=n.split("").some(function(h){return!c(h)});o||(V(n.split("")),x(l-1))}r.data===null&&r.inputType==="deleteContentBackward"&&(e.preventDefault(),L(""),x(s-1)),e.target.value=""}},Y=function(e){return function(r){p(r),e.target.select()}},_=function(){p(s-1)},z=function(e){var r=i();[e.code,e.key].includes("Backspace")?(e.preventDefault(),L(""),x(s-1)):e.code==="Delete"?(e.preventDefault(),L("")):e.code==="ArrowLeft"?(e.preventDefault(),x(s-1)):e.code==="ArrowRight"||e.key===r[s]?(e.preventDefault(),x(s+1)):(e.code==="Spacebar"||e.code==="Space"||e.code==="ArrowUp"||e.code==="ArrowDown")&&e.preventDefault()},x=function(e){var r,n,o=Math.max(Math.min(l-1,e),0);m.current[o]&&((r=m.current[o])===null||r===void 0||r.focus(),(n=m.current[o])===null||n===void 0||n.select(),p(o))},L=function(e){var r=i();r[s]=e[0],V(r)},V=function(e){var r=e.join("");F(r)},q=function(e){var r;e.preventDefault();var n=i(),o=s,h=e.clipboardData.getData("text/plain").slice(0,l-s).split("");if(!(u&&h.some(function(U){return isNaN(Number(U))}))){for(var H=0;H<l;++H)H>=s&&h.length>0&&(n[H]=(r=h.shift())!==null&&r!==void 0?r:"",o++);x(o),V(n)}};return w.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},K(g)&&g),className:typeof g=="string"?g:void 0,onPaste:P},Array.from({length:l},function(e,r){return r}).map(function(e){var r,n,o;return w.createElement(w.Fragment,{key:e},R({value:(r=i()[e])!==null&&r!==void 0?r:"",placeholder:(o=(n=E())===null||n===void 0?void 0:n[e])!==null&&o!==void 0?o:void 0,ref:function(h){return m.current[e]=h},onChange:M,onFocus:function(h){return Y(h)(e)},onBlur:_,onKeyDown:z,onPaste:q,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(B?{}:{width:"1em",textAlign:"center"},K(D)?D:{}),className:typeof D=="string"?D:void 0,type:N,inputMode:u?"numeric":"text",onInput:X},e),e<l-1&&(typeof j=="function"?j(e):j))}))};function ge({auth:a,csrf_token:C}){const f=y.useRef(null),[T,l]=y.useState(""),[F,P]=y.useState(!1),[R,b]=y.useState(!1),[v,k]=y.useState(!1),[N,j]=y.useState(""),[S,g]=y.useState(""),[D,I]=y.useState(!1),B=()=>{setTimeout(()=>{I(!0)},1e3*10),setTimeout(()=>{k(!1),j(""),g("")},1e3*60*5)},O=(i,u=!1)=>{I(!1),b(!0);let E=new FormData;E.append("phone",T),fetch(route("customer-otp-login"),{method:"POST",headers:{"X-CSRF-TOKEN":C},body:E}).then(c=>c.json()).then(c=>{c.status?(f.current.show({severity:"success",summary:"Başarılı",detail:c.message,life:3e3}),u||B(),g(c.customer_id),k(!0)):f.current.show({severity:"error",summary:"Hata",detail:c.message,life:3e3})}).catch(c=>{f.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{b(!1)})},s=()=>{b(!0);let i=new FormData;i.append("customer_id",S),i.append("otp",N),fetch(route("customer-otp-verify"),{method:"POST",headers:{"X-CSRF-TOKEN":C},body:i}).then(u=>u.json()).then(u=>{u.status?J.visit(route("customer.notify",u.hash)):f.current.show({severity:"error",summary:"Hata",detail:u.message,life:3e3})}).catch(u=>{f.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{b(!1)})},p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}};return t.jsxs(t.Fragment,{children:[t.jsx(W,{title:"OLEX Films"}),t.jsx($,{ref:f}),t.jsxs(d.div,{initial:"hidden",animate:"visible",className:"bg-gray-50 text-black/50 dark:bg-black dark:text-white/50",children:[t.jsx(d.img,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{duration:.8,ease:"easeOut"},id:"background",className:"absolute -left-20 top-0 max-w-[877px]",src:ee}),t.jsx("div",{className:"relative min-h-screen flex flex-col items-center justify-center selection:bg-[#006400] selection:text-white",children:t.jsxs("div",{className:"relative w-full max-w-2xl px-6 lg:max-w-7xl",children:[!F&&t.jsxs(d.header,{variants:p,className:"grid grid-cols-2 items-center gap-2 py-10 lg:grid-cols-3",children:[t.jsx(d.div,{className:"flex lg:justify-center lg:col-start-2",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:t.jsx(Q,{className:"w-24 h-24"})}),t.jsx("nav",{className:"-mx-3 flex flex-1 justify-end",children:a.user?t.jsx(G,{href:route("dashboard"),className:"rounded-md px-3 py-2 text-black ring-1 ring-transparent transition hover:text-black/70 focus:outline-none focus-visible:ring-[#FF2D20] dark:text-white dark:hover:text-white/80 dark:focus-visible:ring-white",children:"Yönetim Paneli"}):t.jsx(t.Fragment,{children:t.jsx(G,{href:route("login"),className:"rounded-md px-3 py-2 text-black ring-1 ring-transparent transition hover:text-black/70 focus:outline-none focus-visible:ring-[#FF2D20] dark:text-white dark:hover:text-white/80 dark:focus-visible:ring-white",children:"Giriş Yap"})})})]}),!F&&t.jsx(d.header,{variants:p,className:"w-full flex items-center justify-center gap-2 py-10",children:t.jsx(d.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex lg:justify-center lg:col-start-2",children:t.jsx(A,{label:"Müşteri Girişi",icon:"pi pi-user",text:!0,onClick:()=>{P(!0),I(!1),j(""),g(""),k(!1),l("")}})})}),F&&t.jsx(d.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},className:"w-full flex items-center justify-center",children:t.jsxs(d.div,{variants:m,initial:"hidden",animate:"visible",className:"lg:w-[60%] w-[90%] bg-black rounded p-4 relative",children:[t.jsx(d.div,{variants:p,className:"absolute top-[-55px] left-0",children:t.jsx(A,{icon:"pi pi-arrow-left",raised:!0,text:!0,rounded:!0,onClick:()=>P(!1)})}),t.jsx(d.div,{variants:p,className:"flex justify-center",children:t.jsx("span",{className:"inline-block text-2xl font-bold bg-gradient-to-r from-[var(--primary-600)] via-[var(--primary-400)] to-[var(--primary-600)] bg-clip-text text-transparent mb-3",children:v?"Doğrulama Kodunu Giriniz":" OLEX Films Müşteri Girişi"})}),t.jsx("div",{className:"flex justify-center my-3",children:D&&t.jsx(A,{label:"Tekrar Gönder",icon:"pi pi-refresh",className:"ml-2",text:!0,onClick:i=>O(i,!0)})}),!v&&t.jsx(Z,{className:"w-full mb-3",value:T,placeholder:"Telefon Numarası",onChange:i=>l(i.target.value),mask:"0(999) 999-9999"}),v&&t.jsx("div",{className:"w-full flex justify-center mb-3",children:t.jsx(te,{value:N,onChange:j,numInputs:6,inputType:"tel",mode:"number",inputStyle:{width:"2em"},renderSeparator:t.jsx("span",{children:" "}),renderInput:i=>t.jsx("input",{...i,autoComplete:"one-time-code",className:"w-12 h-12 text-center text-lg font-medium border rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-[var(--primary-600)]"})})}),t.jsxs("div",{className:"flex justify-center",children:[!v&&t.jsx(A,{label:"Giriş Yap",loading:R,size:"small",icon:"pi pi-sign-in",onClick:O}),v&&t.jsx(A,{label:"Doğrula",loading:R,size:"small",icon:"pi pi-check",onClick:s})]})]})}),t.jsxs(d.footer,{variants:p,className:"py-16 text-center text-sm text-black dark:text-white/70",children:["OLEX Films © ",new Date().getFullYear()," All Rights Reserved."]})]})})]})]})}export{ge as default};
