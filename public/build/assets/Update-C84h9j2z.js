import{j as e}from"./app-pP88dXXD.js";import{I as n}from"./inputtext.esm-CUVRfrTN.js";import{B as N}from"./blockui.esm-BSlZlKrp.js";import{u as g}from"./formik.esm-DTaxErcu.js";import{c as S,a as d}from"./index.esm-T6IDF9g1.js";import{M as F}from"./message.esm-W38T8N8h.js";import{S as _,B as C}from"./badge.esm-BgQv55Ae.js";import"./ripple.esm-3EqM4Xiq.js";import"./tooltip.esm-CzuGfRo8.js";import"./_baseClone-BgPU1wOP.js";import"./index.esm-yMs_xicw.js";import"./index.esm-DlBv1miS.js";import"./index.esm-Dml4Rf6J.js";function U({csrf_token:p,toast:o,onHide:h,setUsers:u,formRef:x,formSubmitted:f,loading:j,setLoading:m,user:i,superPage:y}){const{values:r,handleSubmit:b,handleChange:t,dirty:T,setFieldValue:v,errors:c,setErrors:M}=g({initialValues:{name:i.name,email:i.email,phone:i.phone,image:i.avatar,gender:i.gender,player_id:i.player_id,address:i.address,contact:Object.entries(JSON.parse(i.notification_settings)).map(([a,s])=>s?a:null).filter(a=>a!==null)},validationSchema:S().shape({name:d().required("Merkez Üyesi Adı Zorunludur."),email:d().email("Geçerli Bir E-Posta Adresi Giriniz.").required("E-Posta Adresi Zorunludur."),phone:d().required("Telefon Numarası Zorunludur.")}),onSubmit:a=>{m(!0);let s=new FormData;s.append("name",a.name),s.append("email",a.email),s.append("phone",a.phone),s.append("notification_settings",JSON.stringify(a.contact)),s.append("address",a.address),s.append("player_id",a.player_id),s.append("_method","PUT"),fetch(route(`${y?"super":"dealer"}.customers.update`,i.id),{method:"POST",headers:{"X-CSRF-TOKEN":p},body:s}).then(l=>l.json()).then(l=>{l.status?(o.current.show({severity:"success",summary:"Başarılı",detail:l.message}),u(l.customers),h()):o.current.show({severity:"error",summary:"Hata",detail:l.message})}).catch(l=>{o.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{m(!1)})}});return e.jsx(N,{blocked:j,template:e.jsx("i",{className:"pi pi-spin pi-spinner",style:{fontSize:"3rem"}}),children:e.jsxs("form",{className:"p-fluid",onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 mb-3",children:[e.jsx("div",{className:"col-span-2 grid gap-y-2",children:f&&Object.keys(c).length>0&&e.jsx(e.Fragment,{children:Object.entries(c).map(([a,s])=>e.jsx(F,{severity:"warn",text:s},a))})}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{htmlFor:"name",className:"font-bold",children:["Müşteri Adı ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"name",name:"name",onChange:t,value:r.name||"",autoFocus:!0})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"email",className:"font-bold",children:["Müşteri E-Posta Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"email",type:"email",name:"email",onChange:t,value:r.email||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"phone",className:"font-bold",children:["Müşteri Telefon No ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"phone",type:"tel",name:"phone",onChange:t,value:r.phone||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"address",className:"font-bold",children:["Müşteri Adresi ",e.jsx("span",{className:"font-semibold text-red-400",children:"*"})]}),e.jsx(n,{id:"address",type:"text",name:"address",onChange:t,value:r.address||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"player_id",className:"font-bold",children:"Müşteri Device Id"}),e.jsx(n,{id:"player_id",type:"text",name:"player_id",onChange:t,value:r.player_id||""})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"font-bold",children:"İletişim Tercihleri"}),e.jsx(_,{multiple:!0,value:r.contact,onChange:a=>v("contact",a.value),itemTemplate:a=>{let s=r.contact&&r.contact.includes(a.value);return e.jsx("div",{className:"w-full text-center",children:e.jsx("i",{className:a.icon+" p-overlay-badge",style:{fontSize:"1.5rem"},children:s&&e.jsx(C,{severity:"success",value:e.jsx("i",{className:"pi pi-check"}),style:{fontSize:"1px"}})})})},optionLabel:"value",options:[{icon:"pi pi-envelope",value:"email"},{icon:"pi pi-send",value:"sms"},{icon:"pi pi-bell",value:"push"}]})]}),e.jsx("button",{type:"submit",style:{display:"none"},ref:x})]})})}export{U as default};
