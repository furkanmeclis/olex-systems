import{r,F as U,j as e,S as G,c as K}from"./app-CbKgTnfw.js";import{A as Y}from"./AuthenticatedLayout-D7hTcrJF.js";import{D as I}from"./datatable.esm-bq0OClDD.js";import{C as o}from"./column.esm-iXUglLdf.js";import{B as m}from"./button.esm-D0GGsqfP.js";import{T as W}from"./tooltip.esm-B0Fxn3I7.js";import{C as V,c as w}from"./confirmpopup.esm-SoCxuE9m.js";import{T as X}from"./toolbar.esm-BaPb24vt.js";import{D as z}from"./dialog.esm-CXrc4WLu.js";import{T as $}from"./toast.esm-B48oQ1WT.js";import{O as J}from"./overlaypanel.esm-Dsl79LT3.js";import{C as q}from"./checkbox.esm-CFHcqNZt.js";import Q from"./Create-C1B5UB8k.js";import Z from"./Update-D_4CyKW8.js";import{A as ee}from"./avatar.esm-8PYlJt45.js";import{u as te}from"./ripple.esm-Bz0HPTmf.js";import"./Dropdown-DhhpULLs.js";import"./tag.esm-DQ-1fL-l.js";import"./motion-CjuD6rJ4.js";import"./index.esm-CZj6-l6V.js";import"./paginator.esm--_xCwVYF.js";import"./inputnumber.esm-B3C6OAA_.js";import"./inputtext.esm-BCUyyFJJ.js";import"./index.esm-BHYNhjBT.js";import"./dropdown.esm-5OCrWUkh.js";import"./index.esm-gqha0LF7.js";import"./index.esm-CBE3UGX1.js";import"./overlayservice.esm-0pIkdLm4.js";import"./csstransition.esm-CEurPmtU.js";import"./index.esm-CxG-i5f8.js";import"./index.esm-BwStUmvm.js";import"./index.esm-jqxCJFL2.js";import"./index.esm-C6_txXFL.js";import"./index.esm-CoNLEXO0.js";import"./index.esm-ChhSC-WG.js";import"./index.esm-B9INqRdX.js";import"./blockui.esm-NPj3ImoO.js";import"./formik.esm-BqxXn9R1.js";import"./cloneDeep-DJN0yfLA.js";import"./index.esm-CpJy146Q.js";import"./message.esm-DfGq2g56.js";import"./inputswitch.esm-p_FzPCea.js";import"./password.esm-BfAaXTgG.js";import"./index.esm-BMHdSSxB.js";function We({auth:T,usersAll:C,csrf_token:p,roles:v}){const l=r.useRef(null),x=r.useRef(null);r.useState({global:{value:null,matchMode:U.CONTAINS}}),r.useState(!1),r.useState("");const[n,u]=r.useState([]),[F,N]=r.useState({}),[y,h]=r.useState(C),b=["id","name","email","phone","role","avatar","active","updated_at","created_at","actions"],M={id:"ID",name:"Üye Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rolü",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[i,P]=te(b,"super-central-users-table-columns"),[k,g]=r.useState(!1),[S,j]=r.useState(!1),D=()=>e.jsx(e.Fragment,{children:e.jsx(X,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Merkez Üyesi Ekle",tooltipOptions:{position:"top"},onClick:()=>{g(!0)},className:"mr-2"}),e.jsx(m,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{x.current.toggle(t)},className:"mr-2"}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>u([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(m,{size:"small",onClick:t=>{w({target:t.currentTarget,message:`Seçilen ${n.length} Merkez Üyelerini silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let c=route("super.central.multipleDestroy");fetch(c,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({workerIds:n.map(s=>s.id)})}).then(async s=>{let a=await s.json();s.status===404?l.current.show({severity:"error",summary:"Hata",detail:a.message}):s.status===500?l.current.show({severity:"warning",summary:"Hata",detail:a.message}):s.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:a.message}),h(y.map(d=>n.map(f=>f.id).includes(d.id)?null:d).filter(Boolean)))}).catch(s=>{console.log(s),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${n.length} Merkez Üyesini Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:n.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[n.length," merkez üyesi seçildi."]})})})})}),L=t=>e.jsx(m,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:K("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),O=D(),R=(t,c)=>{const s=()=>{fetch(route("super.central.destroy",c),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async a=>{let d=await a.json();a.status===404?l.current.show({severity:"error",summary:"Hata",detail:d.message}):a.status===500?l.current.show({severity:"warning",summary:"Hata",detail:d.message}):a.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:d.message}),h(y.map(f=>f.id!==c?f:null).filter(Boolean)))}).catch(a=>{console.log(a),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{u(n.filter(a=>a.id!==c?a:null).filter(Boolean))})};w({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:s,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[A,E]=r.useState(e.jsx(e.Fragment,{})),[H,B]=r.useState(e.jsx(e.Fragment,{})),_=t=>{N(t),j(!0)};return e.jsxs(Y,{user:T.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Merkez Üyeleri"}),children:[e.jsx(G,{title:"Merkez Üyeleri"}),e.jsx(W,{target:".custom-target-icon"}),e.jsx(V,{}),e.jsx($,{ref:l}),e.jsx(J,{ref:x,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[b.map((t,c)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(q,{inputId:t,checked:i.includes(t),onChange:s=>{let a=[...i];s.checked?a.push(t):a=a.filter(d=>d!==t),P(a)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:M[t]})]},c)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(m,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{x.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(I,{dragSelection:!0,value:y,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:{name:{value:"",matchMode:"contains"},email:{value:"",matchMode:"contains"},phone:{value:"",matchMode:"contains"},role_label:{value:"",matchMode:"contains"}},loading:!1,selectionMode:null,selection:n,onSelectionChange:t=>u(t.value),globalFilterFields:["name","email","phone"],header:O,filterDisplay:"row",emptyMessage:"Merkez Üyesi bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(o,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),i.includes("id")&&e.jsx(o,{field:"id",sortable:!0,header:"#"}),i.includes("name")&&e.jsx(o,{field:"name",filter:!0,filterPlaceholder:"Üye Adına Göre Filtre",sortable:!0,header:"Üye Adı"}),i.includes("email")&&e.jsx(o,{field:"email",filter:!0,filterPlaceholder:"Emaile Göre Filtre",sortable:!0,header:"Email"}),i.includes("phone")&&e.jsx(o,{field:"phone",filter:!0,filterPlaceholder:"Telefona Göre Filtre",sortable:!0,header:"Telefon No"}),i.includes("role")&&e.jsx(o,{field:"role_label",filter:!0,filterPlaceholder:"Role Göre Filtre",sortable:!0,header:"Rolü"}),i.includes("avatar")&&e.jsx(o,{field:"image",header:"Avatar",body:t=>e.jsx(ee,{image:t.avatar,shape:"circle",size:"large"})}),i.includes("active")&&e.jsx(o,{field:"active",header:"Durumu",dataType:"boolean",body:L}),i.includes("created_at")&&e.jsx(o,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),i.includes("updated_at")&&e.jsx(o,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),i.includes("actions")&&e.jsx(o,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(m,{icon:"pi pi-pencil",size:"small",tooltip:"Hızlı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{_(t)}}),e.jsx(m,{icon:"pi pi-times",tooltip:"Merkez Üyesini Sil",tooltipOptions:{position:"top"},size:"small",onClick:c=>{R(c,t.id)},severity:"danger"})]})})]}),e.jsx(z,{header:"Yeni Merkez Üyesi Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>g(!1),maximizable:!0,visible:k,footer:A,children:e.jsx(Q,{addModal:k,csrf_token:p,toast:l,onHide:()=>g(!1),roles:v,setUsers:h,setAddModalFooter:E})}),e.jsx(z,{header:"Merkez Üyesini Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>j(!1),maximizable:!0,visible:S,footer:H,children:e.jsx(Z,{updateModal:S,user:F,csrf_token:p,toast:l,roles:v,onHide:()=>j(!1),setUsers:h,setUpdateModalFooter:B})})]})})})]})}export{We as default};
