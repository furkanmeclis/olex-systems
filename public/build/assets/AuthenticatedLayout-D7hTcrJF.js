import{r,X as O,j as e,x as j}from"./app-CbKgTnfw.js";import"./Dropdown-DhhpULLs.js";import{T as k}from"./tag.esm-DQ-1fL-l.js";import{T as $}from"./toast.esm-B48oQ1WT.js";import{u as z,f as A,a as K,P as L,L as T,m as R}from"./motion-CjuD6rJ4.js";function I(){const t=r.useRef(!1);return z(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function H(){const t=I(),[a,s]=r.useState(0),n=r.useCallback(()=>{t.current&&s(a+1)},[a]);return[r.useCallback(()=>A.postRender(n),[n]),a]}class U extends r.Component{getSnapshotBeforeUpdate(a){const s=this.props.childRef.current;if(s&&a.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function W({children:t,isPresent:a}){const s=r.useId(),n=r.useRef(null),m=r.useRef({width:0,height:0,top:0,left:0});return r.useInsertionEffect(()=>{const{width:f,height:c,top:u,left:h}=m.current;if(a||!n.current||!f||!c)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${c}px !important;
            top: ${u}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[a]),r.createElement(U,{isPresent:a,childRef:n,sizeRef:m},r.cloneElement(t,{ref:n}))}const _=({children:t,initial:a,isPresent:s,onExitComplete:n,custom:m,presenceAffectsLayout:f,mode:c})=>{const u=K(Y),h=r.useId(),d=r.useMemo(()=>({id:h,initial:a,isPresent:s,custom:m,onExitComplete:i=>{u.set(i,!0);for(const o of u.values())if(!o)return;n&&n()},register:i=>(u.set(i,!1),()=>u.delete(i))}),f?void 0:[s]);return r.useMemo(()=>{u.forEach((i,o)=>u.set(o,!1))},[s]),r.useEffect(()=>{!s&&!u.size&&n&&n()},[s]),c==="popLayout"&&(t=r.createElement(W,{isPresent:s},t)),r.createElement(L.Provider,{value:d},t)};function Y(){return new Map}function D(t){return r.useEffect(()=>()=>t(),[])}const g=t=>t.key||"";function G(t,a){t.forEach(s=>{const n=g(s);a.set(n,s)})}function V(t){const a=[];return r.Children.forEach(t,s=>{r.isValidElement(s)&&a.push(s)}),a}const X=({children:t,custom:a,initial:s=!0,onExitComplete:n,exitBeforeEnter:m,presenceAffectsLayout:f=!0,mode:c="sync"})=>{const u=r.useContext(T).forceRender||H()[0],h=I(),d=V(t);let i=d;const o=r.useRef(new Map).current,v=r.useRef(i),x=r.useRef(new Map).current,b=r.useRef(!0);if(z(()=>{b.current=!1,G(d,x),v.current=i}),D(()=>{b.current=!0,x.clear(),o.clear()}),b.current)return r.createElement(r.Fragment,null,i.map(l=>r.createElement(_,{key:g(l),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:f,mode:c},l)));i=[...i];const N=v.current.map(g),E=d.map(g),P=N.length;for(let l=0;l<P;l++){const p=N[l];E.indexOf(p)===-1&&!o.has(p)&&o.set(p,void 0)}return c==="wait"&&o.size&&(i=[]),o.forEach((l,p)=>{if(E.indexOf(p)!==-1)return;const C=x.get(p);if(!C)return;const B=N.indexOf(p);let w=l;if(!w){const F=()=>{o.delete(p);const M=Array.from(x.keys()).filter(y=>!E.includes(y));if(M.forEach(y=>x.delete(y)),v.current=d.filter(y=>{const S=g(y);return S===p||M.includes(S)}),!o.size){if(h.current===!1)return;u(),n&&n()}};w=r.createElement(_,{key:g(C),isPresent:!1,onExitComplete:F,custom:a,presenceAffectsLayout:f,mode:c},C),o.set(p,w)}i.splice(B,0,w)}),i=i.map(l=>{const p=l.key;return o.has(p)?l:r.createElement(_,{key:g(l),isPresent:!0,presenceAffectsLayout:f,mode:c},l)}),r.createElement(r.Fragment,null,o.size?i:i.map(l=>r.cloneElement(l)))};function re({user:t,header:a,children:s}){const n=r.useRef(null);r.useState(!1);const[m,f]=r.useState(!1),{flash:c}=O().props;r.useEffect(()=>{c.success!==null&&n.current.show({severity:"success",summary:"İşlem Başarılı",detail:c.success}),c.error!==null&&n.current.show({severity:"error",summary:"Hata",detail:c.error})},[c]);const u=()=>{switch(t.role){case"super":return e.jsx(k,{severity:"danger",value:"Super"});case"admin":return e.jsx(k,{severity:"warning",value:"Admin"});case"worker":return e.jsx(k,{severity:"success",value:"Worker"});default:return e.jsx(k,{severity:"help",value:"Central"})}},h=[{name:"Anasayfa",href:route("dashboard"),active:route().current("dashboard"),roles:["super","central","central_salesman","central_contact","central_worker","admin"],icon:"pi pi-home"},{name:"Merkez Çalışanları",href:route("super.central.index"),active:route().current("super.central*"),roles:["super"],icon:"pi pi-users"},{name:"Bayiler",href:route("super.dealers.index"),active:route().current("super.dealers*"),roles:["super"],icon:"pi pi-building"},{name:"Çalışanlar",href:route("super.workers.index"),active:route().current("super.workers*"),roles:["super"],icon:"pi pi-user"},{name:"Ürünler",href:route("super.products.index"),active:route().current("super.products*"),roles:["super"],icon:"pi pi-box"},{name:"Siparişler",href:route("super.orders.index"),active:route().current("super.orders*"),roles:["super"],icon:"pi pi-shopping-cart"},{name:"Stok Yönetimi",href:route("super.stock-management.index"),active:route().current("super.stock-management*"),roles:["super"],icon:"pi pi-database"},{name:"Müşteriler",href:route("super.customers.index"),active:route().current("super.customers*"),roles:["super"],icon:"pi pi-users"},{name:"Bildirim & SMS",href:route("super.notifySms.index"),active:route().current("super.notifySms*"),roles:["super"],icon:"pi pi-bell"},{name:"Bayiler",href:route("central.dealers.index"),active:route().current("central.dealers*"),roles:["central","central_salesman","central_contact"],icon:"pi pi-building"},{name:"Çalışanlar",href:route("central.workers.index"),active:route().current("central.workers*"),roles:["central","central_salesman","central_contact"],icon:"pi pi-users"},{name:"Ürünler",href:route("central.products.index"),active:route().current("central.products*"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-box"},{name:"Siparişler",href:route("central.orders.index"),active:route().current("central.orders*"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-shopping-cart"},{name:"Stok Yönetimi",href:route("central.stock-management.index"),active:route().current("central.stock-management*"),roles:["central","central_salesman","central_contact","central_worker"],icon:"pi pi-database"},{name:"Müşteriler",href:route("central.customers.index"),active:route().current("central.customers*"),roles:["central","central_salesman","central_contact"],icon:"pi pi-users"},{name:"Siparişler",href:route("dealer.orders"),active:route().current("dealer.orders"),roles:["admin"],icon:"pi pi-shopping-cart"},{name:"Hizmetler",href:route("dealer.services"),active:route().current("dealer.services"),roles:["admin"],icon:"pi pi-wrench"},{name:"Müşteriler",href:route("dealer.customers"),active:route().current("dealer.customers"),roles:["admin"],icon:"pi pi-users"},{name:"Çalışanlar",href:route("dealer.workers.index"),active:route().current("dealer.workers*"),roles:["admin"],icon:"pi pi-user"},{name:"Stok Kayıtları",href:route("dealer.stockRecords"),active:route().current("dealer.stockRecords"),roles:["admin"],icon:"pi pi-database"},{name:"Bayi Ayarları",href:route("dealer.settings"),active:route().current("dealer.settings"),roles:["admin"],icon:"pi pi-cog"},{name:"Anasayfa",href:route("worker.index"),active:route().current("worker.index"),roles:["worker"],icon:"pi pi-home"},{name:"Müşteriler",href:route("worker.customers.index"),active:route().current("worker.customers*"),roles:["worker"],icon:"pi pi-users"},{name:"Hizmetler",href:route("worker.services.index"),active:route().current("worker.services*"),roles:["worker"],icon:"pi pi-wrench"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#001100] to-[#002200]",children:[e.jsx($,{ref:n}),e.jsxs("div",{className:"lg:hidden",children:[e.jsx("div",{className:"fixed top-0 left-0 right-0 z-40 bg-[#001800]/95 backdrop-blur-xl border-b border-green-900/30",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx("button",{onClick:()=>f(!m),className:"p-2 rounded-lg text-green-400 hover:text-white transition-colors flex items-center gap-2",children:e.jsx("i",{className:`pi ${m?"pi-times":"pi-bars"} text-xl`})}),e.jsx("img",{src:"/uploads/olex-logo-yatay.svg",alt:"Olex Films Logo",className:"h-8 w-auto"}),e.jsx("div",{className:"w-10"})," "]})}),e.jsx("div",{className:"h-14"})," "]}),e.jsx(X,{children:(m||window.innerWidth>=1024)&&e.jsx(R.div,{initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{type:"spring",stiffness:260,damping:20},className:"fixed top-0 left-0 h-full w-72 bg-[#001800]/95 backdrop-blur-xl border-r border-green-900/30 z-40 overflow-y-auto lg:translate-x-0",children:e.jsxs("div",{className:"p-6",children:[e.jsx(j,{href:route("dashboard"),className:"block mb-8",children:e.jsx("img",{src:"/uploads/olex-logo-yatay.svg",alt:"Olex Films Logo",className:"h-12 w-auto mx-auto"})}),e.jsxs("div",{className:"mb-8 p-4 rounded-xl bg-[#002200]/50 border border-green-900/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#004d00] to-[#E6B800] flex items-center justify-center text-white font-bold",children:t.name.charAt(0)}),e.jsx("div",{children:e.jsx("div",{className:"text-white font-medium",children:t.name})})]}),e.jsx("div",{className:"text-gray-400 text-sm truncate",children:t.email}),e.jsx("div",{className:"text-green-400 text-sm",children:u()})]}),e.jsx("nav",{className:"space-y-1",children:h.map(({name:d,href:i,active:o,roles:v,icon:x},b)=>v.includes(t.role)||v.includes("*")?e.jsxs(j,{href:i,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${o?"bg-gradient-to-r from-[#004d00] to-[#E6B800] text-white":"text-gray-400 hover:bg-[#002200] hover:text-white"}`,children:[e.jsx("i",{className:`${x} text-lg`}),e.jsx("span",{children:d}),o&&e.jsx(R.div,{layoutId:"activeIndicator",className:"w-1.5 h-1.5 rounded-full bg-white ml-auto"})]},b):null)}),e.jsxs("div",{className:"mt-8 space-y-2",children:[e.jsxs(j,{href:route("profile.edit"),className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-[#002200] hover:text-white transition-all duration-200",children:[e.jsx("i",{className:"pi pi-user text-lg"}),e.jsx("span",{children:"Profil"})]}),e.jsxs(j,{href:route("logout"),method:"post",as:"button",className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-[#002200] hover:text-white transition-all duration-200",children:[e.jsx("i",{className:"pi pi-sign-out text-lg"}),e.jsx("span",{children:"Çıkış Yap"})]})]})]})})}),e.jsxs("main",{className:"lg:pl-72 min-h-screen",children:[a&&e.jsx("header",{className:"bg-[#001800]/50 backdrop-blur-sm border-b border-green-900/30 shadow-lg",children:e.jsx("div",{className:" mx-auto py-6 px-4",children:a})}),e.jsx("div",{className:" mx-auto py-6",children:s})]}),m&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-30 lg:hidden"})]})}export{re as A};
