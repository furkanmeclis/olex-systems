import{r as i,F as ue,j as e,a as pe,c as he}from"./app-BkrWYZtC.js";import{A as ge}from"./AuthenticatedLayout-2L1z-SVm.js";import{D as M}from"./datatable.esm-yDvZPKI4.js";import{C as o}from"./column.esm-hvUB5b8f.js";import{I as k}from"./inputtext.esm-Bm4L0Hw3.js";import{I as ye}from"./image.esm-CntFV5KP.js";import{B as d}from"./button.esm-e90mhoT9.js";import{T as fe}from"./tooltip.esm-BZpDGtoz.js";import{C as xe,c as B}from"./confirmpopup.esm-C67eBMmD.js";import{T as Y}from"./toolbar.esm-BuaHRo4m.js";import{D as w}from"./dialog.esm-BnfPzP_r.js";import{T as je}from"./toast.esm-CFYgxnmH.js";import{O as ve}from"./overlaypanel.esm-DYWj8HWn.js";import{C as we}from"./checkbox.esm-CDijuniZ.js";import Ce from"./Create-DLzxkTNY.js";import Se from"./Update-CA7Ne8cI.js";import be from"./ProductCodes-aDSUuuvi.js";import"./ApplicationLogo-DQw6Nnsr.js";import"./Dropdown-CLhlELt6.js";import"./transition-R0PNTLsy.js";import"./tag.esm-BAKrTJ9r.js";import"./ripple.esm-BZzQmJ3T.js";import"./index.esm-CyRMFN6c.js";import"./paginator.esm-VnrZA1X8.js";import"./inputnumber.esm-B7Yhw0Sw.js";import"./index.esm-fSEY-Mt5.js";import"./dropdown.esm-BJhm_Tk0.js";import"./index.esm-Ctk2V5pl.js";import"./index.esm-8o80j0rC.js";import"./overlayservice.esm-hBC-YJAC.js";import"./csstransition.esm-1psgkuxi.js";import"./index.esm-But8BROI.js";import"./index.esm-BgLGqj4p.js";import"./index.esm-yJQR7V9A.js";import"./index.esm-CzFE8yhM.js";import"./index.esm-DgsMyShD.js";import"./index.esm-DxH3kaKN.js";import"./index.esm-C4UCk0Ui.js";import"./inputtextarea.esm-B89aG31T.js";import"./index.esm-BQZ5TbbX.js";import"./formik.esm-D8qEp_UV.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-DtB68Usi.js";import"./inputswitch.esm-Dkr-TzYE.js";import"./chips.esm-CvRVp-3k.js";import"./divider.esm-D7fN9uhj.js";function ft({auth:A,productsAll:I,categoriesAll:G,csrf_token:p}){const r=i.useRef(null),C=i.useRef(null),[N,U]=i.useState({global:{value:null,matchMode:ue.CONTAINS}});i.useState(!1);const[z,_]=i.useState(""),[m,y]=i.useState([]),[J,X]=i.useState({}),[V,f]=i.useState(!1),[x,j]=i.useState(G),[v,h]=i.useState(I),[P,H]=i.useState(""),O=["id","sku","name","image","price","category","warranty","active","updated_at","created_at","actions"],$={id:"ID",sku:"Stok Kodu",name:"Ürün Adı",image:"Ürün Resmi",price:"Ürün Fiyatı",category:"Kategori",warranty:"Garanti Süresi",active:"Ürün Durumu",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[c,q]=i.useState(localStorage.getItem("selectedColumnsForProductsTable")?JSON.parse(localStorage.getItem("selectedColumnsForProductsTable")):O),[K,S]=i.useState(!1),[E,b]=i.useState(!1),[R,F]=i.useState(!1),[Q,W]=i.useState({}),[Z,ee]=i.useState(e.jsx(e.Fragment,{}));i.useEffect(()=>{localStorage.setItem("selectedColumnsForProductsTable",JSON.stringify(c))},[c]);const T=(t,a=!1)=>{const s=a?t:t.target.value;let l={...N};l.global.value=s,U(l),_(s)},te=()=>e.jsx(e.Fragment,{children:e.jsx(Y,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(d,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Ürün Ekle",tooltipOptions:{position:"top"},onClick:()=>{S(!0)},className:"mr-2"}),e.jsx(d,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{C.current.toggle(t)},className:"mr-2"}),e.jsx(d,{icon:"pi pi-sitemap",size:"small",severity:"help",tooltip:"Kategoriler",tooltipOptions:{position:"top"},onClick:()=>{f(!0)},className:"mr-2"}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>y([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(d,{size:"small",onClick:t=>{B({target:t.currentTarget,message:`Seçilen ${m.length} ürünü silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let a=route("central.products.multipleDestroy");fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({productIds:m.map(s=>s.id)})}).then(async s=>{let l=await s.json();s.status===404?r.current.show({severity:"error",summary:"Hata",detail:l.message}):s.status===500?r.current.show({severity:"warning",summary:"Hata",detail:l.message}):s.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:l.message}),h(v.map(g=>m.map(n=>n.id).includes(g.id)?null:g).filter(Boolean)))}).catch(s=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{y([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${m.length} Ürünü Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:m.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[m.length," ürün seçildi."]})})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(k,{size:"small",value:z,onChange:T,placeholder:"Ürünlerde Arama Yapın"})]}),z!==""&&e.jsx(d,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>T("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),ae=t=>e.jsx(d,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:he("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),se=te(),D=(t,a,s="product")=>{let l=s==="category";const g=()=>{l?fetch(route("central.categories.delete",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async n=>{let u=await n.json();n.status===404?r.current.show({severity:"error",summary:"Hata",detail:u.message}):n.status===500?r.current.show({severity:"warning",summary:"Hata",detail:u.message}):n.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:u.message}),h(u.products),j(u.categories))}).catch(n=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{}):fetch(route("central.products.destroy",a),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p}}).then(async n=>{let u=await n.json();n.status===404?r.current.show({severity:"error",summary:"Hata",detail:u.message}):n.status===500?r.current.show({severity:"warning",summary:"Hata",detail:u.message}):n.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:u.message}),h(v.map(L=>L.id!==a?L:null).filter(Boolean)))}).catch(n=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{y(m.filter(n=>n.id!==a?n:null).filter(Boolean))})};B({target:t.currentTarget,message:l?"Kategoriyi silmek istediğinize emin misiniz?":"Ürünü silmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:g,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},re=()=>{fetch(route("central.categories.store"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({name:P})}).then(async t=>{let a=await t.json();t.status===404?r.current.show({severity:"error",summary:"Hata",detail:a.message}):t.status===500?r.current.show({severity:"warning",summary:"Hata",detail:a.message}):t.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:a.message}),j(a.categories))}).catch(t=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{H("")})},ie=t=>{fetch(route("central.categories.update",t.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p},body:JSON.stringify({name:t.name})}).then(async a=>{let s=await a.json();a.status===404?r.current.show({severity:"error",summary:"Hata",detail:s.message}):a.status===500?r.current.show({severity:"warning",summary:"Hata",detail:s.message}):a.status===200&&(r.current.show({severity:"success",summary:"Başarılı",detail:s.message}),h(s.products),j(s.categories))}).catch(a=>{r.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{f(!1)})},[oe,le]=i.useState(e.jsx(e.Fragment,{})),[ne,ce]=i.useState(e.jsx(e.Fragment,{})),de=t=>{X(t),b(!0)},me=t=>{W(t),F(!0)};return e.jsxs(ge,{user:A.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Ürünler"}),children:[e.jsx(pe,{title:"Ürünler"}),e.jsx(fe,{target:".custom-target-icon"}),e.jsx(xe,{}),e.jsx(je,{ref:r}),e.jsx(ve,{ref:C,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[O.map((t,a)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(we,{inputId:t,checked:c.includes(t),onChange:s=>{let l=[...c];s.checked?l.push(t):l=l.filter(g=>g!==t),q(l)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:$[t]})]},a)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(d,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{C.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(M,{value:v,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:N,loading:!1,selectionMode:null,selection:m,onSelectionChange:t=>y(t.value),globalFilterFields:["name","category","warranty"],header:se,emptyMessage:"Ürün bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(o,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),c.includes("id")&&e.jsx(o,{field:"id",sortable:!0,header:"#"}),c.includes("sku")&&e.jsx(o,{field:"sku",sortable:!0,header:"SKU"}),c.includes("name")&&e.jsx(o,{field:"name",header:"Ürün Adı"}),c.includes("image")&&e.jsx(o,{field:"image",header:"Ürün Resmi",body:t=>e.jsx(ye,{src:`${t.image}`,preview:!0,style:{width:"6rem",borderRadius:"1rem"},alt:t.image,className:"w-[6rem] shadow-2 rounded-lg"})}),c.includes("price")&&e.jsx(o,{field:"price",sortable:!0,header:"Ürün Fiyatı",body:t=>e.jsxs("span",{children:[t.price," $"]})}),c.includes("category")&&e.jsx(o,{field:"category",header:"Kategori"}),c.includes("warranty")&&e.jsx(o,{field:"warranty",header:"Garanti Süresi"}),c.includes("active")&&e.jsx(o,{field:"active",header:"Ürün Durumu",dataType:"boolean",body:ae}),c.includes("created_at")&&e.jsx(o,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),c.includes("updated_at")&&e.jsx(o,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),c.includes("actions")&&e.jsx(o,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(d,{icon:"pi pi-qrcode",size:"small",tooltip:"Ürün Kodları",onClick:()=>{me(t)},tooltipOptions:{position:"top"},severity:"success"}),e.jsx(d,{icon:"pi pi-pencil",size:"small",tooltip:"Ürünü Düzenle",onClick:()=>{de(t)},tooltipOptions:{position:"top"},severity:"warning"}),e.jsx(d,{icon:"pi pi-times",tooltip:"Ürünü Sil",tooltipOptions:{position:"top"},size:"small",onClick:a=>{D(a,t.id)},severity:"danger"})]})})]}),e.jsxs(w,{header:"Kategoriler",maximizable:!0,position:"top",visible:V,style:{width:"50vw"},onHide:()=>f(!1),children:[e.jsx(Y,{start:()=>e.jsx("p",{children:"Yeni Kategori Ekle"}),center:()=>e.jsx(e.Fragment,{children:e.jsx(k,{size:"small",placeholder:"Yeni Kategori Adı",value:P,onChange:t=>H(t.target.value)})}),end:()=>e.jsx(e.Fragment,{children:e.jsx(d,{icon:"pi pi-save",onClick:()=>{re()},size:"small",severity:"success",tooltip:"Yeni Kategori Ekle"})})}),e.jsxs(M,{value:x,removableSort:!0,editMode:"row",onRowEditComplete:t=>{let a=[...x],{newData:s,index:l}=t;ie(s),a[l]=s,j(a)},children:[e.jsx(o,{field:"id",sortable:!0,header:"ID"}),e.jsx(o,{field:"name",sortable:!0,header:"Kategori Adı",editor:t=>e.jsx(k,{type:"text",size:"small",value:t.value,onChange:a=>t.editorCallback(a.target.value)})}),e.jsx(o,{header:"Ürün Sayısı",body:t=>{const a=v.filter(s=>s.category===t.name).length;return e.jsx(d,{label:a+" Ürün",link:!0,onClick:()=>{T(t.name,!0),f(!1)}})}}),e.jsx(o,{header:"Düzenle",rowEditor:!0}),e.jsx(o,{header:"Sil",body:t=>e.jsx(e.Fragment,{children:t.id!==0&&e.jsx(d,{icon:"pi pi-times",className:"ml-2",tooltip:"Kategoriyi Sil",tooltipOptions:{position:"top"},size:"small",onClick:a=>{D(a,t.id,"category")},severity:"danger"})})})]})]}),e.jsx(w,{header:"Yeni Ürün Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>S(!1),maximizable:!0,visible:K,footer:oe,children:e.jsx(Ce,{addModal:K,categories:x,csrf_token:p,toast:r,onHide:()=>S(!1),setProducts:h,setAddModalFooter:le})}),e.jsx(w,{header:"Ürünü Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>b(!1),maximizable:!0,visible:E,footer:ne,children:e.jsx(Se,{updateModal:E,categories:x,product:J,csrf_token:p,toast:r,onHide:()=>b(!1),setProducts:h,setUpdateModalFooter:ce})}),e.jsx(w,{header:"Ürün Kodları",style:{width:"70vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>F(!1),maximizable:!0,visible:R,footer:Z,children:e.jsx(be,{productCodesModal:R,product:Q,csrf_token:p,toast:r,onHide:()=>F(!1),setFooter:ee})})]})})})]})}export{ft as default};
