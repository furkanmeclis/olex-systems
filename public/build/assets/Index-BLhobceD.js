import{r as i,F as U,j as e,a as G,y as I,c as K}from"./app-B6stv-QN.js";import{A as Y}from"./AuthenticatedLayout-B1abvzug.js";import{D as J}from"./datatable.esm-jxy61pWP.js";import{C as n}from"./column.esm-BKEZc6gz.js";import{B as m}from"./button.esm-DN2tCSAP.js";import{T as V}from"./tooltip.esm-CYRMgrzU.js";import{C as X,c as w}from"./confirmpopup.esm-Kn6V0vmf.js";import{T as $}from"./toolbar.esm-B3ihvjiT.js";import{D as C}from"./dialog.esm-CODX-0Yg.js";import{T as q}from"./toast.esm-CnjUW4JC.js";import{O as Q}from"./overlaypanel.esm-CWr_PqGx.js";import{C as W}from"./checkbox.esm-BeDwPmop.js";import Z from"./Create-CTDMIlVM.js";import ee from"./Update-9ehczEiZ.js";import{A as te}from"./avatar.esm-DK96yQpR.js";import"./ApplicationLogo-uado7-ND.js";import"./Dropdown-OinGuohs.js";import"./transition-CZY-5jEN.js";import"./tag.esm-CUgAx78v.js";import"./ripple.esm-CvkIdw-B.js";import"./index.esm-BmVtfmCW.js";import"./paginator.esm-CSHe-Dg8.js";import"./inputnumber.esm-Cd1WfqnQ.js";import"./inputtext.esm-BYoBiLCN.js";import"./index.esm-D1ejHHWk.js";import"./dropdown.esm-D7huZ1Ij.js";import"./index.esm-Bs8nEz1Q.js";import"./index.esm-G9FaVcr1.js";import"./overlayservice.esm-DqoVCHUl.js";import"./csstransition.esm-CJ7fchEH.js";import"./index.esm-1nUXcC1T.js";import"./index.esm-CxzlEFNO.js";import"./index.esm-sggzhcCc.js";import"./index.esm-B5FycizX.js";import"./index.esm-DQGENn96.js";import"./index.esm-DoEY2q0c.js";import"./index.esm-CZqmcNiW.js";import"./formik.esm-Bm134rCe.js";import"./_baseClone-BgPU1wOP.js";import"./message.esm-DEeyycLo.js";import"./inputswitch.esm-BBNByel0.js";import"./password.esm-BND9UjYt.js";import"./index.esm-vy-Lsz68.js";function Ye({auth:k,dealersAll:F,csrf_token:u}){const l=i.useRef(null),y=i.useRef(null);i.useState({global:{value:null,matchMode:U.CONTAINS}}),i.useState(!1),i.useState("");const[c,h]=i.useState([]),[N,z]=i.useState({}),[x,f]=i.useState(F),v=["id","name","email","phone","avatar","active","updated_at","created_at","actions"],B={id:"ID",name:"Bayi Adı",avatar:"Avatar Resmi",active:"Üyelik Durumu",phone:"Telefon",role:"Rol",email:"Email",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler"},[s,D]=i.useState(localStorage.getItem("selectedColumnsForUsersTable")?JSON.parse(localStorage.getItem("selectedColumnsForUsersTable")):v),[b,g]=i.useState(!1),[S,j]=i.useState(!1);i.useEffect(()=>{localStorage.setItem("selectedColumnsForUsersTable",JSON.stringify(s))},[s]);const P=()=>e.jsx(e.Fragment,{children:e.jsx($,{start:()=>e.jsxs(e.Fragment,{children:[e.jsx(m,{icon:"pi pi-plus",size:"small",severity:"success",tooltip:"Yeni Bayi Ekle",tooltipOptions:{position:"top"},onClick:()=>{g(!0)},className:"mr-2"}),e.jsx(m,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{y.current.toggle(t)},className:"mr-2"}),c.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(m,{size:"small",icon:"pi pi-times",className:"p-button-warning mr-2",onClick:()=>h([]),tooltip:"Seçimi Temizle",tooltipOptions:{position:"top"}}),e.jsx(m,{size:"small",onClick:t=>{w({target:t.currentTarget,message:`Seçilen ${c.length} bayileri silmek istediğinize emin misiniz?`,icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>{let d=route("super.dealers.multipleDestroy");fetch(d,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u},body:JSON.stringify({dealerIds:c.map(r=>r.id)})}).then(async r=>{let o=await r.json();r.status===404?l.current.show({severity:"error",summary:"Hata",detail:o.message}):r.status===500?l.current.show({severity:"warning",summary:"Hata",detail:o.message}):r.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:o.message}),f(x.map(a=>c.map(p=>p.id).includes(a.id)?null:a).filter(Boolean)))}).catch(r=>{console.log(r),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{h([])})},acceptLabel:"Sil",rejectLabel:"Vazgeç"})},icon:"pi pi-trash",className:"p-button-danger",tooltip:`Seçilen ${c.length} Bayiyi Sil`,tooltipOptions:{position:"top"}})]})]}),center:()=>e.jsx(e.Fragment,{children:c.length>0&&e.jsx("p",{children:e.jsxs("span",{children:[c.length," bayi seçildi."]})})})})}),O=t=>e.jsx(m,{className:"flex justify-center",tooltip:t.active?"Aktif":"DeAktif",tooltipOptions:{position:"top",mouseTrack:!0},unstyled:!0,children:e.jsx("i",{className:K("pi ",{"true-icon pi-check-circle text-green-400":!!t.active,"false-icon pi-times-circle text-red-400":!t.active})})}),M=P(),E=(t,d,r="dealer")=>{const o=()=>{fetch(route("super.dealers.destroy",d),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u}}).then(async a=>{let p=await a.json();a.status===404?l.current.show({severity:"error",summary:"Hata",detail:p.message}):a.status===500?l.current.show({severity:"warning",summary:"Hata",detail:p.message}):a.status===200&&(l.current.show({severity:"success",summary:"Başarılı",detail:p.message}),f(x.map(T=>T.id!==d?T:null).filter(Boolean)))}).catch(a=>{console.log(a),l.current.show({severity:"error",summary:"Hata",detail:"CSRF Token Hatası Lütfen Sayfayı Yenileyiniz.."})}).finally(()=>{h(c.filter(a=>a.id!==d?a:null).filter(Boolean))})};w({target:t.currentTarget,message:"Bu işlemi gerçekleştirmek istediğinize emin misiniz?",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:o,acceptLabel:"Sil",rejectLabel:"Vazgeç"})},[A,H]=i.useState(e.jsx(e.Fragment,{})),[L,R]=i.useState(e.jsx(e.Fragment,{})),_=t=>{z(t),j(!0)};return e.jsxs(Y,{user:k.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"Bayiler"}),children:[e.jsx(G,{title:"Bayiler"}),e.jsx(V,{target:".custom-target-icon"}),e.jsx(X,{}),e.jsx(q,{ref:l}),e.jsx(Q,{ref:y,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[v.map((t,d)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(W,{inputId:t,checked:s.includes(t),onChange:r=>{let o=[...s];r.checked?o.push(t):o=o.filter(a=>a!==t),D(o)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:B[t]})]},d)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(m,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{y.current.hide()}})})]})]})}),e.jsx("div",{className:"py-6",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsxs(J,{dragSelection:!0,value:x,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:{name:{value:"",matchMode:"contains"},email:{value:"",matchMode:"contains"},phone:{value:"",matchMode:"contains"}},filterDisplay:"row",loading:!1,selectionMode:null,selection:c,onSelectionChange:t=>h(t.value),globalFilterFields:["name","email","phone"],header:M,emptyMessage:"Bayi bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[e.jsx(n,{selectionMode:"multiple",headerStyle:{width:"3rem"}}),s.includes("id")&&e.jsx(n,{field:"id",sortable:!0,header:"#"}),s.includes("name")&&e.jsx(n,{field:"name",filter:!0,filterPlaceholder:"Ada Göre Filtreleyin",sortable:!0,header:"Bayi Adı"}),s.includes("email")&&e.jsx(n,{field:"email",filter:!0,filterPlaceholder:"Emaile Göre Filtreleyin",sortable:!0,header:"Email"}),s.includes("phone")&&e.jsx(n,{field:"phone",filter:!0,filterPlaceholder:"Telefona Göre Filtreleyin",sortable:!0,header:"Telefon No"}),s.includes("avatar")&&e.jsx(n,{field:"image",header:"Avatar",body:t=>e.jsx(te,{image:t.avatar,shape:"circle",size:"large"})}),s.includes("active")&&e.jsx(n,{field:"active",header:"Durumu",dataType:"boolean",body:O}),s.includes("created_at")&&e.jsx(n,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),s.includes("updated_at")&&e.jsx(n,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()}),s.includes("actions")&&e.jsx(n,{header:"İşlemler",body:t=>e.jsxs("div",{className:"flex justify-center gap-x-2",children:[e.jsx(m,{icon:"pi pi-eye",size:"small",tooltip:"Bayiyi Görüntüle",tooltipOptions:{position:"top"},severity:"info",onClick:()=>{I.visit(route("super.dealers.show",t.id))}}),e.jsx(m,{icon:"pi pi-pencil",size:"small",tooltip:"Hızlı Düzenle",tooltipOptions:{position:"top"},severity:"warning",onClick:()=>{_(t)}}),e.jsx(m,{icon:"pi pi-times",tooltip:"Bayiyi Sil",tooltipOptions:{position:"top"},size:"small",onClick:d=>{E(d,t.id)},severity:"danger"})]})})]}),e.jsx(C,{header:"Yeni Bayi Ekle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>g(!1),maximizable:!0,visible:b,footer:A,children:e.jsx(Z,{addModal:b,csrf_token:u,toast:l,onHide:()=>g(!1),setDealers:f,setAddModalFooter:H})}),e.jsx(C,{header:"Bayiyi Düzenle",style:{width:"50vw"},breakpoints:{"960px":"75vw","641px":"100vw"},onHide:()=>j(!1),maximizable:!0,visible:S,footer:L,children:e.jsx(ee,{updateModal:S,dealer:N,csrf_token:u,toast:l,onHide:()=>j(!1),setDealers:f,setUpdateModalFooter:R})})]})})})]})}export{Ye as default};
