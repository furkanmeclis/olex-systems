import{K as S,r as o,F as L,j as e,$ as O}from"./app-2dEnFbol.js";import"./Dropdown-Bz8_Grql.js";import{T as E}from"./tag.esm-1aFfu_aU.js";import{T as R}from"./toast.esm-CYUjmINi.js";import{D as B}from"./datatable.esm-Ded6BT4Q.js";import{C as s}from"./column.esm-C5YmWcIJ.js";import{I}from"./inputtext.esm-BElP5JEu.js";import{B as n}from"./button.esm-BxCmjYrH.js";import{T as G}from"./tooltip.esm-B0SFQXmi.js";import{C as H}from"./confirmpopup.esm-D2uVlXFP.js";import{T as A}from"./toolbar.esm-DdFyApMb.js";import{O as d}from"./overlaypanel.esm-BFwNDuky.js";import{C as D}from"./checkbox.esm-DePb2jBT.js";import{c as M}from"./ripple.esm-BzRUCNyJ.js";import{C as K}from"./CarBody-BduS_Z5V.js";import"./csstransition.esm-CZRxnida.js";import"./index.esm-BCqelGsY.js";import"./index.esm-DffjiFPL.js";import"./index.esm-DCNiD8Nv.js";import"./index.esm-GJ4SfU9q.js";import"./TransitionGroup-B7gto3Pv.js";import"./index.esm-CJ0UbATh.js";import"./paginator.esm-D7V6fndz.js";import"./inputnumber.esm-2HOoghO7.js";import"./index.esm-CfbMo687.js";import"./dropdown.esm-BVu1Wdrb.js";import"./index.esm-BvN2aFpx.js";import"./overlayservice.esm-hjHhmC6x.js";import"./index.esm-BaGNysXl.js";import"./index.esm-CTlmYQmh.js";import"./index.esm-BD_l9FnN.js";import"./index.esm-LbBjE-3k.js";import"./index.esm-DsEyknNI.js";import"./scrollpanel.esm-C6hLkUgj.js";function Ne(){const{services:b}=S().props,[y,Y]=o.useState(!1),_=o.useRef(null),m=o.useRef(null),p=o.useRef(null),x=o.useRef(null),[h,k]=o.useState({global:{value:null,matchMode:L.CONTAINS}}),[f,C]=o.useState(""),v=["id","service_no","customer_name","dealer_name","worker_name","warranty","plate","status","car","updated_at","created_at","actions","note"],w={id:"ID",service_no:"Hizmet Numarası",dealer_name:"Bayi Adı",customer_name:"Müşteri Adı",worker_name:"Ekleyen Çalışan",warranty:"Garanti Bilgileri",plate:"Plaka",status:"Durumu",car:"Araç",updated_at:"Güncellenme Tarihi",created_at:"Eklenme Tarihi",actions:"İşlemler",note:"Not"},N="services-for-super-table-columns-2",[r,T]=M(["id","service_no","customer_name","dealer_name","status","car","created_at","actions"],N),j=(t,a=!1)=>{const c=a?t:t.target.value;let i={...h};i.global.value=c,k(i),C(c)},F=e.jsx(e.Fragment,{children:e.jsx(A,{start:()=>e.jsx(e.Fragment,{children:e.jsx(n,{icon:"pi pi-bars",size:"small",severity:"info",tooltip:"Kolonları Yönet",tooltipOptions:{position:"top"},onClick:t=>{m.current.toggle(t)},className:"mr-2"})}),end:()=>e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"p-input-icon-left",children:[e.jsx("i",{className:"pi pi-search"}),e.jsx(I,{size:"small",value:f,onChange:j,placeholder:"Hizmetlerde Arama Yapın"})]}),f!==""&&e.jsx(n,{size:"small",icon:"pi pi-times",className:"p-button-info ml-2",onClick:()=>j("",!0),tooltip:"Filtreyi Temizle",tooltipOptions:{position:"top"}})]})})}),[l,u]=o.useState(null),g=o.useRef(null),P=()=>e.jsxs(e.Fragment,{children:[e.jsx(G,{target:".custom-target-icon"}),e.jsx(H,{}),e.jsx(R,{ref:_}),e.jsx(d,{ref:m,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h3",{children:"Kolonları Yönet"})}),e.jsxs("div",{className:"flex flex-col",children:[v.map((t,a)=>e.jsxs("div",{className:"flex my-1 items-center",children:[e.jsx(D,{inputId:t,checked:r.includes(t),onChange:c=>{let i=[...r];c.checked?i.push(t):i=i.filter(z=>z!==t),T(i)}}),e.jsx("label",{htmlFor:t,className:"ml-2",children:w[t]})]},a)),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(n,{label:"Kaydet",severity:"success",size:"small",onClick:()=>{m.current.hide()}})})]})]})}),e.jsx(d,{ref:g,showCloseIcon:!0,closeOnEscape:!0,children:e.jsx("p",{children:e.jsx("span",{dangerouslySetInnerHTML:{__html:l==null?void 0:l.note}})})}),e.jsx(d,{ref:p,showCloseIcon:!0,closeOnEscape:!0,children:l&&l.status==="completed"&&e.jsx(e.Fragment,{children:e.jsx("ul",{children:l.warranty.map((t,a)=>e.jsxs("li",{children:[t.name," - ",t.label]}))})})}),e.jsx(d,{ref:x,showCloseIcon:!0,closeOnEscape:!0,children:e.jsx(K,{editable:!1,value:l==null?void 0:l.body,onChange:()=>{}})}),e.jsxs(B,{value:b,removableSort:!0,paginator:!0,paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",rowsPerPageOptions:[5,10,25,50],rows:10,dataKey:"id",filters:h,loading:y,globalFilterFields:["service_no","worker.name","car","customer_name","status","dealer.name","car.plate"],header:F,emptyMessage:"Hizmet bulunamadı.",currentPageReportTemplate:"{first}. ile {last}. arası toplam {totalRecords} kayıttan",children:[r.includes("id")&&e.jsx(s,{field:"id",sortable:!0,header:"#"}),r.includes("service_no")&&e.jsx(s,{field:"service_no",sortable:!0,header:"Hizmet Numarası",body:({service_no:t})=>e.jsx(n,{label:t,link:!0,onClick:()=>{window.open(route("warranty.index",t),"_blank")}})}),r.includes("customer_name")&&e.jsx(s,{field:"customer.name",sortable:!0,header:"Müşteri Adı"}),r.includes("dealer_name")&&e.jsx(s,{field:"dealer.name",sortable:!0,header:"Ekleyen Bayi",body:t=>e.jsx(O,{href:route("super.dealers.show",t.dealer.id),className:"text-green-400",children:e.jsx(n,{label:t.dealer.name,size:"small",link:!0})})}),r.includes("worker_name")&&e.jsx(s,{field:"worker.name",sortable:!0,header:"Ekleyen Çalışan"}),r.includes("warranty")&&e.jsx(s,{field:"warranty_x",align:"center",header:"Garanti Bilgileri",body:t=>e.jsx("div",{children:t.status==="completed"&&e.jsx(n,{icon:"pi pi-calendar",onClick:a=>{u(t),p.current.toggle(a)},tooltip:"Garanti Bilgileri",severity:"success"})})}),r.includes("plate")&&e.jsx(s,{field:"car.plate",sortable:!0,header:"Plaka"}),r.includes("status")&&e.jsx(s,{field:"status",sortable:!0,header:"Durumu",body:({status_label:t,status_severity:a})=>e.jsx(E,{value:t,severity:a})}),r.includes("car")&&e.jsx(s,{field:"car.brand",sortable:!0,header:"Araç",body:t=>e.jsx(n,{label:t.car.brand+"-"+t.car.model,size:"small",link:!0,onClick:a=>{u(t),x.current.toggle(a)}})}),r.includes("note")&&e.jsx(s,{field:"note",sortable:!0,header:"Hizmet Notu",body:t=>e.jsx(n,{label:"Notu Görüntüle",size:"small",link:!0,onClick:a=>{u(t),g.current.toggle(a)}})}),r.includes("created_at")&&e.jsx(s,{field:"created_at",sortable:!0,header:"Eklenme Tarihi",body:t=>new Date(t.created_at).toLocaleString()}),r.includes("updated_at")&&e.jsx(s,{field:"updated_at",sortable:!0,header:"Güncellenme Tarihi",body:t=>new Date(t.updated_at).toLocaleString()})]})]});return e.jsx(P,{})}export{Ne as default};
